import{d as k,h as d,P as H,aE as J,aF as R,aG as M,aH as W,Z as U,r as i,Q,c as E,o as g,b as t,w as o,F as q,f as K,g as $,a,z as X,y as ee,t as u,W as te,e as Y,u as V,aI as ae,M as oe,N as se,aJ as ne}from"./index-CsAqytoE.js";import"./index-BpCvQqaw.js";import{O as le,a as re,g as ie}from"./order-B-rHowVg.js";import{T as ce}from"./index-B0Tvy4_-.js";import{aU as I}from"./installCanvasRenderer-Bf4uGEF_.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./statistics-DhZ_8_UZ.js";const de={class:"order-statistics-component"},ue={class:"stat-content"},_e={class:"stat-info"},me={class:"stat-value"},pe={class:"stat-label"},ve={class:"chart-header"},fe={class:"table-header"},ge={class:"amount"},he=k({__name:"index",setup(O){const v=d(!1),_=d([new Date(Date.now()-30*24*60*60*1e3).toISOString().slice(0,10),new Date().toISOString().slice(0,10)]),y=d(),S=d(),b=d(null),m=H([{key:"total",label:"总订单数",value:"0",icon:J,color:"#409EFF"},{key:"amount",label:"总销售额",value:"€0",icon:R,color:"#67C23A"},{key:"pending",label:"待处理",value:"0",icon:M,color:"#E6A23C"},{key:"completed",label:"已完成",value:"0",icon:W,color:"#67C23A"}]),w=d([]),D=e=>le[e]||"info",l=e=>re[e]||e,n=e=>{m[0].value=e.total_orders.toLocaleString();const s=c(e.currency);m[1].value=`${s}${e.total_amount.toLocaleString()}`,m[2].value=e.pending_orders.toLocaleString(),m[3].value=e.completed_orders.toLocaleString()},c=e=>({JPY:"¥",USD:"$",EUR:"€",CNY:"¥",GBP:"£"})[e]||e,f=e=>{const s=I(y.value),h={title:{text:"订单趋势",left:"center",textStyle:{fontSize:14,color:"#666"}},tooltip:{trigger:"axis"},legend:{data:["订单数量","销售额"],bottom:0},xAxis:{type:"category",data:e.trend_data.dates},yAxis:[{type:"value",name:"订单数",position:"left"},{type:"value",name:"销售额",position:"right"}],series:[{name:"订单数量",type:"line",data:e.trend_data.order_counts,smooth:!0,itemStyle:{color:"#409EFF"}},{name:"销售额",type:"bar",yAxisIndex:1,data:e.trend_data.amounts,itemStyle:{color:"#67C23A"}}]};s.setOption(h),window.addEventListener("resize",()=>{s.resize()})},A=e=>{const s=I(S.value),h={title:{text:"订单状态分布",left:"center",textStyle:{fontSize:14,color:"#666"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"订单状态",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:e.status_distribution.map(p=>({value:p.value,name:p.name,itemStyle:{color:z(p.status)}}))}]};s.setOption(h),window.addEventListener("resize",()=>{s.resize()})},z=e=>({pending:"#E6A23C",confirmed:"#409EFF",processing:"#909399",shipped:"#67C23A",delivered:"#67C23A",cancelled:"#F56C6C",refunded:"#F56C6C"})[e]||"#909399",B=e=>{e&&L()},L=async()=>{v.value=!0;try{const{data:e}=await ie({start_date:_.value[0],end_date:_.value[1],limit:5});b.value=e,w.value=e.recent_orders,n(e),await oe(),f(e),A(e)}catch(e){console.error("加载统计数据失败:",e),se.error("加载统计数据失败")}finally{v.value=!1}};return U(async()=>{await L()}),(e,s)=>{const h=i("el-icon"),p=i("el-card"),C=i("el-col"),T=i("el-row"),N=i("el-date-picker"),P=i("el-button"),x=i("el-table-column"),j=i("el-tag"),Z=i("el-table"),G=Q("loading");return g(),E("div",de,[t(T,{gutter:20,class:"stats-cards"},{default:o(()=>[(g(!0),E(q,null,K(m,r=>(g(),$(C,{xs:24,sm:12,md:6,key:r.key},{default:o(()=>[t(p,{class:"stat-card",shadow:"hover"},{default:o(()=>[a("div",ue,[a("div",{class:"stat-icon",style:X({backgroundColor:r.color})},[t(h,{size:24},{default:o(()=>[(g(),$(ee(r.icon)))]),_:2},1024)],4),a("div",_e,[a("div",me,u(r.value),1),a("div",pe,u(r.label),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(T,{gutter:20,class:"charts-section"},{default:o(()=>[t(C,{xs:24,lg:12},{default:o(()=>[t(p,{class:"chart-card",shadow:"never"},{header:o(()=>[a("div",ve,[s[2]||(s[2]=a("span",null,"订单趋势",-1)),t(N,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=r=>_.value=r),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:B,size:"small"},null,8,["modelValue"])])]),default:o(()=>[a("div",{ref_key:"orderTrendChart",ref:y,class:"chart-container"},null,512)]),_:1})]),_:1}),t(C,{xs:24,lg:12},{default:o(()=>[t(ce)]),_:1})]),_:1}),t(T,{gutter:20,class:"bottom-section"},{default:o(()=>[t(C,{xs:24,lg:12},{default:o(()=>[t(p,{class:"table-card",shadow:"never"},{header:o(()=>[a("div",fe,[s[4]||(s[4]=a("span",null,"最近订单",-1)),t(P,{type:"primary",size:"small",onClick:s[1]||(s[1]=r=>e.$router.push("/order/list"))},{default:o(()=>[s[3]||(s[3]=Y(" 查看全部 ",-1)),t(h,{class:"el-icon--right"},{default:o(()=>[t(V(ae))]),_:1})]),_:1})])]),default:o(()=>[te((g(),$(Z,{data:w.value,stripe:""},{default:o(()=>[t(x,{prop:"order_number",label:"订单号",width:"180"}),t(x,{prop:"customer_name",label:"客户",width:"120"}),t(x,{prop:"total_amount",label:"金额",width:"100",align:"center"},{default:o(({row:r})=>[a("span",ge,u(r.total_amount)+" "+u(r.currency),1)]),_:1}),t(x,{prop:"status",label:"状态",width:"100",align:"center"},{default:o(({row:r})=>[t(j,{type:D(r.status),size:"small"},{default:o(()=>[Y(u(l(r.status)),1)]),_:2},1032,["type"])]),_:1}),t(x,{prop:"created_at",label:"下单时间","show-overflow-tooltip":""})]),_:1},8,["data"])),[[G,v.value]])]),_:1})]),_:1}),t(C,{xs:24,lg:12},{default:o(()=>[t(p,{class:"chart-card",shadow:"never"},{header:o(()=>[...s[5]||(s[5]=[a("span",null,"订单状态分布",-1)])]),default:o(()=>[a("div",{ref_key:"orderStatusChart",ref:S,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1})])}}}),ye=F(he,[["__scopeId","data-v-22689433"]]),Se={class:"time-content"},be={class:"time-icon"},we={class:"time-info"},Ce={class:"time-row"},xe={class:"time-section"},De={class:"time-value"},$e={class:"time-date"},ke={class:"time-section"},ze={class:"time-value"},Te={class:"time-date"},Ee=k({__name:"index",setup(O){const v=d(""),_=d(""),y=d(""),S=d("");let b=null;const m=l=>{const n=String(l.getHours()).padStart(2,"0"),c=String(l.getMinutes()).padStart(2,"0"),f=String(l.getSeconds()).padStart(2,"0");return`${n}:${c}:${f}`},w=l=>{const n=l.getFullYear(),c=String(l.getMonth()+1).padStart(2,"0"),f=String(l.getDate()).padStart(2,"0"),z=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][l.getDay()];return`${n}年${c}月${f}日 ${z}`},D=()=>{const l=new Date,n=new Date(l.toLocaleString("en-US",{timeZone:"Europe/Prague"}));v.value=m(n),_.value=w(n);const c=new Date(l.toLocaleString("en-US",{timeZone:"Asia/Shanghai"}));y.value=m(c),S.value=w(c)};return U(()=>{D(),b=window.setInterval(D,1e3)}),ne(()=>{b&&clearInterval(b)}),(l,n)=>{const c=i("el-icon"),f=i("el-card");return g(),$(f,{class:"europe-time-card",shadow:"hover"},{default:o(()=>[a("div",Se,[a("div",be,[t(c,{size:32,color:"#409EFF"},{default:o(()=>[t(V(M))]),_:1})]),a("div",we,[a("div",Ce,[a("div",xe,[n[0]||(n[0]=a("div",{class:"time-label"},"捷克时间 (CET)",-1)),a("div",De,u(v.value),1),a("div",$e,u(_.value),1)]),n[2]||(n[2]=a("div",{class:"time-divider"},null,-1)),a("div",ke,[n[1]||(n[1]=a("div",{class:"time-label"},"北京时间",-1)),a("div",ze,u(y.value),1),a("div",Te,u(S.value),1)])])])])]),_:1})}}}),Fe=F(Ee,[["__scopeId","data-v-60c7765a"]]),Oe={class:"home"},Ae=k({name:"home"}),Le=k({...Ae,setup(O){return(v,_)=>(g(),E("div",Oe,[t(Fe),t(ye)]))}}),Pe=F(Le,[["__scopeId","data-v-8d310c30"]]);export{Pe as default};
