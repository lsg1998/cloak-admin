import{d as _e,h as v,P as M,s as ue,Z as We,r as f,Q as Ze,c as _,o as u,a as n,b as e,g as x,R as ee,w as t,e as p,u as b,$ as re,i as He,V as Qe,F as D,f as S,n as Ye,t as g,q as G,as as ce,U as pe,aP as el,ar as ll,aC as me,aL as ol,x as tl,W as al,_ as nl,aY as sl,a0 as dl,N as h,M as il}from"./index-Dfv0S-Oo.js";import{g as fe}from"./product-CS2LMGn9.js";import{_ as ul}from"./_plugin-vue_export-helper-DlAUqK2U.js";const rl={class:"pixel-templates"},cl={class:"action-bar"},pl={class:"templates-grid"},ml=["onClick"],fl={class:"template-header"},_l={class:"template-title"},gl={class:"template-actions"},vl={class:"template-description"},bl={class:"template-platforms"},kl={class:"platform-tags"},yl={class:"template-footer"},Vl={class:"template-stats"},xl={class:"stat-item"},Cl={class:"stat-item"},hl={class:"template-apply"},wl={class:"detail-header"},Tl={class:"detail-actions"},Ul={class:"template-config"},Pl={class:"config-section"},Il={class:"config-section"},zl={class:"config-section"},Dl={class:"config-section"},Sl={key:0,class:"empty-custom"},Al={key:1},$l={class:"custom-pixel-header"},Xl={class:"custom-pixel-name"},El={class:"custom-pixel-code"},Fl={class:"config-form"},Ol={class:"config-form"},Ll={class:"config-form"},Nl={class:"custom-pixel-config"},Bl={class:"custom-pixel-header"},Rl={class:"custom-pixel-form"},Ml={class:"dialog-footer"},Gl={key:0,style:{"margin-top":"8px"}},jl={class:"dialog-footer"},Kl=["src"],ql={key:1},Jl={key:0},Wl={key:1},Zl={style:{"text-align":"left","margin-bottom":"12px"}},Hl=_e({name:"PixelTemplates"}),Ql=_e({...Hl,setup(Yl){const A=v(!1),E=v(!1),j=v(!1),K=v(!1),F=v(!1),i=v(null),q=v("google_ads"),le=v("google_ads"),oe=v([]),O=v(""),J=v(),L=v(!1),W=v(!1),N=v([]),w=M({title:"",country:""}),T=M({current:1,size:10,total:0}),ge=[{code:"SK",name:"斯洛伐克"},{code:"CZ",name:"捷克"},{code:"PL",name:"波兰"},{code:"HU",name:"匈牙利"},{code:"DE",name:"德国"},{code:"AT",name:"奥地利"},{code:"RO",name:"罗马尼亚"},{code:"JP",name:"日本"}],ve={SK:"斯洛伐克",CZ:"捷克",PL:"波兰",HU:"匈牙利",DE:"德国",AT:"奥地利",RO:"罗马尼亚",JP:"日本"},be=ue(()=>{const a={};return N.value.forEach(l=>{if(l.country){const s=l.country.toUpperCase();a[s]=(a[s]||0)+1}}),a}),Z=ue(()=>{const a=be.value,l=[],s=[];return ge.forEach(d=>{const k=a[d.code]||0;k>0?l.push({...d,count:k}):s.push(d)}),l.sort((d,k)=>k.count-d.count),{withProducts:l,withoutProducts:s}}),I=v([]),r=M({name:"",type:"general",description:"",config:{google_ads:{enabled:!1,conversion_id:"",conversion_label:""},facebook:{enabled:!1,pixel_id:""},tiktok:{enabled:!1,pixel_id:""},custom:[]}}),m=M({productIds:[],mode:"replace"}),ke={name:[{required:!0,message:"请输入模板名称",trigger:"blur"}],type:[{required:!0,message:"请选择模板类型",trigger:"change"}],description:[{required:!0,message:"请输入模板描述",trigger:"blur"}]},ye=a=>{i.value=a,q.value="google_ads"},Ve=()=>{F.value=!1,Ie(),A.value=!0},te=a=>{F.value=!0,Object.assign(r,{...a,config:JSON.parse(JSON.stringify(a.config))}),A.value=!0},xe=a=>{dl.confirm(`确定要删除模板 "${a.name}" 吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const l=I.value.findIndex(s=>s.id===a.id);l>-1&&(I.value.splice(l,1),h.success("模板删除成功"))})},ae=a=>{i.value=a,m.productIds=[],m.mode="replace",E.value=!0},Ce=()=>{r.config.custom.push({name:"",enabled:!0,code:""})},he=a=>{r.config.custom.splice(a,1)},we=async()=>{j.value=!0;try{if(await new Promise(a=>setTimeout(a,1e3)),F.value){const a=I.value.findIndex(l=>{var s;return l.id===((s=i.value)==null?void 0:s.id)});a>-1&&(I.value[a]={...I.value[a],...r,updatedAt:new Date().toISOString().split("T")[0]}),h.success("模板更新成功")}else{const a={...r,id:Date.now().toString(),usageCount:0,createdAt:new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0]};I.value.unshift(a),h.success("模板创建成功")}A.value=!1}catch{h.error("保存失败")}finally{j.value=!1}},Te=async()=>{if(m.productIds.length===0){h.warning("请选择要应用模板的商品");return}K.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),i.value&&(i.value.usageCount+=m.productIds.length),h.success(`模板已成功应用到 ${m.productIds.length} 个商品`),E.value=!1}catch{h.error("应用失败")}finally{K.value=!1}},Ue=()=>{h.info("导入模板功能开发中...")},Pe=()=>{h.info("导出模板功能开发中...")},Ie=()=>{Object.assign(r,{name:"",type:"general",description:"",config:{google_ads:{enabled:!1,conversion_id:"",conversion_label:""},facebook:{enabled:!1,pixel_id:""},tiktok:{enabled:!1,pixel_id:""},custom:[]}})},ze=a=>({general:"info",google_ads:"success",facebook:"primary",tiktok:"warning",multi_platform:"danger"})[a]||"info",De=a=>({general:"通用",google_ads:"Google Ads",facebook:"Facebook",tiktok:"TikTok",multi_platform:"多平台"})[a]||"未知",Se=a=>{var s,d,k,B;const l=[];return(s=a.google_ads)!=null&&s.enabled&&l.push("google_ads"),(d=a.facebook)!=null&&d.enabled&&l.push("facebook"),(k=a.tiktok)!=null&&k.enabled&&l.push("tiktok"),((B=a.custom)==null?void 0:B.length)>0&&l.push("custom"),l},Ae=a=>({google_ads:"success",facebook:"primary",tiktok:"warning",custom:"info"})[a]||"info",$e=a=>({google_ads:"Google Ads",facebook:"Facebook",tiktok:"TikTok",custom:"自定义"})[a]||"未知",Xe=async()=>{try{const{data:a}=await fe({page:1,size:1e3,product_type:"original"});oe.value=a.list}catch(a){console.error("加载商品列表失败:",a)}},Ee=()=>{L.value=!0,R()},R=async()=>{W.value=!0;try{const{data:a}=await fe({page:T.current,size:T.size,title:w.title||void 0,country:w.country||void 0,product_type:"original"});N.value=a.list,T.total=a.total,await il(),J.value&&m.productIds.length>0&&N.value.forEach(l=>{m.productIds.includes(l.id)&&J.value.toggleRowSelection(l,!0)})}catch(a){console.error("加载商品列表失败:",a),h.error("加载商品列表失败")}finally{W.value=!1}},H=()=>{T.current=1,R()},Fe=()=>{w.title="",w.country="",H()},Oe=a=>{const l=N.value.map(d=>d.id),s=m.productIds.filter(d=>!l.includes(d));m.productIds=[...s,...a.map(d=>d.id)],Q()},Le=()=>{L.value=!1,Q()},Q=()=>{m.productIds.length===0?O.value="":O.value=`已选择 ${m.productIds.length} 个商品`},Ne=a=>{const l=oe.value.find(s=>s.id===a);return l?l.title:a},Be=a=>{m.productIds=m.productIds.filter(l=>l!==a),Q()},Re=()=>{m.productIds=[],O.value=""};return We(()=>{Xe()}),(a,l)=>{const s=f("el-icon"),d=f("el-button"),k=f("el-tag"),B=f("el-card"),z=f("el-switch"),c=f("el-form-item"),y=f("el-input"),$=f("el-form"),U=f("el-tab-pane"),Me=f("el-empty"),ne=f("el-tabs"),P=f("el-option"),se=f("el-select"),Y=f("el-dialog"),de=f("el-radio"),Ge=f("el-radio-group"),X=f("el-table-column"),ie=f("el-avatar"),je=f("el-table"),Ke=f("el-pagination"),qe=f("el-text"),Je=Ze("loading");return u(),_("div",rl,[l[50]||(l[50]=n("div",{class:"page-header"},[n("h2",null,"像素模板管理"),n("p",null,"管理常用的像素配置模板，快速应用到商品")],-1)),n("div",cl,[e(d,{type:"primary",onClick:Ve},{default:t(()=>[e(s,null,{default:t(()=>[e(b(re))]),_:1}),l[33]||(l[33]=p(" 新建模板 ",-1))]),_:1}),e(d,{onClick:Ue},{default:t(()=>[e(s,null,{default:t(()=>[e(b(He))]),_:1}),l[34]||(l[34]=p(" 导入模板 ",-1))]),_:1}),e(d,{onClick:Pe},{default:t(()=>[e(s,null,{default:t(()=>[e(b(Qe))]),_:1}),l[35]||(l[35]=p(" 导出模板 ",-1))]),_:1})]),e(B,{class:"templates-card",shadow:"never"},{default:t(()=>[n("div",pl,[(u(!0),_(D,null,S(I.value,o=>{var C;return u(),_("div",{key:o.id,class:Ye(["template-card",{active:((C=i.value)==null?void 0:C.id)===o.id}]),onClick:V=>ye(o)},[n("div",fl,[n("div",_l,[n("h3",null,g(o.name),1),e(k,{type:ze(o.type),size:"small"},{default:t(()=>[p(g(De(o.type)),1)]),_:2},1032,["type"])]),n("div",gl,[e(d,{size:"small",type:"primary",link:"",onClick:G(V=>te(o),["stop"])},{default:t(()=>[e(s,null,{default:t(()=>[e(b(ce))]),_:1})]),_:1},8,["onClick"]),e(d,{size:"small",type:"danger",link:"",onClick:G(V=>xe(o),["stop"])},{default:t(()=>[e(s,null,{default:t(()=>[e(b(pe))]),_:1})]),_:1},8,["onClick"])])]),n("div",vl,[n("p",null,g(o.description),1)]),n("div",bl,[n("div",kl,[(u(!0),_(D,null,S(Se(o.config),V=>(u(),x(k,{key:V,type:Ae(V),size:"small",class:"platform-tag"},{default:t(()=>[p(g($e(V)),1)]),_:2},1032,["type"]))),128))])]),n("div",yl,[n("div",Vl,[n("span",xl,[e(s,null,{default:t(()=>[e(b(el))]),_:1}),p(" 使用 "+g(o.usageCount)+" 次 ",1)]),n("span",Cl,[e(s,null,{default:t(()=>[e(b(ll))]),_:1}),p(" "+g(o.updatedAt),1)])]),n("div",hl,[e(d,{size:"small",type:"success",onClick:G(V=>ae(o),["stop"])},{default:t(()=>[e(s,null,{default:t(()=>[e(b(me))]),_:1}),l[36]||(l[36]=p(" 应用 ",-1))]),_:1},8,["onClick"])])])],10,ml)}),128))])]),_:1}),i.value?(u(),x(B,{key:0,class:"template-detail",shadow:"never"},{header:t(()=>[n("div",wl,[n("span",null,"模板详情 - "+g(i.value.name),1),n("div",Tl,[e(d,{size:"small",onClick:l[0]||(l[0]=o=>te(i.value))},{default:t(()=>[e(s,null,{default:t(()=>[e(b(ce))]),_:1}),l[37]||(l[37]=p(" 编辑 ",-1))]),_:1}),e(d,{size:"small",type:"success",onClick:l[1]||(l[1]=o=>ae(i.value))},{default:t(()=>[e(s,null,{default:t(()=>[e(b(me))]),_:1}),l[38]||(l[38]=p(" 应用到商品 ",-1))]),_:1})])])]),default:t(()=>[n("div",Ul,[e(ne,{modelValue:q.value,"onUpdate:modelValue":l[9]||(l[9]=o=>q.value=o),type:"card"},{default:t(()=>[e(U,{label:"Google Ads",name:"google_ads"},{default:t(()=>[n("div",Pl,[e($,{model:i.value.config.google_ads,"label-width":"120px"},{default:t(()=>[e(c,{label:"启用状态"},{default:t(()=>[e(z,{modelValue:i.value.config.google_ads.enabled,"onUpdate:modelValue":l[2]||(l[2]=o=>i.value.config.google_ads.enabled=o),disabled:""},null,8,["modelValue"])]),_:1}),e(c,{label:"转化ID"},{default:t(()=>[e(y,{modelValue:i.value.config.google_ads.conversion_id,"onUpdate:modelValue":l[3]||(l[3]=o=>i.value.config.google_ads.conversion_id=o),disabled:"",placeholder:"AW-XXXXXXXXX"},null,8,["modelValue"])]),_:1}),e(c,{label:"转化标签"},{default:t(()=>[e(y,{modelValue:i.value.config.google_ads.conversion_label,"onUpdate:modelValue":l[4]||(l[4]=o=>i.value.config.google_ads.conversion_label=o),disabled:"",placeholder:"AbCdEfGhIjKlMnOp"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1}),e(U,{label:"Facebook",name:"facebook"},{default:t(()=>[n("div",Il,[e($,{model:i.value.config.facebook,"label-width":"120px"},{default:t(()=>[e(c,{label:"启用状态"},{default:t(()=>[e(z,{modelValue:i.value.config.facebook.enabled,"onUpdate:modelValue":l[5]||(l[5]=o=>i.value.config.facebook.enabled=o),disabled:""},null,8,["modelValue"])]),_:1}),e(c,{label:"像素ID"},{default:t(()=>[e(y,{modelValue:i.value.config.facebook.pixel_id,"onUpdate:modelValue":l[6]||(l[6]=o=>i.value.config.facebook.pixel_id=o),disabled:"",placeholder:"123456789012345"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1}),e(U,{label:"TikTok",name:"tiktok"},{default:t(()=>[n("div",zl,[e($,{model:i.value.config.tiktok,"label-width":"120px"},{default:t(()=>[e(c,{label:"启用状态"},{default:t(()=>[e(z,{modelValue:i.value.config.tiktok.enabled,"onUpdate:modelValue":l[7]||(l[7]=o=>i.value.config.tiktok.enabled=o),disabled:""},null,8,["modelValue"])]),_:1}),e(c,{label:"像素ID"},{default:t(()=>[e(y,{modelValue:i.value.config.tiktok.pixel_id,"onUpdate:modelValue":l[8]||(l[8]=o=>i.value.config.tiktok.pixel_id=o),disabled:"",placeholder:"C1234567890ABCDEF"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1}),e(U,{label:"自定义像素",name:"custom"},{default:t(()=>[n("div",Dl,[i.value.config.custom.length===0?(u(),_("div",Sl,[e(Me,{description:"暂无自定义像素"})])):(u(),_("div",Al,[(u(!0),_(D,null,S(i.value.config.custom,(o,C)=>(u(),_("div",{key:C,class:"custom-pixel-item"},[n("div",$l,[n("span",Xl,g(o.name),1),e(k,{type:o.enabled?"success":"info",size:"small"},{default:t(()=>[p(g(o.enabled?"启用":"禁用"),1)]),_:2},1032,["type"])]),n("div",El,[n("pre",null,[n("code",null,g(o.code),1)])])]))),128))]))])]),_:1})]),_:1},8,["modelValue"])])]),_:1})):ee("",!0),e(Y,{modelValue:A.value,"onUpdate:modelValue":l[22]||(l[22]=o=>A.value=o),title:F.value?"编辑模板":"新建模板",width:"800px","close-on-click-modal":!1},{footer:t(()=>[n("div",Ml,[e(d,{onClick:l[21]||(l[21]=o=>A.value=!1)},{default:t(()=>[...l[40]||(l[40]=[p("取消",-1)])]),_:1}),e(d,{type:"primary",onClick:we,loading:j.value},{default:t(()=>[p(g(F.value?"更新":"创建"),1)]),_:1},8,["loading"])])]),default:t(()=>[e($,{ref:"templateFormRef",model:r,rules:ke,"label-width":"120px"},{default:t(()=>[e(c,{label:"模板名称",prop:"name"},{default:t(()=>[e(y,{modelValue:r.name,"onUpdate:modelValue":l[10]||(l[10]=o=>r.name=o),placeholder:"请输入模板名称"},null,8,["modelValue"])]),_:1}),e(c,{label:"模板类型",prop:"type"},{default:t(()=>[e(se,{modelValue:r.type,"onUpdate:modelValue":l[11]||(l[11]=o=>r.type=o),placeholder:"请选择模板类型"},{default:t(()=>[e(P,{label:"通用模板",value:"general"}),e(P,{label:"Google Ads专用",value:"google_ads"}),e(P,{label:"Facebook专用",value:"facebook"}),e(P,{label:"TikTok专用",value:"tiktok"}),e(P,{label:"多平台组合",value:"multi_platform"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"模板描述",prop:"description"},{default:t(()=>[e(y,{modelValue:r.description,"onUpdate:modelValue":l[12]||(l[12]=o=>r.description=o),type:"textarea",rows:3,placeholder:"请输入模板描述"},null,8,["modelValue"])]),_:1}),e(c,{label:"像素配置"},{default:t(()=>[e(ne,{modelValue:le.value,"onUpdate:modelValue":l[20]||(l[20]=o=>le.value=o),type:"card"},{default:t(()=>[e(U,{label:"Google Ads",name:"google_ads"},{default:t(()=>[n("div",Fl,[e(c,{label:"启用状态"},{default:t(()=>[e(z,{modelValue:r.config.google_ads.enabled,"onUpdate:modelValue":l[13]||(l[13]=o=>r.config.google_ads.enabled=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"转化ID",prop:"config.google_ads.conversion_id"},{default:t(()=>[e(y,{modelValue:r.config.google_ads.conversion_id,"onUpdate:modelValue":l[14]||(l[14]=o=>r.config.google_ads.conversion_id=o),placeholder:"AW-XXXXXXXXX"},null,8,["modelValue"])]),_:1}),e(c,{label:"转化标签",prop:"config.google_ads.conversion_label"},{default:t(()=>[e(y,{modelValue:r.config.google_ads.conversion_label,"onUpdate:modelValue":l[15]||(l[15]=o=>r.config.google_ads.conversion_label=o),placeholder:"AbCdEfGhIjKlMnOp"},null,8,["modelValue"])]),_:1})])]),_:1}),e(U,{label:"Facebook",name:"facebook"},{default:t(()=>[n("div",Ol,[e(c,{label:"启用状态"},{default:t(()=>[e(z,{modelValue:r.config.facebook.enabled,"onUpdate:modelValue":l[16]||(l[16]=o=>r.config.facebook.enabled=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"像素ID",prop:"config.facebook.pixel_id"},{default:t(()=>[e(y,{modelValue:r.config.facebook.pixel_id,"onUpdate:modelValue":l[17]||(l[17]=o=>r.config.facebook.pixel_id=o),placeholder:"123456789012345"},null,8,["modelValue"])]),_:1})])]),_:1}),e(U,{label:"TikTok",name:"tiktok"},{default:t(()=>[n("div",Ll,[e(c,{label:"启用状态"},{default:t(()=>[e(z,{modelValue:r.config.tiktok.enabled,"onUpdate:modelValue":l[18]||(l[18]=o=>r.config.tiktok.enabled=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"像素ID",prop:"config.tiktok.pixel_id"},{default:t(()=>[e(y,{modelValue:r.config.tiktok.pixel_id,"onUpdate:modelValue":l[19]||(l[19]=o=>r.config.tiktok.pixel_id=o),placeholder:"C1234567890ABCDEF"},null,8,["modelValue"])]),_:1})])]),_:1}),e(U,{label:"自定义像素",name:"custom"},{default:t(()=>[n("div",Nl,[n("div",Bl,[e(d,{type:"primary",size:"small",onClick:Ce},{default:t(()=>[e(s,null,{default:t(()=>[e(b(re))]),_:1}),l[39]||(l[39]=p(" 添加自定义像素 ",-1))]),_:1})]),(u(!0),_(D,null,S(r.config.custom,(o,C)=>(u(),_("div",{key:C,class:"custom-pixel-item"},[n("div",Rl,[e(c,{label:"名称",prop:`config.custom.${C}.name`},{default:t(()=>[e(y,{modelValue:o.name,"onUpdate:modelValue":V=>o.name=V,placeholder:"像素名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),e(c,{label:"启用"},{default:t(()=>[e(z,{modelValue:o.enabled,"onUpdate:modelValue":V=>o.enabled=V},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(d,{type:"danger",size:"small",onClick:V=>he(C)},{default:t(()=>[e(s,null,{default:t(()=>[e(b(pe))]),_:1})]),_:1},8,["onClick"])]),e(c,{label:"代码",prop:`config.custom.${C}.code`},{default:t(()=>[e(y,{modelValue:o.code,"onUpdate:modelValue":V=>o.code=V,type:"textarea",rows:4,placeholder:"请输入像素代码"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]))),128))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(Y,{modelValue:E.value,"onUpdate:modelValue":l[26]||(l[26]=o=>E.value=o),title:"应用模板到商品",width:"600px","close-on-click-modal":!1},{footer:t(()=>[n("div",jl,[e(d,{onClick:l[25]||(l[25]=o=>E.value=!1)},{default:t(()=>[...l[43]||(l[43]=[p("取消",-1)])]),_:1}),e(d,{type:"primary",onClick:Te,loading:K.value},{default:t(()=>[...l[44]||(l[44]=[p(" 确认应用 ",-1)])]),_:1},8,["loading"])])]),default:t(()=>[e($,{model:m,"label-width":"120px"},{default:t(()=>[e(c,{label:"选择商品"},{default:t(()=>[e(y,{modelValue:O.value,"onUpdate:modelValue":l[23]||(l[23]=o=>O.value=o),placeholder:"点击选择商品（可多选）",readonly:"",style:{cursor:"pointer"},onClick:Ee},{suffix:t(()=>[m.productIds.length>0?(u(),x(s,{key:0,onClick:G(Re,["stop"]),style:{cursor:"pointer"}},{default:t(()=>[e(b(ol))]),_:1})):(u(),x(s,{key:1},{default:t(()=>[e(b(tl))]),_:1}))]),_:1},8,["modelValue"]),m.productIds.length>0?(u(),_("div",Gl,[(u(!0),_(D,null,S(m.productIds,o=>(u(),x(k,{key:o,closable:"",onClose:C=>Be(o),style:{"margin-right":"8px","margin-bottom":"8px"}},{default:t(()=>[p(g(Ne(o)),1)]),_:2},1032,["onClose"]))),128))])):ee("",!0)]),_:1}),e(c,{label:"应用方式"},{default:t(()=>[e(Ge,{modelValue:m.mode,"onUpdate:modelValue":l[24]||(l[24]=o=>m.mode=o)},{default:t(()=>[e(de,{label:"replace"},{default:t(()=>[...l[41]||(l[41]=[p("替换现有配置",-1)])]),_:1}),e(de,{label:"merge"},{default:t(()=>[...l[42]||(l[42]=[p("合并现有配置",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(Y,{modelValue:L.value,"onUpdate:modelValue":l[32]||(l[32]=o=>L.value=o),title:"选择商品（可多选）",width:"900px","close-on-click-modal":!1},{footer:t(()=>[n("div",Zl,[e(qe,null,{default:t(()=>[p("已选择 "+g(m.productIds.length)+" 个商品",1)]),_:1})]),e(d,{onClick:l[31]||(l[31]=o=>L.value=!1)},{default:t(()=>[...l[48]||(l[48]=[p("取消",-1)])]),_:1}),e(d,{type:"primary",onClick:Le},{default:t(()=>[...l[49]||(l[49]=[p("确定",-1)])]),_:1})]),default:t(()=>[e($,{model:w,inline:"",style:{"margin-bottom":"16px"}},{default:t(()=>[e(c,{label:"商品标题"},{default:t(()=>[e(y,{modelValue:w.title,"onUpdate:modelValue":l[27]||(l[27]=o=>w.title=o),placeholder:"请输入商品标题",clearable:"",style:{width:"200px"},onKeyup:nl(H,["enter"])},null,8,["modelValue"])]),_:1}),e(c,{label:"国家"},{default:t(()=>[e(se,{modelValue:w.country,"onUpdate:modelValue":l[28]||(l[28]=o=>w.country=o),placeholder:"请选择国家",clearable:"",style:{width:"200px"}},{default:t(()=>[(u(!0),_(D,null,S(Z.value.withProducts,o=>(u(),x(P,{key:o.code,label:`${o.name} (${o.count}条)`,value:o.code},null,8,["label","value"]))),128)),Z.value.withProducts.length>0?(u(),x(P,{key:0,disabled:"",value:""},{default:t(()=>[...l[45]||(l[45]=[n("span",{style:{color:"#dcdfe6"}},"──────────",-1)])]),_:1})):ee("",!0),(u(!0),_(D,null,S(Z.value.withoutProducts,o=>(u(),x(P,{key:o.code,label:o.name,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:t(()=>[e(d,{type:"primary",onClick:H},{default:t(()=>[...l[46]||(l[46]=[p("搜索",-1)])]),_:1}),e(d,{onClick:Fe},{default:t(()=>[...l[47]||(l[47]=[p("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),al((u(),x(je,{data:N.value,"max-height":"400px",onSelectionChange:Oe,"row-key":o=>o.id,ref_key:"productTableRef",ref:J},{default:t(()=>[e(X,{type:"selection",width:"55","reserve-selection":!0}),e(X,{label:"商品图片",width:"80"},{default:t(({row:o})=>[o.image_urls&&o.image_urls[0]?(u(),x(ie,{key:0,size:50},{default:t(()=>[n("img",{src:o.image_urls[0],style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Kl)]),_:2},1024)):(u(),x(ie,{key:1,size:50},{default:t(()=>[e(s,null,{default:t(()=>[e(b(sl))]),_:1})]),_:1}))]),_:1}),e(X,{prop:"title",label:"商品标题","show-overflow-tooltip":"","min-width":"200"}),e(X,{label:"国家",width:"120"},{default:t(({row:o})=>[o.country?(u(),x(k,{key:0,type:"success",size:"small"},{default:t(()=>[p(g(ve[o.country.toUpperCase()]||o.country),1)]),_:2},1024)):(u(),_("span",ql,"--"))]),_:1}),e(X,{prop:"sell_price",label:"价格",width:"100",align:"right"},{default:t(({row:o})=>[o.sell_price?(u(),_("span",Jl,g(o.sell_price),1)):(u(),_("span",Wl,"--"))]),_:1}),e(X,{label:"状态",width:"80"},{default:t(({row:o})=>[e(k,{type:o.status==="active"?"success":"info",size:"small"},{default:t(()=>[p(g(o.status==="active"?"上架":o.status==="inactive"?"下架":"草稿"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data","row-key"])),[[Je,W.value]]),e(Ke,{"current-page":T.current,"onUpdate:currentPage":l[29]||(l[29]=o=>T.current=o),"page-size":T.size,"onUpdate:pageSize":l[30]||(l[30]=o=>T.size=o),total:T.total,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onCurrentChange:R,onSizeChange:R,style:{"margin-top":"16px","justify-content":"center"}},null,8,["current-page","page-size","total"])]),_:1},8,["modelValue"])])}}}),to=ul(Ql,[["__scopeId","data-v-7273ad47"]]);export{to as default};
