import{u as d}from"./useHandleData-RQEtZEsN.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-BczCKc53.js";import{d as w,h as T,P as L,r as c,c as R,o as U,b as n,w as s,a as $,u as i,E as D,e as p,U as m,t as E,S as P,b0 as V,N as b}from"./index-kykIy4Vw.js";import{a as A,b as B,c as q,d as f,r as H}from"./user-CdcGa400.js";import"./sortable.esm-xXTzzsvS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"table-box"},j=w({name:"complexProTable"}),X=w({...j,setup(G){const o=T(),y=L([{type:"selection",width:80},{type:"index",label:"#",width:80},{type:"expand",label:"Expand",width:100},{prop:"base",label:"基本信息",headerRender:t=>n(c("el-button"),{type:"primary",onClick:()=>b.success("我是通过 tsx 语法渲染的表头")},{default:()=>[t.column.label]}),_children:[{prop:"username",label:"用户姓名",width:110},{prop:"user.detail.age",label:"年龄",width:100},{prop:"gender",label:"性别",width:100,enum:A,fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"details",label:"详细资料",_children:[{prop:"idCard",label:"身份证号"},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"}]}]},{prop:"status",label:"用户状态",tag:!0,enum:B,fieldNames:{label:"userLabel",value:"userStatus"}},{prop:"createTime",label:"创建时间",width:200},{prop:"operation",label:"操作",fixed:"right",width:230}]),g=()=>{var t,e,a,l,r,u;(a=(t=o.value)==null?void 0:t.element)==null||a.setCurrentRow((e=o.value)==null?void 0:e.tableData[4]),(u=(l=o.value)==null?void 0:l.element)==null||u.toggleRowSelection((r=o.value)==null?void 0:r.tableData[4],!0)},_=t=>{const{columns:e}=t,a=[];return e.forEach((l,r)=>{if(r===0)return a[r]="合计";a[r]="N/A"}),a},C=({rowIndex:t,columnIndex:e})=>{if(e===3)return t%2===0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},v=({rowIndex:t})=>t===2?"warning-row":t===6?"success-row":"",k=(t,e)=>{e.property=="radio"||e.property=="operation"||b.success("当前行被点击了！")},h=async t=>{var e;await d(f,{id:[t.id]},`删除【${t.username}】用户`),(e=o.value)==null||e.getTableList()},S=async t=>{var e,a;await d(f,{id:t},"删除所选用户信息"),(e=o.value)==null||e.clearSelection(),(a=o.value)==null||a.getTableList()},x=async t=>{var e;await d(H,{id:t.id},`重置【${t.username}】用户密码`),(e=o.value)==null||e.getTableList()};return(t,e)=>{const a=c("el-button");return U(),R("div",M,[n(N,{ref_key:"proTable",ref:o,title:"用户列表","highlight-current-row":"",columns:y,"request-api":i(q),"row-class-name":v,"span-method":C,"show-summary":!0,"summary-method":_,onRowClick:k},{tableHeader:s(l=>{var r,u;return[n(a,{type:"primary",icon:i(P),onClick:(u=(r=o.value)==null?void 0:r.element)==null?void 0:u.toggleAllSelection},{default:s(()=>[...e[0]||(e[0]=[p("全选 / 全不选",-1)])]),_:1},8,["icon","onClick"]),n(a,{type:"primary",icon:i(V),plain:"",onClick:g},{default:s(()=>[...e[1]||(e[1]=[p("选中第五行",-1)])]),_:1},8,["icon"]),n(a,{type:"danger",icon:i(m),plain:"",disabled:!l.isSelected,onClick:z=>S(l.selectedListIds)},{default:s(()=>[...e[2]||(e[2]=[p(" 批量删除用户 ",-1)])]),_:1},8,["icon","disabled","onClick"])]}),expand:s(l=>[p(E(l.row),1)]),operation:s(l=>[n(a,{type:"primary",link:"",icon:i(D),onClick:r=>x(l.row)},{default:s(()=>[...e[3]||(e[3]=[p("重置密码",-1)])]),_:1},8,["icon","onClick"]),n(a,{type:"primary",link:"",icon:i(m),onClick:r=>h(l.row)},{default:s(()=>[...e[4]||(e[4]=[p("删除",-1)])]),_:1},8,["icon","onClick"])]),append:s(()=>[...e[5]||(e[5]=[$("span",{style:{color:"var(--el-color-primary)"}},"我是插入在表格最后的内容。若表格有合计行，该内容会位于合计行之上。",-1)])]),_:1},8,["columns","request-api"])])}}});export{X as default};
