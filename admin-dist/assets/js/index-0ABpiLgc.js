import{a5 as Ve,d as we,af as lt,h as f,ag as tt,D as Je,ah as at,ai as st,s as pe,r as y,c as _,o as u,b as l,a as i,g as z,R as D,n as Ke,w as t,F as H,u as m,aE as ll,b9 as it,U as Te,q as ot,a7 as We,N as p,$ as se,P as re,a8 as nt,Z as ut,Q as dt,_ as rt,x as Fe,e as n,E as Ge,W as Ie,aB as he,t as v,f as Y,aD as He,aq as pt,aC as ct,aP as _t,ba as Ze,bb as mt,G as ft,bc as Qe,aN as gt,a0 as De}from"./index-Bj6ddc6A.js";import{d as vt,u as yt,c as kt,g as Xe,a as Ye,b as bt}from"./product-CUsRE0If.js";import{c as ht}from"./cloakRule-C2RRSLQk.js";import{W as Vt}from"./index-DoKdfxiF.js";import{_ as tl}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./upload-1d8LtbSM.js";const wt=$=>Ve.get(`/admin/products/${$}/skus`),Ut=$=>Ve.post("/admin/product-skus",$),zt=($,Z)=>Ve.put(`/admin/product-skus/${$}`,Z),St=$=>Ve.delete(`/admin/product-skus/${$}`),Ct={class:"product-upload-box"},xt=["src"],$t={key:1,class:"upload-empty"},Pt={class:"el-upload__tip"},Mt=we({name:"ProductUploadImg"}),Ft=we({...Mt,props:{imageUrl:{default:""},drag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},fileSize:{default:2},fileType:{default:()=>["image/jpeg","image/png","image/gif","image/webp"]},height:{default:"150px"},width:{default:"150px"},borderRadius:{default:"8px"}},emits:["update:imageUrl","update:image-url"],setup($,{emit:Z}){lt(g=>({v5f6650a9:g.borderRadius,v6111d75b:g.width,b14bcb9c:g.height}));const L=$,j=f("id-"+tt()),O=f(!1),R=Je(at,void 0),N=Je(st,void 0),K=pe(()=>L.disabled||(R==null?void 0:R.disabled)),ie=pe(()=>"https://gammtt.shop/admin/upload/image"),q=Z,oe=()=>{q("update:imageUrl",""),q("update:image-url","")},ne=()=>{const g=document.querySelector(`#${j.value} .el-upload__input`);g&&g.dispatchEvent(new MouseEvent("click"))},ee=g=>{const k=g.type.startsWith("image/"),F=g.size/1024/1024<L.fileSize,P=L.fileType.includes(g.type);return k?P?F?!0:(p.error(`图片大小不能超过 ${L.fileSize}MB!`),!1):(p.error(`上传图片格式不正确，支持格式：${L.fileType.join(", ")}`),!1):(p.error("只能上传图片文件!"),!1)},ce=g=>{g&&g.success&&g.data&&g.data.url?(q("update:imageUrl",g.data.url),q("update:image-url",g.data.url),p.success("图片上传成功!"),N!=null&&N.prop&&(R==null||R.validateField([N.prop]))):p.error("图片上传失败: "+(g.error||"未知错误"))},E=()=>{p.error("图片上传失败，请重新上传!")};return(g,k)=>{const F=y("el-icon"),P=y("el-upload"),M=y("el-image-viewer");return u(),_("div",Ct,[l(P,{id:j.value,action:ie.value,class:Ke(["upload",K.value?"disabled":"",$.drag?"no-border":""]),multiple:!1,disabled:K.value,"show-file-list":!1,"before-upload":ee,"on-success":ce,"on-error":E,drag:$.drag,accept:$.fileType.join(",")},{default:t(()=>[$.imageUrl?(u(),_(H,{key:0},[i("img",{src:$.imageUrl,class:"upload-image"},null,8,xt),i("div",{class:"upload-handle",onClick:k[1]||(k[1]=ot(()=>{},["stop"]))},[K.value?D("",!0):(u(),_("div",{key:0,class:"handle-icon",onClick:ne},[l(F,null,{default:t(()=>[l(m(ll))]),_:1}),k[3]||(k[3]=i("span",null,"编辑",-1))])),i("div",{class:"handle-icon",onClick:k[0]||(k[0]=Q=>O.value=!0)},[l(F,null,{default:t(()=>[l(m(it))]),_:1}),k[4]||(k[4]=i("span",null,"查看",-1))]),K.value?D("",!0):(u(),_("div",{key:1,class:"handle-icon",onClick:oe},[l(F,null,{default:t(()=>[l(m(Te))]),_:1}),k[5]||(k[5]=i("span",null,"删除",-1))]))])],64)):(u(),_("div",$t,[We(g.$slots,"empty",{},()=>[l(F,null,{default:t(()=>[l(m(se))]),_:1}),k[6]||(k[6]=i("span",null,"请上传图片",-1))],!0)]))]),_:3},8,["id","action","class","disabled","drag","accept"]),i("div",Pt,[We(g.$slots,"tip",{},void 0,!0)]),O.value?(u(),z(M,{key:0,"url-list":[$.imageUrl],onClose:k[2]||(k[2]=Q=>O.value=!1)},null,8,["url-list"])):D("",!0)])}}}),el=tl(Ft,[["__scopeId","data-v-937c0afd"]]),It={class:"product-management"},Dt={class:"table-header"},Kt={class:"table-title"},Tt={class:"table-actions"},jt={class:"product-info"},Rt=["src","alt"],At={class:"product-details"},Lt={class:"product-title"},Et={class:"product-subtitle"},Bt={key:0,style:{"font-weight":"bold",color:"#ef3f52"}},Ot={key:1,style:{color:"#999999"}},Nt={key:0,style:{color:"#666666","text-decoration":"line-through"}},qt={key:1,style:{color:"#999999"}},Jt={key:1,style:{color:"#999999"}},Wt={key:0},Gt={key:0},Ht={key:1,style:{color:"#999999"}},Zt={key:1},Qt={key:2,style:{color:"#f56c6c"}},Xt={key:0},Yt={key:1,style:{color:"#999999"}},ea={class:"count-info"},la={class:"count-info"},ta={class:"time-info"},aa={class:"action-buttons"},sa={class:"pagination-wrapper"},ia={style:{display:"flex","align-items":"center","justify-content":"space-between"}},oa={style:{"font-size":"12px",color:"#999999"}},na={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ua={class:"form-tip",style:{color:"#909399","font-size":"12px"}},da={style:{display:"flex","align-items":"center",gap:"8px"}},ra={style:{display:"flex","align-items":"center",gap:"8px"}},pa={class:"editor-controls"},ca={class:"dialog-footer"},_a={class:"sku-management"},ma={class:"sku-list-section"},fa={class:"section-header"},ga=["src","alt"],va={class:"sku-attributes"},ya={class:"price"},ka={key:1,style:{color:"#999999"}},ba={class:"sku-specs"},ha={class:"add-spec-form"},Va={key:0,class:"specs-list"},wa={class:"specs-grid"},Ua={class:"spec-content"},za={class:"spec-name"},Sa={class:"image-input-section"},Ca={class:"input-mode-selector"},xa={key:0,class:"url-input-mode"},$a={key:0,class:"url-preview"},Pa={class:"image-error"},Ma={key:1,class:"upload-mode"},Fa={class:"dialog-footer"},Ia={class:"fake-product-selection"},Da={key:0,class:"product-summary"},Ka=["src","alt"],Ta={class:"product-info"},ja={class:"product-title"},Ra={class:"product-price"},Aa={style:{display:"flex","align-items":"center","justify-content":"space-between"}},La={class:"search-section"},Ea={class:"fake-products-grid"},Ba=["onClick"],Oa=["src","alt"],Na={class:"card-content"},qa={class:"card-title"},Ja={class:"card-price"},Wa={class:"card-check"},Ga={key:0,class:"empty-state"},Ha={key:0,class:"fake-pagination"},Za={class:"dialog-footer"},Qa=we({name:"ProductList"}),Xa=we({...Qa,setup($){const Z=f(!1),L=f(!1),j=f(!1),O=f(""),R=f(),N=f(!1),K=f(!1),ie=f(""),q=f(!1),oe=f(!1),ne=f(),ee=f(null),ce=f([]),E=f(""),g=f(""),k=f([]),F=f("url"),P=re({title:"",status:null,product_type:""}),M=re({current:1,size:20,total:0}),Q=f([]),T=f([]),le=f(!1),d=re({id:null,spu_id:"",title:"",sell_price:0,origin_price:0,discount:0,image_urls:[],rich_text_content:"",specification_list:[],variants:[],status:"active",product_type:"original",b_page_product_id:"",cloak_rule_id:null,country:"JA",template:"classic"}),_e=f([]),me=f([]),ue=f(!1),te=f(!1),S=f(null),fe=f([]),ge=f(!1),J=f(""),ve=f(""),I=re({current:1,size:12,total:0}),ae=f(!1),al=[{label:"日本",value:"JA"},{label:"中国",value:"ZH"},{label:"英国",value:"EN"},{label:"斯洛伐克",value:"SK"},{label:"斯洛文尼亚",value:"SI"},{label:"波兰",value:"PL"},{label:"葡萄牙",value:"PT"},{label:"匈牙利",value:"HU"},{label:"意大利",value:"IT"},{label:"西班牙",value:"ES"},{label:"捷克",value:"CZ"}],sl=pe(()=>ae.value?"calc(100vh - 200px)":"500px"),il=pe(()=>({placeholder:"请输入商品描述内容...",MENU_CONF:{uploadImage:{server:je.value,fieldName:"file",maxFileSize:2*1024*1024,allowedFileTypes:["image/*"]}}})),je=pe(()=>"https://gammtt.shop/admin/upload/image"),r=re({id:null,product_id:"",sku_code:"",sku_name:"",sell_price:0,origin_price:0,cost_price:0,discount_percent:0,stock_quantity:0,warning_stock:10,main_image:"",status:"active",attributes:[]}),ol={title:[{required:!0,message:"请输入商品标题",trigger:"blur"},{min:2,max:500,message:"商品标题长度在 2 到 500 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},nl={sku_name:[{required:!0,message:"请输入SKU名称",trigger:"blur"}],sell_price:[{required:!0,message:"请输入销售价格",trigger:"blur"}],stock_quantity:[{required:!0,message:"请输入库存数量",trigger:"blur"}]},ul=()=>{if(r.origin_price>0&&r.sell_price>0){const s=Math.round((r.origin_price-r.sell_price)/r.origin_price*100);r.discount_percent=Math.max(0,Math.min(100,s))}else r.discount_percent=0};nt(()=>[r.sell_price,r.origin_price],()=>{ul()},{deep:!0});const dl=s=>({active:"success",inactive:"danger",draft:"warning",deleted:"info"})[s]||"info",rl=s=>({active:"上架",inactive:"下架",draft:"草稿",deleted:"已删除"})[s]||s,pl=s=>({active:"success",inactive:"danger",out_of_stock:"warning"})[s]||"info",cl=s=>({active:"正常",inactive:"禁用",out_of_stock:"缺货"})[s]||s,Ue=()=>{M.current=1,W()},_l=()=>{Object.assign(P,{title:"",status:null,product_type:""}),Ue()},ml=()=>{O.value="添加商品",Object.assign(d,{id:null,spu_id:"",title:"",sell_price:0,origin_price:0,discount:0,image_urls:[],rich_text_content:"",specification_list:[],variants:[],status:"active",product_type:"original",b_page_product_id:"",cloak_rule_id:null,country:"JA"}),_e.value=[],me.value=[],T.value.length===0&&!le.value&&xe(),T.value.length,T.value,j.value=!0},ze=s=>{const o=`https://gammtt.shop/product/${s.id}`;window.open(o,"_blank"),p.success("正在跳转到商品页面...")},fl=s=>{O.value="编辑商品",s.cloak_rule_id,s.cloak_rule_id;const e={...s,sell_price:parseFloat(s.sell_price)||0,origin_price:parseFloat(s.origin_price)||0,discount:parseFloat(s.discount)||0,product_type:s.product_type||"original",b_page_product_id:s.b_page_product_id||"",country:s.country||"JA",template:s.template||"classic",cloak_rule_id:s.cloak_rule_id||null};e.cloak_rule_id,Object.assign(d,e),_e.value=(s.image_urls||[]).map((o,h)=>({name:`image_${h}.jpg`,url:o,response:{success:!0,data:{url:o,file_name:`image_${h}.jpg`}}})),T.value.length===0&&!le.value&&xe(),T.value.length,d.cloak_rule_id,T.value,j.value=!0},gl=s=>{De.confirm(`确定要删除商品 "${s.title}" 吗？删除后无法恢复！`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"}).then(async()=>{try{await vt(s.id),p.success("删除成功"),W()}catch{p.error("删除失败")}})},vl=async()=>{R.value&&R.value.validate(async s=>{if(s){L.value=!0;try{d.cloak_rule_id,d.cloak_rule_id,d.id?(d.id,await yt(d.id,d),p.success("更新成功")):(await kt(d),p.success("添加成功")),j.value=!1,W()}catch(e){console.error("提交失败:",e),p.error(d.id?"更新失败":"添加失败")}finally{L.value=!1}}})},yl=s=>{M.size=s,W()},kl=s=>{M.current=s,W()},bl=s=>{const e=s.type.startsWith("image/"),o=s.size/1024/1024<2;return e?o?!0:(p.error("图片大小不能超过 2MB!"),!1):(p.error("只能上传图片文件!"),!1)},hl=(s,e)=>{s&&s.success&&s.data&&s.data.url?(d.image_urls.push(s.data.url),e.fileName=s.data.file_name,p.success("图片上传成功")):p.error("图片上传失败: "+(s.error||"未知错误"))},Vl=s=>{if(s.response&&s.response.url){const e=d.image_urls.indexOf(s.response.url);e>-1&&d.image_urls.splice(e,1)}},wl=()=>{p.error("图片上传失败")},Ul=()=>{ae.value=!ae.value},zl=s=>{d.rich_text_content=s},Sl=()=>{De.confirm("确定要清空商品描述内容吗？","清空确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{d.rich_text_content="",p.success("内容已清空")})},W=async()=>{Z.value=!0;try{const s={page:M.current,size:M.size,title:P.title||void 0,status:P.status||void 0,product_type:P.product_type||void 0},{data:e}=await Xe(s);e.list[0],Q.value=e.list,M.total=e.total}catch{p.error("获取商品列表失败")}finally{Z.value=!1}},Cl=async s=>{ee.value=s,N.value=!0,await Se(s.id)},Se=async s=>{q.value=!0;try{const{data:e}=await wt(s);ce.value=e}catch{p.error("获取SKU列表失败")}finally{q.value=!1}},xl=()=>{if(!E.value.trim()||!g.value.trim()){p.warning("请输入规格名称和值");return}const s=E.value.trim(),e=g.value.trim();if(k.value.find(V=>V.name===s&&V.value===e)){p.warning(`规格 "${s}: ${e}" 已存在，请勿重复添加`);return}const h=k.value.find(V=>V.name===s);if(h){p.warning(`属性 "${s}" 已存在值 "${h.value}"，一个SKU的同一属性只能设置一个值。如需修改，请先删除现有规格。`);return}const c={name:s,value:e};k.value.push(c),E.value="",g.value="",p.success("规格添加成功")},$l=s=>{k.value.splice(s,1),p.success("规格删除成功")},Pl=()=>{var h;ie.value="添加SKU";const s=Date.now(),e=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),o=`SKU${s}${e}`;Object.assign(r,{id:null,product_id:((h=ee.value)==null?void 0:h.id)||"",sku_code:o,sku_name:"",sell_price:0,origin_price:0,cost_price:0,discount_percent:0,stock_quantity:0,warning_stock:10,main_image:"",status:"active",attributes:[]}),k.value=[],E.value="",g.value="",K.value=!0},Ml=s=>{ie.value="编辑SKU";const e={...s,sell_price:parseFloat(s.sell_price)||0,origin_price:parseFloat(s.origin_price)||0,cost_price:parseFloat(s.cost_price)||0,discount_percent:parseFloat(s.discount_percent)||0,stock_quantity:parseInt(s.stock_quantity)||0,warning_stock:parseInt(s.warning_stock)||10};Object.assign(r,e),k.value=s.attributes.map(o=>({name:o.attribute_name||o.display_name||"",value:o.value||o.display_value||"",attribute_id:o.attribute_id||null,attribute_value_id:o.attribute_value_id||null})),K.value=!0},Fl=s=>{De.confirm(`确定要删除SKU "${s.sku_name}" 吗？`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then(async()=>{var e,o,h;try{await St(s.id),p.success("删除成功"),await Se(((e=ee.value)==null?void 0:e.id)||"")}catch(c){console.error("删除SKU失败:",c);let V="删除失败";(h=(o=c.response)==null?void 0:o.data)!=null&&h.message?V=c.response.data.message:c.message&&(V=c.message),p.error(V)}})},Il=()=>{const s=k.value.map(o=>o.name),e=s.filter((o,h)=>s.indexOf(o)!==h);if(e.length>0)throw p.error(`检测到重复的属性名: ${e.join(", ")}，请检查规格设置`),new Error("存在重复的属性名");return k.value.map(o=>o.attribute_id&&o.attribute_value_id?{attribute_id:o.attribute_id,attribute_value_id:o.attribute_value_id}:{attribute_name:o.name,value:o.value})},Dl=async()=>{ne.value&&ne.value.validate(async s=>{var e;if(s){oe.value=!0;try{const o={...r,attributes:Il()};r.id?(await zt(r.id,o),p.success("更新成功")):(await Ut(o),p.success("添加成功")),K.value=!1,await Se(((e=ee.value)==null?void 0:e.id)||"")}catch(o){if(o.message==="存在重复的属性名")return;p.error(r.id?"更新失败":"添加失败")}finally{oe.value=!1}}})},Kl=s=>{s!==F.value&&(r.main_image="")},Tl=s=>{s==="original"?d.b_page_product_id="":s==="fake"&&(d.b_page_product_id||Ce())},Re=()=>{const s=d.sell_price||0,e=d.origin_price||0;if(e>0&&s>0){const o=Math.round((e-s)/e*100);d.discount=Math.max(0,Math.min(100,o))}else(e===0||s===0)&&(d.discount=0)},jl=()=>{const s=d.origin_price||0,e=d.discount||0;s>0&&e>=0&&(d.sell_price=Math.round(s*(1-e/100)*100)/100)},Ae=()=>{const s=r.sell_price||0,e=r.origin_price||0;if(e>0&&s>0){const o=Math.round((e-s)/e*100);r.discount_percent=Math.max(0,Math.min(100,o))}else(e===0||s===0)&&(r.discount_percent=0)},Rl=()=>{const s=r.origin_price||0,e=r.discount_percent||0;s>0&&e>=0&&(r.sell_price=Math.round(s*(1-e/100)*100)/100)},Al=async s=>{if(!s){await Ce();return}ue.value=!0;try{const{data:e}=await Ye(s);me.value=e}catch{p.error("搜索正品商品失败")}finally{ue.value=!1}},Ce=async()=>{ue.value=!0;try{const{data:s}=await Ye();me.value=s}catch{p.error("加载正品商品列表失败")}finally{ue.value=!1}},Ll=s=>{const e=Q.value.find(o=>o.id===s);return e?e.title:"未知商品"},Le=s=>Q.value.filter(e=>e.product_type==="fake"&&e.b_page_product_id===s),El=s=>{const e=Q.value.find(o=>o.id===s);e&&ze(e)},Bl=s=>{S.value=s,J.value="",ve.value="",I.current=1,te.value=!0,ye()},ye=async()=>{ge.value=!0;try{const s={page:I.current,size:I.size,product_type:"fake",title:ve.value||void 0},{data:e}=await Xe(s);fe.value=e.list.filter(o=>!o.b_page_product_id),I.total=e.total}catch{p.error("加载仿品商品列表失败")}finally{ge.value=!1}},Ol=()=>{I.current=1,ye()},Nl=s=>{I.size=s,ye()},ql=s=>{I.current=s,ye()},Jl=async()=>{if(!(!J.value||!S.value))try{await bt(J.value,S.value.id),p.success("仿品关联成功"),te.value=!1,W()}catch{p.error("仿品关联失败")}},Wl=()=>{S.value&&(te.value=!1,O.value="基于正品创建仿品",Object.assign(d,{id:null,spu_id:"",title:`${S.value.title} - 仿品版`,sell_price:Math.round((S.value.sell_price||0)*.6),origin_price:S.value.sell_price||0,discount:40,image_urls:[...S.value.image_urls||[]],rich_text_content:S.value.rich_text_content||"",specification_list:[...S.value.specification_list||[]],variants:[...S.value.variants||[]],status:"draft",product_type:"fake",b_page_product_id:S.value.id,cloak_rule_id:null,country:S.value.country||"JA"}),_e.value=(S.value.image_urls||[]).map((s,e)=>({name:`image_${e}.jpg`,url:s,response:{success:!0,data:{url:s,file_name:`image_${e}.jpg`}}})),Ce(),j.value=!0,p.success(`已基于正品"${S.value.title}"创建仿品，请修改相关信息后保存`))},xe=async()=>{if(!le.value)try{le.value=!0;const s=await ht.getCloakRules({page:1,size:1e3});if(s.code===200){const e=s.data.list,o=e.filter(h=>h.is_active===1);T.value=o,T.value}else console.error("斗篷规则API返回错误:",s)}catch(s){console.error("加载斗篷规则失败:",s),p.error("加载斗篷规则失败")}finally{le.value=!1}},Ee=s=>({cloak:"warning",green:"success",open:"info",audit:"danger"})[s]||"info",Be=s=>({cloak:"斗篷",green:"绿色",open:"全开",audit:"审核"})[s]||s,Gl=s=>{d.cloak_rule_id=s,s&&(T.value.find(o=>o.id===s)||console.warn("未找到对应的斗篷规则，ID:",s))};return ut(()=>{W(),xe()}),(s,e)=>{const o=y("el-icon"),h=y("el-input"),c=y("el-form-item"),V=y("el-option"),X=y("el-select"),b=y("el-tag"),w=y("el-button"),$e=y("el-form"),ke=y("el-card"),G=y("el-avatar"),U=y("el-table-column"),Pe=y("el-tooltip"),Oe=y("el-table"),Ne=y("el-pagination"),B=y("el-input-number"),x=y("el-col"),A=y("el-row"),de=y("el-radio"),qe=y("el-radio-group"),Hl=y("el-upload"),be=y("el-dialog"),Zl=y("el-alert"),Ql=y("el-divider"),Xl=y("el-image"),Yl=y("el-empty"),Me=dt("loading");return u(),_("div",It,[l(ke,{class:"search-card",shadow:"never"},{default:t(()=>[l($e,{model:P,inline:"",class:"search-form"},{default:t(()=>[l(c,{label:"商品标题"},{default:t(()=>[l(h,{modelValue:P.title,"onUpdate:modelValue":e[0]||(e[0]=a=>P.title=a),placeholder:"请输入商品标题",clearable:"",style:{width:"200px"},onKeyup:rt(Ue,["enter"])},{prefix:t(()=>[l(o,null,{default:t(()=>[l(m(Fe))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"状态"},{default:t(()=>[l(X,{modelValue:P.status,"onUpdate:modelValue":e[1]||(e[1]=a=>P.status=a),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:t(()=>[l(V,{label:"上架",value:"active"}),l(V,{label:"下架",value:"inactive"}),l(V,{label:"草稿",value:"draft"})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"商品类型"},{default:t(()=>[l(X,{modelValue:P.product_type,"onUpdate:modelValue":e[2]||(e[2]=a=>P.product_type=a),placeholder:"请选择类型",clearable:"",style:{width:"120px"}},{default:t(()=>[l(V,{label:"全部",value:""},{default:t(()=>[l(b,{type:"info",size:"small"},{default:t(()=>[...e[41]||(e[41]=[n("全部",-1)])]),_:1})]),_:1}),l(V,{label:"正品",value:"original"},{default:t(()=>[l(b,{type:"success",size:"small"},{default:t(()=>[...e[42]||(e[42]=[n("正品",-1)])]),_:1})]),_:1}),l(V,{label:"仿品",value:"fake"},{default:t(()=>[l(b,{type:"warning",size:"small"},{default:t(()=>[...e[43]||(e[43]=[n("仿品",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(c,null,{default:t(()=>[l(w,{type:"primary",onClick:Ue},{default:t(()=>[l(o,null,{default:t(()=>[l(m(Fe))]),_:1}),e[44]||(e[44]=n(" 搜索 ",-1))]),_:1}),l(w,{onClick:_l},{default:t(()=>[l(o,null,{default:t(()=>[l(m(Ge))]),_:1}),e[45]||(e[45]=n(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(ke,{class:"table-card",shadow:"never"},{header:t(()=>[i("div",Dt,[i("div",Kt,[l(w,{type:"primary",onClick:ml},{default:t(()=>[l(o,null,{default:t(()=>[l(m(se))]),_:1}),e[46]||(e[46]=n(" 添加商品 ",-1))]),_:1}),e[47]||(e[47]=i("span",null,"商品列表",-1)),l(b,{type:"info",size:"small"},{default:t(()=>[n(v(M.total)+" 条记录",1)]),_:1})]),i("div",Tt,[l(w,{size:"small",onClick:W},{default:t(()=>[l(o,null,{default:t(()=>[l(m(Ge))]),_:1}),e[48]||(e[48]=n(" 刷新 ",-1))]),_:1})])])]),default:t(()=>[Ie((u(),z(Oe,{data:Q.value,stripe:"",border:"",style:{width:"100%"},"header-cell-style":{background:"#f8f9fa",color:"#606266"}},{default:t(()=>[l(U,{prop:"title",label:"商品标题","min-width":"200","show-overflow-tooltip":""},{default:t(({row:a})=>[i("div",jt,[a.image_urls&&a.image_urls[0]?(u(),z(G,{key:0,size:40,class:"product-avatar"},{default:t(()=>[i("img",{src:a.image_urls[0],alt:a.title,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Rt)]),_:2},1024)):(u(),z(G,{key:1,size:40,class:"product-avatar"},{default:t(()=>[l(o,null,{default:t(()=>[l(m(he))]),_:1})]),_:1})),i("div",At,[i("div",Lt,v(a.title),1),i("div",Et,v(a.sell_price?"¥"+a.sell_price:"暂未定价"),1)])])]),_:1}),l(U,{prop:"sell_price",label:"销售价",width:"90",align:"center"},{default:t(({row:a})=>[a.sell_price?(u(),_("span",Bt," ¥"+v(a.sell_price),1)):(u(),_("span",Ot,"--"))]),_:1}),l(U,{prop:"origin_price",label:"原价",width:"90",align:"center"},{default:t(({row:a})=>[a.origin_price&&a.origin_price>0?(u(),_("span",Nt," ¥"+v(a.origin_price),1)):(u(),_("span",qt,"--"))]),_:1}),l(U,{prop:"discount",label:"折扣",width:"80",align:"center"},{default:t(({row:a})=>[a.discount&&a.discount>0?(u(),z(b,{key:0,type:"success",size:"small"},{default:t(()=>[n(v(a.discount)+"% OFF ",1)]),_:2},1024)):(u(),_("span",Jt,"--"))]),_:1}),l(U,{prop:"product_type",label:"类型",width:"100",align:"center"},{default:t(({row:a})=>[l(b,{type:a.product_type==="original"?"success":"warning",size:"small"},{default:t(()=>[n(v(a.product_type==="original"?"正品":"仿品"),1)]),_:2},1032,["type"])]),_:1}),l(U,{label:"关联关系",width:"150",align:"center"},{default:t(({row:a})=>[a.product_type==="original"?(u(),_("div",Wt,[Le(a.id).length>0?(u(),_("div",Gt,[(u(!0),_(H,null,Y(Le(a.id),C=>(u(),z(Pe,{key:C.id,content:`仿品: ${C.title}`,placement:"top"},{default:t(()=>[l(b,{type:"warning",size:"small",style:{margin:"2px",cursor:"pointer"},onClick:et=>ze(C)},{default:t(()=>[...e[49]||(e[49]=[n(" 仿品 ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["content"]))),128))])):(u(),_("span",Ht,"-"))])):a.b_page_product_id?(u(),_("div",Zt,[l(Pe,{content:`关联正品: ${Ll(a.b_page_product_id)}`,placement:"top"},{default:t(()=>[l(b,{type:"info",size:"small",style:{cursor:"pointer"},onClick:C=>El(a.b_page_product_id)},{default:t(()=>[...e[50]||(e[50]=[n(" 已关联 ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["content"])])):(u(),_("span",Qt,"未关联"))]),_:1}),l(U,{prop:"country",label:"国家",width:"80",align:"center"},{default:t(({row:a})=>[l(b,{type:"primary",size:"small"},{default:t(()=>[n(v(a.country||"JA"),1)]),_:2},1024)]),_:1}),l(U,{prop:"template",label:"展示模板",width:"120",align:"center"},{default:t(({row:a})=>[a.template==="shopline"?(u(),z(b,{key:0,type:"success",size:"small"},{default:t(()=>[...e[51]||(e[51]=[n(" Shopline ",-1)])]),_:1})):(u(),z(b,{key:1,type:"info",size:"small"},{default:t(()=>[...e[52]||(e[52]=[n(" Classic ",-1)])]),_:1}))]),_:1}),l(U,{prop:"cloak_rule_name",label:"斗篷规则",width:"150",align:"center"},{default:t(({row:a})=>[a.cloak_rule_name?(u(),_("div",Xt,[l(Pe,{content:`规则: ${a.cloak_rule_name}`,placement:"top"},{default:t(()=>[l(b,{type:Ee(a.cloak_rule_mode),size:"small"},{default:t(()=>[n(v(a.cloak_rule_name),1)]),_:2},1032,["type"])]),_:2},1032,["content"])])):(u(),_("span",Yt,"未设置"))]),_:1}),l(U,{prop:"status",label:"状态",width:"100",align:"center"},{default:t(({row:a})=>[l(b,{type:dl(a.status),size:"small",effect:"light"},{default:t(()=>[n(v(rl(a.status)),1)]),_:2},1032,["type"])]),_:1}),l(U,{prop:"view_count",label:"浏览量",width:"100",align:"center"},{default:t(({row:a})=>[i("div",ea,[l(o,{class:"count-icon"},{default:t(()=>[l(m(He))]),_:1}),i("span",null,v(a.view_count||0),1)])]),_:1}),l(U,{prop:"sale_count",label:"销量",width:"100",align:"center"},{default:t(({row:a})=>[i("div",la,[l(o,{class:"count-icon"},{default:t(()=>[l(m(pt))]),_:1}),i("span",null,v(a.sale_count||0),1)])]),_:1}),l(U,{prop:"created_at",label:"创建时间",width:"180","show-overflow-tooltip":""},{default:t(({row:a})=>[i("div",ta,[l(o,{class:"time-icon"},{default:t(()=>[l(m(ct))]),_:1}),i("span",null,v(a.created_at),1)])]),_:1}),l(U,{label:"操作",width:"420",fixed:"right",align:"center"},{default:t(({row:a})=>[i("div",aa,[l(w,{size:"small",type:"primary",link:"",onClick:C=>ze(a)},{default:t(()=>[l(o,null,{default:t(()=>[l(m(He))]),_:1}),e[53]||(e[53]=n(" 查看 ",-1))]),_:1},8,["onClick"]),l(w,{size:"small",type:"success",link:"",onClick:C=>Cl(a)},{default:t(()=>[l(o,null,{default:t(()=>[l(m(_t))]),_:1}),e[54]||(e[54]=n(" SKU管理 ",-1))]),_:1},8,["onClick"]),a.product_type==="original"?(u(),z(w,{key:0,size:"small",type:"info",link:"",onClick:C=>Bl(a)},{default:t(()=>[l(o,null,{default:t(()=>[l(m(se))]),_:1}),e[55]||(e[55]=n(" 关联仿品 ",-1))]),_:1},8,["onClick"])):D("",!0),l(w,{size:"small",type:"warning",link:"",onClick:C=>fl(a)},{default:t(()=>[l(o,null,{default:t(()=>[l(m(ll))]),_:1}),e[56]||(e[56]=n(" 编辑 ",-1))]),_:1},8,["onClick"]),l(w,{size:"small",type:"danger",link:"",onClick:C=>gl(a)},{default:t(()=>[l(o,null,{default:t(()=>[l(m(Te))]),_:1}),e[57]||(e[57]=n(" 删除 ",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[Me,Z.value]]),i("div",sa,[l(Ne,{"current-page":M.current,"onUpdate:currentPage":e[3]||(e[3]=a=>M.current=a),"page-size":M.size,"onUpdate:pageSize":e[4]||(e[4]=a=>M.size=a),"page-sizes":[10,20,50,100],total:M.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:yl,onCurrentChange:kl},null,8,["current-page","page-size","total"])])]),_:1}),l(be,{modelValue:j.value,"onUpdate:modelValue":e[17]||(e[17]=a=>j.value=a),title:O.value,fullscreen:!0,"close-on-click-modal":!1,"destroy-on-close":"",class:"product-dialog"},{footer:t(()=>[i("div",ca,[l(w,{onClick:e[16]||(e[16]=a=>j.value=!1)},{default:t(()=>[...e[81]||(e[81]=[n("取消",-1)])]),_:1}),l(w,{type:"primary",onClick:vl,loading:L.value},{default:t(()=>[...e[82]||(e[82]=[n(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:t(()=>[l($e,{model:d,rules:ol,ref_key:"formRef",ref:R,"label-width":"100px",class:"product-form"},{default:t(()=>[l(c,{label:"SPU ID"},{default:t(()=>[l(h,{modelValue:d.spu_id,"onUpdate:modelValue":e[5]||(e[5]=a=>d.spu_id=a),placeholder:"保存后生成",readonly:""},null,8,["modelValue"]),e[58]||(e[58]=i("div",{class:"form-tip"},"SPU ID由后端自动生成，创建商品后自动显示",-1))]),_:1}),l(c,{label:"商品标题",prop:"title"},{default:t(()=>[l(h,{modelValue:d.title,"onUpdate:modelValue":e[6]||(e[6]=a=>d.title=a),placeholder:"请输入商品标题"},null,8,["modelValue"])]),_:1}),l(A,{gutter:20},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(c,{label:"销售价格",prop:"sell_price"},{default:t(()=>[l(B,{modelValue:d.sell_price,"onUpdate:modelValue":e[7]||(e[7]=a=>d.sell_price=a),precision:2,min:0,placeholder:"请输入销售价格",style:{width:"100%"},onChange:Re},{append:t(()=>[...e[59]||(e[59]=[n("元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(x,{span:12},{default:t(()=>[l(c,{label:"原价",prop:"origin_price"},{default:t(()=>[l(B,{modelValue:d.origin_price,"onUpdate:modelValue":e[8]||(e[8]=a=>d.origin_price=a),precision:2,min:0,placeholder:"请输入原价",style:{width:"100%"},onChange:Re},{append:t(()=>[...e[60]||(e[60]=[n("元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A,{gutter:20},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(c,{label:"折扣(%)",prop:"discount"},{default:t(()=>[l(B,{modelValue:d.discount,"onUpdate:modelValue":e[9]||(e[9]=a=>d.discount=a),precision:0,min:0,max:100,placeholder:"自动计算",style:{width:"100%"},onChange:jl},{append:t(()=>[...e[61]||(e[61]=[n("%",-1)])]),_:1},8,["modelValue"]),e[62]||(e[62]=i("div",{class:"form-tip"},"输入销售价和原价后自动计算，或手动输入折扣",-1))]),_:1})]),_:1}),l(x,{span:12},{default:t(()=>[l(c,{label:"状态",prop:"status"},{default:t(()=>[l(X,{modelValue:d.status,"onUpdate:modelValue":e[10]||(e[10]=a=>d.status=a),style:{width:"100%"}},{default:t(()=>[l(V,{label:"上架",value:"active"},{default:t(()=>[l(b,{type:"success",size:"small"},{default:t(()=>[...e[63]||(e[63]=[n("上架",-1)])]),_:1})]),_:1}),l(V,{label:"下架",value:"inactive"},{default:t(()=>[l(b,{type:"danger",size:"small"},{default:t(()=>[...e[64]||(e[64]=[n("下架",-1)])]),_:1})]),_:1}),l(V,{label:"草稿",value:"draft"},{default:t(()=>[l(b,{type:"warning",size:"small"},{default:t(()=>[...e[65]||(e[65]=[n("草稿",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A,{gutter:20},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(c,{label:"商品类型",prop:"product_type"},{default:t(()=>[l(qe,{modelValue:d.product_type,"onUpdate:modelValue":e[11]||(e[11]=a=>d.product_type=a),onChange:Tl},{default:t(()=>[l(de,{value:"original"},{default:t(()=>[l(b,{type:"success",size:"small"},{default:t(()=>[...e[66]||(e[66]=[n("正品",-1)])]),_:1}),e[67]||(e[67]=n(" 正品商品 ",-1))]),_:1}),l(de,{value:"fake"},{default:t(()=>[l(b,{type:"warning",size:"small"},{default:t(()=>[...e[68]||(e[68]=[n("仿品",-1)])]),_:1}),e[69]||(e[69]=n(" 仿品商品 ",-1))]),_:1})]),_:1},8,["modelValue"]),e[70]||(e[70]=i("div",{class:"form-tip"},"正品：用户默认看到的商品；仿品：替代展示的商品",-1))]),_:1})]),_:1}),l(x,{span:12},{default:t(()=>[d.product_type==="fake"?(u(),z(c,{key:0,label:"关联正品",prop:"b_page_product_id"},{default:t(()=>[l(X,{modelValue:d.b_page_product_id,"onUpdate:modelValue":e[12]||(e[12]=a=>d.b_page_product_id=a),placeholder:"请选择对应的正品商品",filterable:"",remote:"","remote-method":Al,loading:ue.value,style:{width:"100%"}},{default:t(()=>[(u(!0),_(H,null,Y(me.value,a=>(u(),z(V,{key:a.id,label:`${a.title} - ¥${a.sell_price}`,value:a.id},{default:t(()=>[i("div",ia,[i("span",null,v(a.title),1),i("span",oa,"¥"+v(a.sell_price),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),e[71]||(e[71]=i("div",{class:"form-tip"},"选择这个仿品对应的正品商品",-1))]),_:1})):D("",!0)]),_:1})]),_:1}),l(A,{gutter:20},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(c,{label:"目标国家",prop:"country"},{default:t(()=>[l(X,{modelValue:d.country,"onUpdate:modelValue":e[13]||(e[13]=a=>d.country=a),placeholder:"请选择目标国家",style:{width:"100%"}},{default:t(()=>[(u(),_(H,null,Y(al,a=>l(V,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e[72]||(e[72]=i("div",{class:"form-tip"},"选择商品投放的目标国家/地区",-1))]),_:1})]),_:1}),l(x,{span:12},{default:t(()=>[l(c,{label:"斗篷规则",prop:"cloak_rule_id"},{default:t(()=>[l(X,{modelValue:d.cloak_rule_id,"onUpdate:modelValue":e[14]||(e[14]=a=>d.cloak_rule_id=a),placeholder:"请选择斗篷规则",clearable:"",filterable:"",style:{width:"100%"},onChange:Gl,loading:le.value},{default:t(()=>[(u(!0),_(H,null,Y(T.value,a=>(u(),z(V,{key:a.id,label:`${a.name} (${Be(a.mode)})`,value:a.id},{default:t(()=>[i("div",na,[i("span",null,v(a.name),1),l(b,{type:Ee(a.mode),size:"small"},{default:t(()=>[n(v(Be(a.mode)),1)]),_:2},1032,["type"])])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),e[73]||(e[73]=i("div",{class:"form-tip"},"选择商品使用的斗篷规则，控制不同用户看到的内容",-1)),i("div",ua,"当前加载了 "+v(T.value.length)+" 个斗篷规则",1)]),_:1})]),_:1})]),_:1}),l(A,{gutter:20},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(c,{label:"展示模板",prop:"template"},{default:t(()=>[l(X,{modelValue:d.template,"onUpdate:modelValue":e[15]||(e[15]=a=>d.template=a),placeholder:"请选择展示模板",style:{width:"100%"}},{default:t(()=>[l(V,{label:"经典模板 (Classic)",value:"classic"},{default:t(()=>[i("div",da,[l(b,{type:"info",size:"small"},{default:t(()=>[...e[74]||(e[74]=[n("Classic",-1)])]),_:1}),e[75]||(e[75]=i("span",null,"经典模板 - 单页表单设计",-1))])]),_:1}),l(V,{label:"现代模板 (Shopline)",value:"shopline"},{default:t(()=>[i("div",ra,[l(b,{type:"success",size:"small"},{default:t(()=>[...e[76]||(e[76]=[n("Shopline",-1)])]),_:1}),e[77]||(e[77]=i("span",null,"现代模板 - 分离式结账设计",-1))])]),_:1})]),_:1},8,["modelValue"]),e[78]||(e[78]=i("div",{class:"form-tip"},[i("strong",null,"Classic:"),n(" 传统单页设计，商品详情和表单在同一页 "),i("br"),i("strong",null,"Shopline:"),n(" 现代化设计，商品展示和结账分离，纯黑白简洁风格 ")],-1))]),_:1})]),_:1})]),_:1}),l(c,{label:"商品图片",prop:"image_urls"},{default:t(()=>[l(Hl,{class:"upload-demo",drag:"",action:je.value,multiple:"","file-list":_e.value,"before-upload":bl,"on-success":hl,"on-remove":Vl,"on-error":wl,"list-type":"picture-card",accept:"image/*"},{default:t(()=>[l(o,{class:"el-icon--upload"},{default:t(()=>[l(m(Ze))]),_:1}),e[79]||(e[79]=i("div",{class:"el-upload__text"},[n("将图片拖到此处，或"),i("em",null,"点击上传")],-1))]),_:1},8,["action","file-list"])]),_:1}),l(c,{label:"商品描述",prop:"rich_text_content"},{default:t(()=>[i("div",{class:Ke(["wang-editor-wrapper",ae.value?"fullscreen":""])},[l(Vt,{value:d.rich_text_content||"",height:sl.value,"editor-config":il.value,"onUpdate:value":zl},null,8,["value","height","editor-config"]),i("div",pa,[l(w,{size:"small",onClick:Ul,title:"调整编辑器大小"},{default:t(()=>[l(o,null,{default:t(()=>[ae.value?(u(),z(m(mt),{key:0})):(u(),z(m(ft),{key:1}))]),_:1}),n(" "+v(ae.value?"恢复":"全屏编辑"),1)]),_:1}),l(w,{size:"small",onClick:Sl,title:"清空内容"},{default:t(()=>[l(o,null,{default:t(()=>[l(m(Te))]),_:1}),e[80]||(e[80]=n(" 清空内容 ",-1))]),_:1})])],2)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(be,{modelValue:N.value,"onUpdate:modelValue":e[18]||(e[18]=a=>N.value=a),title:"SKU管理",width:"1200px","close-on-click-modal":!1,"destroy-on-close":""},{default:t(()=>[i("div",_a,[i("div",ma,[i("div",fa,[e[84]||(e[84]=i("h3",null,"SKU列表",-1)),l(w,{type:"primary",onClick:Pl},{default:t(()=>[l(o,null,{default:t(()=>[l(m(se))]),_:1}),e[83]||(e[83]=n(" 添加SKU ",-1))]),_:1})]),Ie((u(),z(Oe,{data:ce.value,stripe:"",border:"",style:{width:"100%"}},{default:t(()=>[l(U,{label:"图片",width:"80",align:"center"},{default:t(({row:a})=>[a.main_image?(u(),z(G,{key:0,size:50,class:"sku-avatar"},{default:t(()=>[i("img",{src:a.main_image,alt:a.sku_name,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,ga)]),_:2},1024)):(u(),z(G,{key:1,size:50,class:"sku-avatar"},{default:t(()=>[l(o,null,{default:t(()=>[l(m(he))]),_:1})]),_:1}))]),_:1}),l(U,{prop:"sku_code",label:"SKU编码",width:"120"}),l(U,{prop:"sku_name",label:"SKU名称",width:"150"}),l(U,{label:"属性组合","min-width":"200"},{default:t(({row:a})=>[i("div",va,[(u(!0),_(H,null,Y(a.attributes,C=>(u(),z(b,{key:C.attribute_name,size:"small",class:"attr-tag"},{default:t(()=>[n(v(C.display_name)+": "+v(C.display_value),1)]),_:2},1024))),128))])]),_:1}),l(U,{prop:"sell_price",label:"销售价格",width:"100",align:"center"},{default:t(({row:a})=>[i("span",ya,"¥"+v(a.sell_price),1)]),_:1}),l(U,{prop:"discount_percent",label:"折扣",width:"80",align:"center"},{default:t(({row:a})=>[a.discount_percent&&a.discount_percent>0?(u(),z(b,{key:0,type:"success",size:"small"},{default:t(()=>[n(v(a.discount_percent)+"% ",1)]),_:2},1024)):(u(),_("span",ka,"--"))]),_:1}),l(U,{prop:"stock_quantity",label:"库存",width:"80",align:"center"}),l(U,{prop:"status",label:"状态",width:"100",align:"center"},{default:t(({row:a})=>[l(b,{type:pl(a.status),size:"small"},{default:t(()=>[n(v(cl(a.status)),1)]),_:2},1032,["type"])]),_:1}),l(U,{label:"操作",width:"150",align:"center"},{default:t(({row:a})=>[l(w,{size:"small",type:"primary",link:"",onClick:C=>Ml(a)},{default:t(()=>[...e[85]||(e[85]=[n("编辑",-1)])]),_:1},8,["onClick"]),l(w,{size:"small",type:"danger",link:"",onClick:C=>Fl(a)},{default:t(()=>[...e[86]||(e[86]=[n("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Me,q.value]])])])]),_:1},8,["modelValue"]),l(be,{modelValue:K.value,"onUpdate:modelValue":e[34]||(e[34]=a=>K.value=a),title:ie.value,width:"800px","close-on-click-modal":!1,"destroy-on-close":""},{footer:t(()=>[i("div",Fa,[l(w,{onClick:e[33]||(e[33]=a=>K.value=!1)},{default:t(()=>[...e[97]||(e[97]=[n("取消",-1)])]),_:1}),l(w,{type:"primary",onClick:Dl,loading:oe.value},{default:t(()=>[...e[98]||(e[98]=[n("确定",-1)])]),_:1},8,["loading"])])]),default:t(()=>[l($e,{model:r,rules:nl,ref_key:"skuFormRef",ref:ne,"label-width":"100px"},{default:t(()=>[l(A,{gutter:20},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(c,{label:"SKU编码",prop:"sku_code"},{default:t(()=>[l(h,{modelValue:r.sku_code,"onUpdate:modelValue":e[19]||(e[19]=a=>r.sku_code=a),placeholder:"自动生成"},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{span:12},{default:t(()=>[l(c,{label:"SKU名称",prop:"sku_name"},{default:t(()=>[l(h,{modelValue:r.sku_name,"onUpdate:modelValue":e[20]||(e[20]=a=>r.sku_name=a),placeholder:"请输入SKU名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A,{gutter:20},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(c,{label:"销售价格",prop:"sell_price"},{default:t(()=>[l(B,{modelValue:r.sell_price,"onUpdate:modelValue":e[21]||(e[21]=a=>r.sell_price=a),min:0,precision:2,style:{width:"100%"},onChange:Ae},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{span:12},{default:t(()=>[l(c,{label:"原价",prop:"origin_price"},{default:t(()=>[l(B,{modelValue:r.origin_price,"onUpdate:modelValue":e[22]||(e[22]=a=>r.origin_price=a),min:0,precision:2,style:{width:"100%"},onChange:Ae},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A,{gutter:20},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(c,{label:"折扣(%)",prop:"discount_percent"},{default:t(()=>[l(B,{modelValue:r.discount_percent,"onUpdate:modelValue":e[23]||(e[23]=a=>r.discount_percent=a),min:0,max:100,precision:0,style:{width:"100%"},onChange:Rl},{append:t(()=>[...e[87]||(e[87]=[n("%",-1)])]),_:1},8,["modelValue"]),e[88]||(e[88]=i("div",{class:"form-tip"},"输入销售价和原价后自动计算，或手动输入折扣",-1))]),_:1})]),_:1}),l(x,{span:12},{default:t(()=>[l(c,{label:"成本价",prop:"cost_price"},{default:t(()=>[l(B,{modelValue:r.cost_price,"onUpdate:modelValue":e[24]||(e[24]=a=>r.cost_price=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A,{gutter:20},{default:t(()=>[l(x,{span:12},{default:t(()=>[l(c,{label:"库存数量",prop:"stock_quantity"},{default:t(()=>[l(B,{modelValue:r.stock_quantity,"onUpdate:modelValue":e[25]||(e[25]=a=>r.stock_quantity=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(x,{span:12},{default:t(()=>[l(c,{label:"预警库存",prop:"warning_stock"},{default:t(()=>[l(B,{modelValue:r.warning_stock,"onUpdate:modelValue":e[26]||(e[26]=a=>r.warning_stock=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(c,{label:"SKU图片",prop:"main_image"},{default:t(()=>[l(el,{"image-url":r.main_image,"onUpdate:imageUrl":e[27]||(e[27]=a=>r.main_image=a),"file-size":2,"file-type":["image/jpg","image/jpeg","image/png","image/gif","image/webp"],drag:!0,width:"120px",height:"120px"},null,8,["image-url"])]),_:1}),l(c,{label:"SKU规格",prop:"attributes"},{default:t(()=>[i("div",ba,[l(Zl,{title:"规格设置说明",type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"16px"}},{default:t(()=>[...e[89]||(e[89]=[i("div",null,[i("p",null,"• 每个SKU的同一属性只能设置一个值（如：颜色只能是红色或蓝色，不能同时是两种）"),i("p",null,"• 不同的属性值组合应该创建不同的SKU"),i("p",null,"• 示例：颜色=红色，尺寸=L 为一个SKU；颜色=蓝色，尺寸=L 为另一个SKU")],-1)])]),_:1}),i("div",ha,[l(A,{gutter:10},{default:t(()=>[l(x,{span:8},{default:t(()=>[l(h,{modelValue:E.value,"onUpdate:modelValue":e[28]||(e[28]=a=>E.value=a),placeholder:"规格名称，如：颜色",maxlength:20,"show-word-limit":""},null,8,["modelValue"])]),_:1}),l(x,{span:12},{default:t(()=>[l(h,{modelValue:g.value,"onUpdate:modelValue":e[29]||(e[29]=a=>g.value=a),placeholder:"规格值，如：红色",maxlength:50,"show-word-limit":""},null,8,["modelValue"])]),_:1}),l(x,{span:4},{default:t(()=>[l(w,{type:"primary",onClick:xl,disabled:!E.value||!g.value},{default:t(()=>[l(o,null,{default:t(()=>[l(m(se))]),_:1}),e[90]||(e[90]=n(" 添加 ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),k.value.length>0?(u(),_("div",Va,[l(Ql,{"content-position":"left"},{default:t(()=>[...e[91]||(e[91]=[n("已添加的规格",-1)])]),_:1}),i("div",wa,[(u(!0),_(H,null,Y(k.value,(a,C)=>(u(),_("div",{key:C,class:"spec-item"},[i("div",Ua,[i("span",za,v(a.name),1),l(b,{type:"primary",size:"small"},{default:t(()=>[n(v(a.value),1)]),_:2},1024)]),l(w,{size:"small",type:"danger",link:"",onClick:et=>$l(C),icon:"Delete"},{default:t(()=>[...e[92]||(e[92]=[n(" 删除 ",-1)])]),_:1},8,["onClick"])]))),128))])])):D("",!0)])]),_:1}),l(c,{label:"主图设置",prop:"main_image"},{default:t(()=>[i("div",Sa,[i("div",Ca,[l(qe,{modelValue:F.value,"onUpdate:modelValue":e[30]||(e[30]=a=>F.value=a),onChange:Kl},{default:t(()=>[l(de,{value:"url"},{default:t(()=>[l(o,null,{default:t(()=>[l(m(Qe))]),_:1}),e[93]||(e[93]=n(" URL输入 ",-1))]),_:1}),l(de,{value:"upload"},{default:t(()=>[l(o,null,{default:t(()=>[l(m(Ze))]),_:1}),e[94]||(e[94]=n(" 文件上传 ",-1))]),_:1})]),_:1},8,["modelValue"])]),F.value==="url"?(u(),_("div",xa,[l(h,{modelValue:r.main_image,"onUpdate:modelValue":e[31]||(e[31]=a=>r.main_image=a),placeholder:"请输入图片URL地址",clearable:""},{prepend:t(()=>[l(o,null,{default:t(()=>[l(m(Qe))]),_:1})]),_:1},8,["modelValue"]),r.main_image?(u(),_("div",$a,[l(Xl,{src:r.main_image,fit:"cover",style:{width:"80px",height:"80px","border-radius":"4px"},"preview-src-list":[r.main_image],"preview-teleported":""},{error:t(()=>[i("div",Pa,[l(o,null,{default:t(()=>[l(m(gt))]),_:1}),e[95]||(e[95]=i("span",null,"加载失败",-1))])]),_:1},8,["src","preview-src-list"])])):D("",!0)])):D("",!0),F.value==="upload"?(u(),_("div",Ma,[l(el,{"image-url":r.main_image,"onUpdate:imageUrl":e[32]||(e[32]=a=>r.main_image=a),height:"120px",width:"120px","file-size":2,"file-type":["image/jpeg","image/png","image/gif","image/webp"]},{tip:t(()=>[...e[96]||(e[96]=[i("div",{class:"upload-tip"},"支持 JPG、PNG、GIF、WebP 格式，文件大小不超过 2MB",-1)])]),_:1},8,["image-url"])])):D("",!0)])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(be,{modelValue:te.value,"onUpdate:modelValue":e[40]||(e[40]=a=>te.value=a),title:"选择关联仿品",width:"1000px","close-on-click-modal":!1,"destroy-on-close":""},{footer:t(()=>[i("div",Za,[l(w,{onClick:e[39]||(e[39]=a=>te.value=!1)},{default:t(()=>[...e[104]||(e[104]=[n("取消",-1)])]),_:1}),l(w,{type:"primary",onClick:Jl,disabled:!J.value},{default:t(()=>[...e[105]||(e[105]=[n(" 确定关联 ",-1)])]),_:1},8,["disabled"])])]),default:t(()=>[i("div",Ia,[l(ke,{class:"current-product-card",shadow:"never"},{header:t(()=>[...e[99]||(e[99]=[i("span",{style:{"font-weight":"600",color:"#409eff"}},"当前正品商品",-1)])]),default:t(()=>[S.value?(u(),_("div",Da,[S.value.image_urls&&S.value.image_urls[0]?(u(),z(G,{key:0,size:60},{default:t(()=>[i("img",{src:S.value.image_urls[0],alt:S.value.title,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Ka)]),_:1})):(u(),z(G,{key:1,size:60},{default:t(()=>[l(o,null,{default:t(()=>[l(m(he))]),_:1})]),_:1})),i("div",Ta,[i("div",ja,v(S.value.title),1),i("div",Ra,"¥"+v(S.value.sell_price),1),l(b,{type:"success",size:"small"},{default:t(()=>[...e[100]||(e[100]=[n("正品",-1)])]),_:1})])])):D("",!0)]),_:1}),l(ke,{class:"fake-selection-card",shadow:"never"},{header:t(()=>[i("div",Aa,[e[102]||(e[102]=i("span",{style:{"font-weight":"600"}},"选择要关联的仿品",-1)),l(w,{type:"primary",size:"small",onClick:Wl},{default:t(()=>[l(o,null,{default:t(()=>[l(m(se))]),_:1}),e[101]||(e[101]=n(" 创建新仿品 ",-1))]),_:1})])]),default:t(()=>[i("div",La,[l(h,{modelValue:ve.value,"onUpdate:modelValue":e[35]||(e[35]=a=>ve.value=a),placeholder:"搜索仿品商品...",clearable:"",onInput:Ol,style:{width:"300px"}},{prefix:t(()=>[l(o,null,{default:t(()=>[l(m(Fe))]),_:1})]),_:1},8,["modelValue"])]),Ie((u(),_("div",Ea,[(u(!0),_(H,null,Y(fe.value,a=>(u(),_("div",{key:a.id,class:Ke(["fake-product-card",{active:J.value===a.id}]),onClick:C=>J.value=a.id},[a.image_urls&&a.image_urls[0]?(u(),z(G,{key:0,size:28},{default:t(()=>[i("img",{src:a.image_urls[0],alt:a.title,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Oa)]),_:2},1024)):(u(),z(G,{key:1,size:28},{default:t(()=>[l(o,null,{default:t(()=>[l(m(he))]),_:1})]),_:1})),i("div",Na,[i("div",qa,v(a.title),1),i("div",Ja,"¥"+v(a.sell_price),1),l(b,{type:"warning",size:"small",style:{padding:"1px 4px","font-size":"10px"}},{default:t(()=>[...e[103]||(e[103]=[n("仿品",-1)])]),_:1})]),i("div",Wa,[l(de,{value:a.id,modelValue:J.value,"onUpdate:modelValue":e[36]||(e[36]=C=>J.value=C)},null,8,["value","modelValue"])])],10,Ba))),128)),!ge.value&&fe.value.length===0?(u(),_("div",Ga,[l(Yl,{description:"暂无可关联的仿品商品"})])):D("",!0)])),[[Me,ge.value]]),fe.value.length>0?(u(),_("div",Ha,[l(Ne,{"current-page":I.current,"onUpdate:currentPage":e[37]||(e[37]=a=>I.current=a),"page-size":I.size,"onUpdate:pageSize":e[38]||(e[38]=a=>I.size=a),"page-sizes":[12,24,48],total:I.total,layout:"total, sizes, prev, pager, next",onSizeChange:Nl,onCurrentChange:ql,small:""},null,8,["current-page","page-size","total"])])):D("",!0)]),_:1})])]),_:1},8,["modelValue"])])}}}),is=tl(Xa,[["__scopeId","data-v-64a6adab"]]);export{is as default};
