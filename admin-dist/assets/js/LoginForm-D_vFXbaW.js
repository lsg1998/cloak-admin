import{d as N,X as U,h as f,P as g,Z as B,a2 as C,c as L,F as T,b as o,a as A,r as n,w as s,u as v,J as M,aK as z,aL as E,aM as K,B as q,O as H,a6 as O,o as $,e as w}from"./index-tWB8d80m.js";import{u as D,a as I}from"./tabs-L5OoSjgK.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"login-btn"},X=N({__name:"LoginForm",setup(Z){const y=q(),b=U(),k=D(),F=I(),l=f(),V=g({username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"}]}),u=f(!1),a=g({username:"",password:""}),d=t=>{t&&t.validate(async e=>{if(e){u.value=!0;try{const{data:i}=await E(a);b.setToken(i.access_token),await K(),k.setTabs([]),F.setKeepAliveName([]),y.push(H),O({title:"React ä»˜è´¹ç‰ˆæœ¬ ğŸ”¥ğŸ”¥ğŸ”¥",dangerouslyUseHTMLString:!0,message:"é¢„è§ˆåœ°å€ï¼š<a href='https://pro.spicyboy.cn'>https://pro.spicyboy.cn</a>",type:"success",duration:8e3})}finally{u.value=!1}}})},x=t=>{t&&t.resetFields()};return B(()=>{document.onkeydown=t=>{if(t.code==="Enter"||t.code==="enter"||t.code==="NumpadEnter"){if(u.value)return;d(l.value)}}}),C(()=>{document.onkeydown=null}),(t,e)=>{const i=n("user"),p=n("el-icon"),c=n("el-input"),m=n("el-form-item"),R=n("lock"),S=n("el-form"),_=n("el-button");return $(),L(T,null,[o(S,{ref_key:"loginFormRef",ref:l,model:a,rules:V,size:"large"},{default:s(()=>[o(m,{prop:"username"},{default:s(()=>[o(c,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=r=>a.username=r),placeholder:"ç”¨æˆ·åï¼šadmin / user"},{prefix:s(()=>[o(p,{class:"el-input__icon"},{default:s(()=>[o(i)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(m,{prop:"password"},{default:s(()=>[o(c,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=r=>a.password=r),type:"password",placeholder:"å¯†ç ï¼š123456","show-password":"",autocomplete:"new-password"},{prefix:s(()=>[o(p,{class:"el-input__icon"},{default:s(()=>[o(R)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),A("div",P,[o(_,{icon:v(M),round:"",size:"large",onClick:e[2]||(e[2]=r=>x(l.value))},{default:s(()=>[...e[4]||(e[4]=[w(" é‡ç½® ",-1)])]),_:1},8,["icon"]),o(_,{icon:v(z),round:"",size:"large",type:"primary",loading:u.value,onClick:e[3]||(e[3]=r=>d(l.value))},{default:s(()=>[...e[5]||(e[5]=[w(" ç™»å½• ",-1)])]),_:1},8,["icon","loading"])])],64)}}}),W=J(X,[["__scopeId","data-v-b65a6646"]]);export{W as default};
