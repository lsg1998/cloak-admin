import{d as ge,h as g,P as q,s as ee,Z as He,r as _,Q as We,c as y,o as d,a as c,b as l,w as t,g as f,R as A,e as r,t as C,F as E,f as J,u as v,as as Ze,U as pe,$ as fe,a_ as Ke,b1 as Qe,aH as Xe,E as me,q as Ye,aQ as ve,x as be,W as el,b2 as ll,b3 as tl,b0 as ol,N as k,a0 as al,M as nl}from"./index-Bo6A_Mt9.js";import{g as il,u as T}from"./pixel-R7Xmabeq.js";import{g as ke}from"./product-wRYQQ9wn.js";import{_ as sl}from"./_plugin-vue_export-helper-DlAUqK2U.js";const dl={class:"pixel-config"},rl={class:"card-header"},ul={key:0,style:{display:"flex","flex-wrap":"wrap",gap:"4px"}},cl={class:"card-header"},_l={class:"card-header"},pl={class:"card-header"},fl={class:"action-bar"},ml={key:0,style:{"margin-top":"8px"}},vl={style:{"margin-bottom":"12px",display:"flex","justify-content":"space-between","align-items":"center"}},bl={style:{color:"#606266","font-size":"14px"}},kl={key:0,style:{color:"#909399"}},gl=["src"],yl={key:1},xl={key:0},Vl={key:1},wl={style:{"text-align":"left","margin-bottom":"12px"}},Cl=ge({name:"PixelConfig"}),hl=ge({...Cl,setup(Sl){const H=g(!1),z=g(!1),W=g("添加 Google Ads 账户"),Z=g(),I=g(-1),le=g(!1),te=g([]),R=g(!1),K=g(!1),D=g([]),N=g(""),U=g(),x=q({title:"",country:""}),V=q({current:1,size:10,total:0}),b=g([]),oe=ee(()=>{const a=[...b.value];return a.reverse(),a.slice(0,50)}),s=q({name:"",conversion_id:"",conversion_label:"",enabled:!0,product_ids:[],em_params:[]}),ae=g([]),ye={conversion_id:[{required:!0,message:"请输入转化ID",trigger:"blur"},{pattern:/^\d+$/,message:"转化ID只能包含数字",trigger:"blur"}],conversion_label:[{required:!0,message:"请输入转化标签",trigger:"blur"}]},n=q({facebook_enabled:0,facebook_pixel_id:"",tiktok_enabled:0,tiktok_pixel_id:""}),w=g([]),xe=[{code:"SK",name:"斯洛伐克"},{code:"CZ",name:"捷克"},{code:"PL",name:"波兰"},{code:"HU",name:"匈牙利"},{code:"DE",name:"德国"},{code:"AT",name:"奥地利"},{code:"RO",name:"罗马尼亚"},{code:"JP",name:"日本"}],Ve={SK:"斯洛伐克",CZ:"捷克",PL:"波兰",HU:"匈牙利",DE:"德国",AT:"奥地利",RO:"罗马尼亚",JP:"日本"},we=ee(()=>{const a={};return D.value.forEach(e=>{if(e.country){const i=e.country.toUpperCase();a[i]=(a[i]||0)+1}}),a}),Q=ee(()=>{const a=we.value,e=[],i=[];return xe.forEach(u=>{const p=a[u.code]||0;p>0?e.push({...u,count:p}):i.push(u)}),e.sort((u,p)=>p.count-u.count),{withProducts:e,withoutProducts:i}}),X=async()=>{try{const{data:a}=await il();if(a){if(a.google_ads_accounts)try{b.value=typeof a.google_ads_accounts=="string"?JSON.parse(a.google_ads_accounts):a.google_ads_accounts;const e=new Set;b.value.forEach(i=>{i.em_params&&Array.isArray(i.em_params)&&i.em_params.forEach(u=>e.add(u))}),ae.value=Array.from(e)}catch{b.value=[]}if(n.facebook_enabled=a.facebook_enabled||!1,n.facebook_pixel_id=a.facebook_pixel_id||"",n.tiktok_enabled=a.tiktok_enabled||!1,n.tiktok_pixel_id=a.tiktok_pixel_id||"",a.custom_pixels)try{w.value=typeof a.custom_pixels=="string"?JSON.parse(a.custom_pixels):a.custom_pixels}catch{w.value=[]}}else n.facebook_enabled=!1,n.facebook_pixel_id="",n.tiktok_enabled=!1,n.tiktok_pixel_id="",w.value=[],b.value=[]}catch(a){k.error("加载配置失败"),console.error(a)}},Ce=()=>{W.value="添加 Google Ads 账户",I.value=-1,Object.assign(s,{name:"",conversion_id:"",conversion_label:"",enabled:!0,product_ids:[],em_params:[]}),N.value="",z.value=!0},he=a=>{W.value="编辑 Google Ads 账户";const e=b.value.findIndex(i=>i.conversion_id===a.conversion_id&&i.conversion_label===a.conversion_label);I.value=e,Object.assign(s,{...a,product_ids:a.product_ids||[],em_params:a.em_params||[]}),L(),z.value=!0},Se=async()=>{if(Z.value)try{await Z.value.validate();const a={name:s.name,conversion_id:s.conversion_id,conversion_label:s.conversion_label,enabled:s.enabled,product_ids:s.product_ids||[],em_params:s.em_params||[]};I.value>=0?b.value[I.value]=a:b.value.push(a),await T({google_ads_accounts:JSON.stringify(b.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),z.value=!1,k.success(I.value>=0?"账户更新成功":"账户添加成功")}catch(a){console.error(a),k.error("保存失败，请重试")}},Pe=async a=>{try{await al.confirm("确定要删除这个 Google Ads 账户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=b.value.findIndex(i=>i.conversion_id===a.conversion_id&&i.conversion_label===a.conversion_label);if(e===-1){k.error("找不到要删除的账户");return}b.value.splice(e,1),await T({google_ads_accounts:JSON.stringify(b.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),k.success("删除成功")}catch(e){e!=="cancel"&&(console.error(e),k.error("删除失败，请重试"))}},Ue=async()=>{try{await T({google_ads_accounts:JSON.stringify(b.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),k.success("状态已更新")}catch(a){console.error(a),k.error("状态更新失败，请重试")}},Ae=async()=>{w.value.push({name:"",code:"",enabled:!0});try{await T({google_ads_accounts:JSON.stringify(b.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),k.success("自定义像素已添加")}catch(a){console.error(a),k.error("添加失败，请重试")}},ze=async a=>{w.value.splice(a,1);try{await T({google_ads_accounts:JSON.stringify(b.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),k.success("自定义像素已删除")}catch(e){console.error(e),k.error("删除失败，请重试")}},De=async()=>{H.value=!0;try{await T({google_ads_accounts:JSON.stringify(b.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),k.success("配置保存成功，所有商品页面已生效"),await X()}catch(a){k.error("保存配置失败"),console.error(a)}finally{H.value=!1}},Ne=()=>{X(),k.info("已重置为当前保存的配置")},Oe=async()=>{le.value=!0;try{const{data:a}=await ke({page:1,size:1e3,product_type:"original"});te.value=a.list.map(e=>({id:e.id,title:e.title,country:e.country}))}catch(a){console.error("加载商品列表失败",a)}finally{le.value=!1}},Ee=()=>{x.title="",x.country="",V.current=1,V.size=10,R.value=!0,G()},G=async()=>{K.value=!0;try{const{data:a}=await ke({page:V.current,size:V.size,title:x.title||void 0,country:x.country||void 0,product_type:"original"});D.value=a.list,V.total=a.total,await nl(),U.value&&s.product_ids.length>0&&D.value.forEach(e=>{s.product_ids.includes(e.id)&&U.value.toggleRowSelection(e,!0)})}catch(a){console.error("加载商品列表失败:",a),k.error("加载商品列表失败")}finally{K.value=!1}};let Y=null;const Je=()=>{Y&&clearTimeout(Y),Y=window.setTimeout(()=>{ne()},500)},ne=()=>{V.current=1,G()},ie=()=>{x.title="",x.country="",V.current=1,G()},Te=a=>{const e=D.value.map(u=>u.id),i=s.product_ids.filter(u=>!e.includes(u));s.product_ids=[...i,...a.map(u=>u.id)],L()},Ie=()=>{R.value=!1,L()},L=()=>{s.product_ids.length===0?N.value="":N.value=`已选择 ${s.product_ids.length} 个商品`},Re=a=>{const e=te.value.find(i=>i.id===a);return e?e.title:a},Ge=a=>{s.product_ids=s.product_ids.filter(e=>e!==a),L()},Le=()=>{s.product_ids=[],N.value=""},$e=()=>{U.value&&D.value.forEach(a=>{U.value.toggleRowSelection(a,!0)})},Be=()=>{s.product_ids=[],U.value&&U.value.clearSelection(),L()};return He(()=>{X(),Oe()}),(a,e)=>{const i=_("el-icon"),u=_("el-button"),p=_("el-table-column"),P=_("el-tag"),F=_("el-text"),$=_("el-switch"),se=_("el-table"),de=_("el-empty"),j=_("el-card"),m=_("el-form-item"),S=_("el-input"),B=_("el-form"),re=_("el-col"),Fe=_("el-row"),M=_("el-option"),ue=_("el-select"),ce=_("el-dialog"),je=_("el-alert"),_e=_("el-avatar"),Me=_("el-pagination"),qe=We("loading");return d(),y("div",dl,[e[46]||(e[46]=c("div",{class:"page-header"},[c("h2",null,"全局像素配置"),c("p",null,"配置网站的像素跟踪代码，支持多个 Google Ads 账户，可为每个账户指定商品范围")],-1)),l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",rl,[e[19]||(e[19]=c("span",{class:"card-title"},"Google Ads 账户管理",-1)),l(u,{type:"primary",onClick:Ce},{default:t(()=>[l(i,null,{default:t(()=>[l(v(fe))]),_:1}),e[18]||(e[18]=r(" 添加账户 ",-1))]),_:1})])]),default:t(()=>[l(se,{data:oe.value,stripe:"",border:"",style:{width:"100%"}},{default:t(()=>[l(p,{type:"index",label:"序号",width:"60",align:"center"}),l(p,{prop:"name",label:"账户名称","min-width":"150"},{default:t(({row:o})=>[l(P,null,{default:t(()=>[r(C(o.name),1)]),_:2},1024)]),_:1}),l(p,{prop:"conversion_id",label:"转化ID","min-width":"150"},{default:t(({row:o})=>[l(F,{type:"primary"},{default:t(()=>[r("AW-"+C(o.conversion_id),1)]),_:2},1024)]),_:1}),l(p,{prop:"conversion_label",label:"转化标签","min-width":"180"},{default:t(({row:o})=>[l(F,{type:"info"},{default:t(()=>[r(C(o.conversion_label),1)]),_:2},1024)]),_:1}),l(p,{prop:"product_ids",label:"应用商品","min-width":"150"},{default:t(({row:o})=>[!o.product_ids||o.product_ids.length===0?(d(),f(P,{key:0,type:"success"},{default:t(()=>[...e[20]||(e[20]=[r("全部商品",-1)])]),_:1})):(d(),f(P,{key:1,type:"warning"},{default:t(()=>[r("指定 "+C(o.product_ids.length)+" 个商品",1)]),_:2},1024))]),_:1}),l(p,{prop:"em_params",label:"em参数","min-width":"180"},{default:t(({row:o})=>[o.em_params&&o.em_params.length>0?(d(),y("div",ul,[(d(!0),y(E,null,J(o.em_params,h=>(d(),f(P,{key:h,type:"primary",size:"small"},{default:t(()=>[r(C(h),1)]),_:2},1024))),128))])):(d(),f(P,{key:1,type:"info",size:"small"},{default:t(()=>[...e[21]||(e[21]=[r("全部加载",-1)])]),_:1}))]),_:1}),l(p,{prop:"enabled",label:"状态",width:"100",align:"center"},{default:t(({row:o})=>[l($,{modelValue:o.enabled,"onUpdate:modelValue":h=>o.enabled=h,onChange:Ue},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"操作",width:"180",align:"center",fixed:"right"},{default:t(({row:o})=>[l(u,{type:"primary",size:"small",link:"",onClick:h=>he(o)},{default:t(()=>[l(i,null,{default:t(()=>[l(v(Ze))]),_:1}),e[22]||(e[22]=r(" 编辑 ",-1))]),_:1},8,["onClick"]),l(u,{type:"danger",size:"small",link:"",onClick:h=>Pe(o)},{default:t(()=>[l(i,null,{default:t(()=>[l(v(pe))]),_:1}),e[23]||(e[23]=r(" 删除 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),oe.value.length===0?(d(),f(de,{key:0,description:"暂无 Google Ads 账户，点击右上角添加"})):A("",!0)]),_:1}),l(Fe,{gutter:20},{default:t(()=>[l(re,{span:12},{default:t(()=>[l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",cl,[l(i,{class:"platform-icon facebook"},{default:t(()=>[l(v(Ke))]),_:1}),e[24]||(e[24]=c("span",{class:"card-title"},"Facebook 像素",-1))])]),default:t(()=>[l(B,{"label-width":"100px"},{default:t(()=>[l(m,{label:"启用"},{default:t(()=>[l($,{modelValue:n.facebook_enabled,"onUpdate:modelValue":e[0]||(e[0]=o=>n.facebook_enabled=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),n.facebook_enabled?(d(),f(m,{key:0,label:"像素ID"},{default:t(()=>[l(S,{modelValue:n.facebook_pixel_id,"onUpdate:modelValue":e[1]||(e[1]=o=>n.facebook_pixel_id=o),placeholder:"例如: 123456789012345"},null,8,["modelValue"])]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1}),l(re,{span:12},{default:t(()=>[l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",_l,[l(i,{class:"platform-icon tiktok"},{default:t(()=>[l(v(Qe))]),_:1}),e[25]||(e[25]=c("span",{class:"card-title"},"TikTok 像素",-1))])]),default:t(()=>[l(B,{"label-width":"100px"},{default:t(()=>[l(m,{label:"启用"},{default:t(()=>[l($,{modelValue:n.tiktok_enabled,"onUpdate:modelValue":e[2]||(e[2]=o=>n.tiktok_enabled=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),n.tiktok_enabled?(d(),f(m,{key:0,label:"像素ID"},{default:t(()=>[l(S,{modelValue:n.tiktok_pixel_id,"onUpdate:modelValue":e[3]||(e[3]=o=>n.tiktok_pixel_id=o),placeholder:"例如: C1234567890ABCDEF"},null,8,["modelValue"])]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",pl,[e[27]||(e[27]=c("span",{class:"card-title"},"自定义像素",-1)),l(u,{type:"primary",onClick:Ae},{default:t(()=>[l(i,null,{default:t(()=>[l(v(fe))]),_:1}),e[26]||(e[26]=r(" 添加自定义像素 ",-1))]),_:1})])]),default:t(()=>[(d(!0),y(E,null,J(w.value,(o,h)=>(d(),y("div",{key:h,class:"custom-pixel-item"},[l(B,{"label-width":"100px"},{default:t(()=>[l(m,{label:"像素名称"},{default:t(()=>[l(S,{modelValue:o.name,"onUpdate:modelValue":O=>o.name=O,placeholder:"例如: 第三方统计代码"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(m,{label:"启用状态"},{default:t(()=>[l($,{modelValue:o.enabled,"onUpdate:modelValue":O=>o.enabled=O},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(m,{label:"像素代码"},{default:t(()=>[l(S,{modelValue:o.code,"onUpdate:modelValue":O=>o.code=O,type:"textarea",rows:4,placeholder:"粘贴像素代码..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(m,null,{default:t(()=>[l(u,{type:"danger",onClick:O=>ze(h)},{default:t(()=>[l(i,null,{default:t(()=>[l(v(pe))]),_:1}),e[28]||(e[28]=r(" 删除 ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),w.value.length===0?(d(),f(de,{key:0,description:"暂无自定义像素"})):A("",!0)]),_:1}),c("div",fl,[l(u,{type:"primary",size:"large",onClick:De,loading:H.value},{default:t(()=>[l(i,null,{default:t(()=>[l(v(Xe))]),_:1}),e[29]||(e[29]=r(" 保存所有配置 ",-1))]),_:1},8,["loading"]),l(u,{size:"large",onClick:Ne},{default:t(()=>[l(i,null,{default:t(()=>[l(v(me))]),_:1}),e[30]||(e[30]=r(" 重置 ",-1))]),_:1})]),l(ce,{modelValue:z.value,"onUpdate:modelValue":e[11]||(e[11]=o=>z.value=o),title:W.value,width:"700px"},{footer:t(()=>[l(u,{onClick:e[10]||(e[10]=o=>z.value=!1)},{default:t(()=>[...e[36]||(e[36]=[r("取消",-1)])]),_:1}),l(u,{type:"primary",onClick:Se},{default:t(()=>[...e[37]||(e[37]=[r("确定",-1)])]),_:1})]),default:t(()=>[l(B,{ref_key:"accountFormRef",ref:Z,model:s,rules:ye,"label-width":"120px"},{default:t(()=>[l(m,{label:"账户名称",prop:"name"},{default:t(()=>[l(S,{modelValue:s.name,"onUpdate:modelValue":e[4]||(e[4]=o=>s.name=o),placeholder:"例如: 主投账户"},null,8,["modelValue"])]),_:1}),l(m,{label:"转化ID",prop:"conversion_id"},{default:t(()=>[l(S,{modelValue:s.conversion_id,"onUpdate:modelValue":e[5]||(e[5]=o=>s.conversion_id=o),placeholder:"例如: 17612844136"},{prepend:t(()=>[...e[31]||(e[31]=[r("AW-",-1)])]),_:1},8,["modelValue"]),e[32]||(e[32]=c("div",{class:"form-tip"},"在 Google Ads 后台创建转化操作后获取",-1))]),_:1}),l(m,{label:"转化标签",prop:"conversion_label"},{default:t(()=>[l(S,{modelValue:s.conversion_label,"onUpdate:modelValue":e[6]||(e[6]=o=>s.conversion_label=o),placeholder:"例如: REXpCP2e1aUbEOjYus5B"},null,8,["modelValue"]),e[33]||(e[33]=c("div",{class:"form-tip"},"转化操作对应的标签代码",-1))]),_:1}),l(m,{label:"应用商品"},{default:t(()=>[l(S,{modelValue:N.value,"onUpdate:modelValue":e[7]||(e[7]=o=>N.value=o),placeholder:"点击选择商品（不选择则应用到全部商品）",readonly:"",style:{width:"100%",cursor:"pointer"},onClick:Ee},{suffix:t(()=>[s.product_ids.length>0?(d(),f(i,{key:0,onClick:Ye(Le,["stop"]),style:{cursor:"pointer"}},{default:t(()=>[l(v(ve))]),_:1})):(d(),f(i,{key:1},{default:t(()=>[l(v(be))]),_:1}))]),_:1},8,["modelValue"]),s.product_ids.length>0?(d(),y("div",ml,[(d(!0),y(E,null,J(s.product_ids,o=>(d(),f(P,{key:o,closable:"",onClose:h=>Ge(o),style:{"margin-right":"8px","margin-bottom":"8px"}},{default:t(()=>[r(C(Re(o)),1)]),_:2},1032,["onClose"]))),128))])):A("",!0),e[34]||(e[34]=c("div",{class:"form-tip"},"不选择任何商品时，此像素将应用到全部商品页面",-1))]),_:1}),l(m,{label:"em参数绑定"},{default:t(()=>[l(ue,{modelValue:s.em_params,"onUpdate:modelValue":e[8]||(e[8]=o=>s.em_params=o),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入em参数值（可多个）",style:{width:"100%"}},{default:t(()=>[(d(!0),y(E,null,J(ae.value,o=>(d(),f(M,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[35]||(e[35]=c("div",{class:"form-tip"},[r(" 绑定em参数后，只有URL包含对应em参数时才会加载此像素"),c("br"),r(' 例如：绑定"account1"，则访问 ?em=account1 时加载此像素'),c("br"),r(" 不绑定则加载到所有页面（兼容旧逻辑） ")],-1))]),_:1}),l(m,{label:"启用状态"},{default:t(()=>[l($,{modelValue:s.enabled,"onUpdate:modelValue":e[9]||(e[9]=o=>s.enabled=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(ce,{modelValue:R.value,"onUpdate:modelValue":e[17]||(e[17]=o=>R.value=o),title:"选择商品",width:"900px","close-on-click-modal":!1},{footer:t(()=>[c("div",wl,[l(F,null,{default:t(()=>[r("已选择 "+C(s.product_ids.length)+" 个商品",1)]),_:1})]),l(u,{onClick:e[16]||(e[16]=o=>R.value=!1)},{default:t(()=>[...e[44]||(e[44]=[r("取消",-1)])]),_:1}),l(u,{type:"primary",onClick:Ie},{default:t(()=>[...e[45]||(e[45]=[r("确定",-1)])]),_:1})]),default:t(()=>[l(je,{title:"快速搜索",type:"info",closable:!1,style:{"margin-bottom":"16px"},description:"输入商品标题即可快速搜索，支持按国家筛选"}),l(B,{model:x,inline:"",style:{"margin-bottom":"16px"}},{default:t(()=>[l(m,{label:"快速搜索"},{default:t(()=>[l(S,{modelValue:x.title,"onUpdate:modelValue":e[12]||(e[12]=o=>x.title=o),placeholder:"输入商品标题搜索",clearable:"",style:{width:"250px"},onInput:Je,onClear:ie},{prefix:t(()=>[l(i,null,{default:t(()=>[l(v(be))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"国家筛选"},{default:t(()=>[l(ue,{modelValue:x.country,"onUpdate:modelValue":e[13]||(e[13]=o=>x.country=o),placeholder:"全部国家",clearable:"",style:{width:"180px"},onChange:ne},{default:t(()=>[(d(!0),y(E,null,J(Q.value.withProducts,o=>(d(),f(M,{key:o.code,label:`${o.name} (${o.count}条)`,value:o.code},null,8,["label","value"]))),128)),Q.value.withProducts.length>0?(d(),f(M,{key:0,disabled:"",value:""},{default:t(()=>[...e[38]||(e[38]=[c("span",{style:{color:"#dcdfe6"}},"──────────",-1)])]),_:1})):A("",!0),(d(!0),y(E,null,J(Q.value.withoutProducts,o=>(d(),f(M,{key:o.code,label:o.name,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,null,{default:t(()=>[l(u,{onClick:ie},{default:t(()=>[l(i,null,{default:t(()=>[l(v(me))]),_:1}),e[39]||(e[39]=r(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"]),c("div",vl,[c("div",bl,[l(i,null,{default:t(()=>[l(v(ll))]),_:1}),e[40]||(e[40]=r(" 共找到 ",-1)),l(F,{type:"primary",style:{"font-weight":"600"}},{default:t(()=>[r(C(V.total),1)]),_:1}),e[41]||(e[41]=r(" 个商品 ",-1)),x.title||x.country?(d(),y("span",kl," （已筛选） ")):A("",!0)]),c("div",null,[l(u,{size:"small",onClick:$e},{default:t(()=>[l(i,null,{default:t(()=>[l(v(tl))]),_:1}),e[42]||(e[42]=r(" 全选当前页 ",-1))]),_:1}),l(u,{size:"small",onClick:Be},{default:t(()=>[l(i,null,{default:t(()=>[l(v(ve))]),_:1}),e[43]||(e[43]=r(" 清空选择 ",-1))]),_:1})])]),el((d(),f(se,{data:D.value,"max-height":"400px",onSelectionChange:Te,"row-key":o=>o.id,ref_key:"productTableRef",ref:U},{default:t(()=>[l(p,{type:"selection",width:"55","reserve-selection":!0}),l(p,{label:"商品图片",width:"80"},{default:t(({row:o})=>[o.image_urls&&o.image_urls[0]?(d(),f(_e,{key:0,size:50},{default:t(()=>[c("img",{src:o.image_urls[0],style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,gl)]),_:2},1024)):(d(),f(_e,{key:1,size:50},{default:t(()=>[l(i,null,{default:t(()=>[l(v(ol))]),_:1})]),_:1}))]),_:1}),l(p,{prop:"title",label:"商品标题","show-overflow-tooltip":"","min-width":"200"}),l(p,{label:"国家",width:"120"},{default:t(({row:o})=>[o.country?(d(),f(P,{key:0,type:"success",size:"small"},{default:t(()=>[r(C(Ve[o.country.toUpperCase()]||o.country),1)]),_:2},1024)):(d(),y("span",yl,"--"))]),_:1}),l(p,{prop:"sell_price",label:"价格",width:"100",align:"right"},{default:t(({row:o})=>[o.sell_price?(d(),y("span",xl,C(o.sell_price),1)):(d(),y("span",Vl,"--"))]),_:1}),l(p,{label:"状态",width:"80"},{default:t(({row:o})=>[l(P,{type:o.status==="active"?"success":"info",size:"small"},{default:t(()=>[r(C(o.status==="active"?"上架":o.status==="inactive"?"下架":"草稿"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data","row-key"])),[[qe,K.value]]),l(Me,{"current-page":V.current,"onUpdate:currentPage":e[14]||(e[14]=o=>V.current=o),"page-size":V.size,"onUpdate:pageSize":e[15]||(e[15]=o=>V.size=o),total:V.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:G,onSizeChange:G,style:{"margin-top":"16px","justify-content":"center"}},null,8,["current-page","page-size","total"])]),_:1},8,["modelValue"])])}}}),Dl=sl(hl,[["__scopeId","data-v-70f52c2d"]]);export{Dl as default};
