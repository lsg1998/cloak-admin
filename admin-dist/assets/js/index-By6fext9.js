import{d as ye,h as g,P as M,s as X,Z as We,r as p,Q as Ze,c as k,o as d,a as c,b as l,w as t,g as f,R as S,e as i,t as h,F as I,f as G,u as v,as as Ke,U as _e,$ as fe,a$ as Qe,b2 as Xe,aH as Ye,E as me,q as el,aQ as ve,x as be,W as ll,b3 as tl,b4 as ol,b1 as al,N as b,a0 as nl,M as sl}from"./index-DZg0S-xf.js";import{g as dl,u as ge,a as il,d as rl,b as Y}from"./pixel-CC2UpmR8.js";import{g as ke}from"./product-BPXIVAAw.js";import{_ as ul}from"./_plugin-vue_export-helper-DlAUqK2U.js";const cl={class:"pixel-config"},pl={class:"card-header"},_l={key:0,style:{display:"flex","flex-wrap":"wrap",gap:"4px"}},fl={class:"card-header"},ml={class:"card-header"},vl={class:"card-header"},bl={class:"action-bar"},gl={key:0,style:{"margin-top":"8px"}},kl={style:{"margin-bottom":"12px",display:"flex","justify-content":"space-between","align-items":"center"}},yl={style:{color:"#606266","font-size":"14px"}},xl={key:0,style:{color:"#909399"}},Vl=["src"],Cl={key:1},hl={key:0},wl={key:1},Al={style:{"text-align":"left","margin-bottom":"12px"}},Pl=ye({name:"PixelConfig"}),Ul=ye({...Pl,setup(Sl){const q=g(!1),z=g(!1),H=g("添加 Google Ads 账户"),W=g(),B=g(-1),ee=g(!1),le=g([]),R=g(!1),Z=g(!1),D=g([]),E=g(""),U=g(),y=M({title:"",country:""}),x=M({current:1,size:10,total:0}),V=g([]),te=X(()=>{const a=[...V.value];return a.reverse(),a.slice(0,50)}),s=M({name:"",conversion_id:"",conversion_label:"",enabled:!0,product_ids:[],em_params:[]}),oe=g([]),xe={conversion_id:[{required:!0,message:"请输入转化ID",trigger:"blur"},{pattern:/^\d+$/,message:"转化ID只能包含数字",trigger:"blur"}],conversion_label:[{required:!0,message:"请输入转化标签",trigger:"blur"}]},r=M({facebook_enabled:0,facebook_pixel_id:"",tiktok_enabled:0,tiktok_pixel_id:""}),w=g([]),Ve=[{code:"SK",name:"斯洛伐克"},{code:"CZ",name:"捷克"},{code:"PL",name:"波兰"},{code:"HU",name:"匈牙利"},{code:"DE",name:"德国"},{code:"AT",name:"奥地利"},{code:"RO",name:"罗马尼亚"},{code:"JP",name:"日本"}],Ce={SK:"斯洛伐克",CZ:"捷克",PL:"波兰",HU:"匈牙利",DE:"德国",AT:"奥地利",RO:"罗马尼亚",JP:"日本"},he=X(()=>{const a={};return D.value.forEach(e=>{if(e.country){const n=e.country.toUpperCase();a[n]=(a[n]||0)+1}}),a}),K=X(()=>{const a=he.value,e=[],n=[];return Ve.forEach(u=>{const _=a[u.code]||0;_>0?e.push({...u,count:_}):n.push(u)}),e.sort((u,_)=>_.count-u.count),{withProducts:e,withoutProducts:n}}),ae=async()=>{try{const{data:a}=await dl();if(a){if(a.google_ads_accounts)try{V.value=typeof a.google_ads_accounts=="string"?JSON.parse(a.google_ads_accounts):a.google_ads_accounts;const e=new Set;V.value.forEach(n=>{n.em_params&&Array.isArray(n.em_params)&&n.em_params.forEach(u=>e.add(u))}),oe.value=Array.from(e)}catch{V.value=[]}if(r.facebook_enabled=a.facebook_enabled||!1,r.facebook_pixel_id=a.facebook_pixel_id||"",r.tiktok_enabled=a.tiktok_enabled||!1,r.tiktok_pixel_id=a.tiktok_pixel_id||"",a.custom_pixels)try{w.value=typeof a.custom_pixels=="string"?JSON.parse(a.custom_pixels):a.custom_pixels}catch{w.value=[]}}else r.facebook_enabled=!1,r.facebook_pixel_id="",r.tiktok_enabled=!1,r.tiktok_pixel_id="",w.value=[],V.value=[]}catch(a){b.error("加载配置失败"),console.error(a)}},we=()=>{H.value="添加 Google Ads 账户",B.value=-1,Object.assign(s,{name:"",conversion_id:"",conversion_label:"",enabled:!0,product_ids:[],em_params:[]}),E.value="",z.value=!0},Ae=a=>{H.value="编辑 Google Ads 账户";const e=V.value.findIndex(n=>n.conversion_id===a.conversion_id&&n.conversion_label===a.conversion_label);B.value=e,Object.assign(s,{...a,product_ids:a.product_ids||[],em_params:a.em_params||[]}),L(),z.value=!0},Pe=async()=>{if(W.value)try{await W.value.validate();const a={name:s.name,conversion_id:s.conversion_id,conversion_label:s.conversion_label,enabled:s.enabled,product_ids:s.product_ids||[],em_params:s.em_params||[]};B.value>=0?(await ge(s.conversion_id,a),V.value[B.value]=a,b.success("账户更新成功")):(await il(a),V.value.push(a),b.success("账户添加成功")),z.value=!1}catch(a){console.error(a),b.error("保存失败，请重试")}},Ue=async a=>{try{await nl.confirm("确定要删除这个 Google Ads 账户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await rl(a.conversion_id);const e=V.value.findIndex(n=>n.conversion_id===a.conversion_id&&n.conversion_label===a.conversion_label);e!==-1&&V.value.splice(e,1),b.success("删除成功")}catch(e){e!=="cancel"&&(console.error(e),b.error("删除失败，请重试"))}},Se=async a=>{try{await ge(a.conversion_id,{name:a.name,conversion_id:a.conversion_id,conversion_label:a.conversion_label,enabled:a.enabled,product_ids:a.product_ids||[],em_params:a.em_params||[]});const e=V.value.findIndex(n=>n.conversion_id===a.conversion_id);e!==-1&&(V.value[e].enabled=a.enabled),b.success("状态已更新")}catch(e){console.error(e),a.enabled=!a.enabled,b.error("状态更新失败，请重试")}},ze=async()=>{w.value.push({name:"",code:"",enabled:!0});try{await Y({facebook_enabled:r.facebook_enabled,facebook_pixel_id:r.facebook_pixel_id,tiktok_enabled:r.tiktok_enabled,tiktok_pixel_id:r.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),b.success("自定义像素已添加")}catch(a){console.error(a),b.error("添加失败，请重试")}},De=async a=>{w.value.splice(a,1);try{await Y({facebook_enabled:r.facebook_enabled,facebook_pixel_id:r.facebook_pixel_id,tiktok_enabled:r.tiktok_enabled,tiktok_pixel_id:r.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),b.success("自定义像素已删除")}catch(e){console.error(e),b.error("删除失败，请重试")}},Ee=async()=>{q.value=!0;try{await Y({facebook_enabled:r.facebook_enabled,facebook_pixel_id:r.facebook_pixel_id,tiktok_enabled:r.tiktok_enabled,tiktok_pixel_id:r.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),b.success("配置保存成功，所有商品页面已生效")}catch(a){b.error("保存配置失败"),console.error(a)}finally{q.value=!1}},Te=()=>{ae(),b.info("已重置为当前保存的配置")},Ie=async()=>{ee.value=!0;try{const{data:a}=await ke({page:1,size:1e3,product_type:"original"});le.value=a.list.map(e=>({id:e.id,title:e.title,country:e.country}))}catch(a){console.error("加载商品列表失败",a)}finally{ee.value=!1}},Ge=()=>{y.title="",y.country="",x.current=1,x.size=10,R.value=!0,$()},$=async()=>{Z.value=!0;try{const{data:a}=await ke({page:x.current,size:x.size,title:y.title||void 0,country:y.country||void 0,product_type:"original"});D.value=a.list,x.total=a.total,await sl(),U.value&&s.product_ids.length>0&&D.value.forEach(e=>{s.product_ids.includes(e.id)&&U.value.toggleRowSelection(e,!0)})}catch(a){console.error("加载商品列表失败:",a),b.error("加载商品列表失败")}finally{Z.value=!1}};let Q=null;const Re=()=>{Q&&clearTimeout(Q),Q=window.setTimeout(()=>{ne()},500)},ne=()=>{x.current=1,$()},se=()=>{y.title="",y.country="",x.current=1,$()},$e=a=>{const e=D.value.map(u=>u.id),n=s.product_ids.filter(u=>!e.includes(u));s.product_ids=[...n,...a.map(u=>u.id)],L()},Le=()=>{R.value=!1,L()},L=()=>{s.product_ids.length===0?E.value="":E.value=`已选择 ${s.product_ids.length} 个商品`},Ne=a=>{const e=le.value.find(n=>n.id===a);return e?e.title:a},Oe=a=>{s.product_ids=s.product_ids.filter(e=>e!==a),L()},Be=()=>{s.product_ids=[],E.value=""},Fe=()=>{U.value&&D.value.forEach(a=>{U.value.toggleRowSelection(a,!0)})},je=()=>{s.product_ids=[],U.value&&U.value.clearSelection(),L()};return We(()=>{ae(),Ie()}),(a,e)=>{const n=p("el-icon"),u=p("el-button"),_=p("el-table-column"),P=p("el-tag"),F=p("el-text"),N=p("el-switch"),de=p("el-table"),ie=p("el-empty"),j=p("el-card"),m=p("el-form-item"),A=p("el-input"),O=p("el-form"),re=p("el-col"),Je=p("el-row"),J=p("el-option"),ue=p("el-select"),ce=p("el-dialog"),Me=p("el-alert"),pe=p("el-avatar"),qe=p("el-pagination"),He=Ze("loading");return d(),k("div",cl,[e[46]||(e[46]=c("div",{class:"page-header"},[c("h2",null,"全局像素配置"),c("p",null,"配置网站的像素跟踪代码，支持多个 Google Ads 账户，可为每个账户指定商品范围")],-1)),l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",pl,[e[19]||(e[19]=c("span",{class:"card-title"},"Google Ads 账户管理",-1)),l(u,{type:"primary",onClick:we},{default:t(()=>[l(n,null,{default:t(()=>[l(v(fe))]),_:1}),e[18]||(e[18]=i(" 添加账户 ",-1))]),_:1})])]),default:t(()=>[l(de,{data:te.value,stripe:"",border:"",style:{width:"100%"}},{default:t(()=>[l(_,{type:"index",label:"序号",width:"60",align:"center"}),l(_,{prop:"name",label:"账户名称","min-width":"150"},{default:t(({row:o})=>[l(P,null,{default:t(()=>[i(h(o.name),1)]),_:2},1024)]),_:1}),l(_,{prop:"conversion_id",label:"转化ID","min-width":"150"},{default:t(({row:o})=>[l(F,{type:"primary"},{default:t(()=>[i("AW-"+h(o.conversion_id),1)]),_:2},1024)]),_:1}),l(_,{prop:"conversion_label",label:"转化标签","min-width":"180"},{default:t(({row:o})=>[l(F,{type:"info"},{default:t(()=>[i(h(o.conversion_label),1)]),_:2},1024)]),_:1}),l(_,{prop:"product_ids",label:"应用商品","min-width":"150"},{default:t(({row:o})=>[!o.product_ids||o.product_ids.length===0?(d(),f(P,{key:0,type:"success"},{default:t(()=>[...e[20]||(e[20]=[i("全部商品",-1)])]),_:1})):(d(),f(P,{key:1,type:"warning"},{default:t(()=>[i("指定 "+h(o.product_ids.length)+" 个商品",1)]),_:2},1024))]),_:1}),l(_,{prop:"em_params",label:"em参数","min-width":"180"},{default:t(({row:o})=>[o.em_params&&o.em_params.length>0?(d(),k("div",_l,[(d(!0),k(I,null,G(o.em_params,C=>(d(),f(P,{key:C,type:"primary",size:"small"},{default:t(()=>[i(h(C),1)]),_:2},1024))),128))])):(d(),f(P,{key:1,type:"info",size:"small"},{default:t(()=>[...e[21]||(e[21]=[i("全部加载",-1)])]),_:1}))]),_:1}),l(_,{prop:"enabled",label:"状态",width:"100",align:"center"},{default:t(({row:o})=>[l(N,{modelValue:o.enabled,"onUpdate:modelValue":C=>o.enabled=C,onChange:C=>Se(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(_,{label:"操作",width:"180",align:"center",fixed:"right"},{default:t(({row:o})=>[l(u,{type:"primary",size:"small",link:"",onClick:C=>Ae(o)},{default:t(()=>[l(n,null,{default:t(()=>[l(v(Ke))]),_:1}),e[22]||(e[22]=i(" 编辑 ",-1))]),_:1},8,["onClick"]),l(u,{type:"danger",size:"small",link:"",onClick:C=>Ue(o)},{default:t(()=>[l(n,null,{default:t(()=>[l(v(_e))]),_:1}),e[23]||(e[23]=i(" 删除 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),te.value.length===0?(d(),f(ie,{key:0,description:"暂无 Google Ads 账户，点击右上角添加"})):S("",!0)]),_:1}),l(Je,{gutter:20},{default:t(()=>[l(re,{span:12},{default:t(()=>[l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",fl,[l(n,{class:"platform-icon facebook"},{default:t(()=>[l(v(Qe))]),_:1}),e[24]||(e[24]=c("span",{class:"card-title"},"Facebook 像素",-1))])]),default:t(()=>[l(O,{"label-width":"100px"},{default:t(()=>[l(m,{label:"启用"},{default:t(()=>[l(N,{modelValue:r.facebook_enabled,"onUpdate:modelValue":e[0]||(e[0]=o=>r.facebook_enabled=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),r.facebook_enabled?(d(),f(m,{key:0,label:"像素ID"},{default:t(()=>[l(A,{modelValue:r.facebook_pixel_id,"onUpdate:modelValue":e[1]||(e[1]=o=>r.facebook_pixel_id=o),placeholder:"例如: 123456789012345"},null,8,["modelValue"])]),_:1})):S("",!0)]),_:1})]),_:1})]),_:1}),l(re,{span:12},{default:t(()=>[l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",ml,[l(n,{class:"platform-icon tiktok"},{default:t(()=>[l(v(Xe))]),_:1}),e[25]||(e[25]=c("span",{class:"card-title"},"TikTok 像素",-1))])]),default:t(()=>[l(O,{"label-width":"100px"},{default:t(()=>[l(m,{label:"启用"},{default:t(()=>[l(N,{modelValue:r.tiktok_enabled,"onUpdate:modelValue":e[2]||(e[2]=o=>r.tiktok_enabled=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),r.tiktok_enabled?(d(),f(m,{key:0,label:"像素ID"},{default:t(()=>[l(A,{modelValue:r.tiktok_pixel_id,"onUpdate:modelValue":e[3]||(e[3]=o=>r.tiktok_pixel_id=o),placeholder:"例如: C1234567890ABCDEF"},null,8,["modelValue"])]),_:1})):S("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",vl,[e[27]||(e[27]=c("span",{class:"card-title"},"自定义像素",-1)),l(u,{type:"primary",onClick:ze},{default:t(()=>[l(n,null,{default:t(()=>[l(v(fe))]),_:1}),e[26]||(e[26]=i(" 添加自定义像素 ",-1))]),_:1})])]),default:t(()=>[(d(!0),k(I,null,G(w.value,(o,C)=>(d(),k("div",{key:C,class:"custom-pixel-item"},[l(O,{"label-width":"100px"},{default:t(()=>[l(m,{label:"像素名称"},{default:t(()=>[l(A,{modelValue:o.name,"onUpdate:modelValue":T=>o.name=T,placeholder:"例如: 第三方统计代码"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(m,{label:"启用状态"},{default:t(()=>[l(N,{modelValue:o.enabled,"onUpdate:modelValue":T=>o.enabled=T},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(m,{label:"像素代码"},{default:t(()=>[l(A,{modelValue:o.code,"onUpdate:modelValue":T=>o.code=T,type:"textarea",rows:4,placeholder:"粘贴像素代码..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(m,null,{default:t(()=>[l(u,{type:"danger",onClick:T=>De(C)},{default:t(()=>[l(n,null,{default:t(()=>[l(v(_e))]),_:1}),e[28]||(e[28]=i(" 删除 ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),w.value.length===0?(d(),f(ie,{key:0,description:"暂无自定义像素"})):S("",!0)]),_:1}),c("div",bl,[l(u,{type:"primary",size:"large",onClick:Ee,loading:q.value},{default:t(()=>[l(n,null,{default:t(()=>[l(v(Ye))]),_:1}),e[29]||(e[29]=i(" 保存所有配置 ",-1))]),_:1},8,["loading"]),l(u,{size:"large",onClick:Te},{default:t(()=>[l(n,null,{default:t(()=>[l(v(me))]),_:1}),e[30]||(e[30]=i(" 重置 ",-1))]),_:1})]),l(ce,{modelValue:z.value,"onUpdate:modelValue":e[11]||(e[11]=o=>z.value=o),title:H.value,width:"700px"},{footer:t(()=>[l(u,{onClick:e[10]||(e[10]=o=>z.value=!1)},{default:t(()=>[...e[36]||(e[36]=[i("取消",-1)])]),_:1}),l(u,{type:"primary",onClick:Pe},{default:t(()=>[...e[37]||(e[37]=[i("确定",-1)])]),_:1})]),default:t(()=>[l(O,{ref_key:"accountFormRef",ref:W,model:s,rules:xe,"label-width":"120px"},{default:t(()=>[l(m,{label:"账户名称",prop:"name"},{default:t(()=>[l(A,{modelValue:s.name,"onUpdate:modelValue":e[4]||(e[4]=o=>s.name=o),placeholder:"例如: 主投账户"},null,8,["modelValue"])]),_:1}),l(m,{label:"转化ID",prop:"conversion_id"},{default:t(()=>[l(A,{modelValue:s.conversion_id,"onUpdate:modelValue":e[5]||(e[5]=o=>s.conversion_id=o),placeholder:"例如: 17612844136"},{prepend:t(()=>[...e[31]||(e[31]=[i("AW-",-1)])]),_:1},8,["modelValue"]),e[32]||(e[32]=c("div",{class:"form-tip"},"在 Google Ads 后台创建转化操作后获取",-1))]),_:1}),l(m,{label:"转化标签",prop:"conversion_label"},{default:t(()=>[l(A,{modelValue:s.conversion_label,"onUpdate:modelValue":e[6]||(e[6]=o=>s.conversion_label=o),placeholder:"例如: REXpCP2e1aUbEOjYus5B"},null,8,["modelValue"]),e[33]||(e[33]=c("div",{class:"form-tip"},"转化操作对应的标签代码",-1))]),_:1}),l(m,{label:"应用商品"},{default:t(()=>[l(A,{modelValue:E.value,"onUpdate:modelValue":e[7]||(e[7]=o=>E.value=o),placeholder:"点击选择商品（不选择则应用到全部商品）",readonly:"",style:{width:"100%",cursor:"pointer"},onClick:Ge},{suffix:t(()=>[s.product_ids.length>0?(d(),f(n,{key:0,onClick:el(Be,["stop"]),style:{cursor:"pointer"}},{default:t(()=>[l(v(ve))]),_:1})):(d(),f(n,{key:1},{default:t(()=>[l(v(be))]),_:1}))]),_:1},8,["modelValue"]),s.product_ids.length>0?(d(),k("div",gl,[(d(!0),k(I,null,G(s.product_ids,o=>(d(),f(P,{key:o,closable:"",onClose:C=>Oe(o),style:{"margin-right":"8px","margin-bottom":"8px"}},{default:t(()=>[i(h(Ne(o)),1)]),_:2},1032,["onClose"]))),128))])):S("",!0),e[34]||(e[34]=c("div",{class:"form-tip"},"不选择任何商品时，此像素将应用到全部商品页面",-1))]),_:1}),l(m,{label:"em参数绑定"},{default:t(()=>[l(ue,{modelValue:s.em_params,"onUpdate:modelValue":e[8]||(e[8]=o=>s.em_params=o),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入em参数值（可多个）",style:{width:"100%"}},{default:t(()=>[(d(!0),k(I,null,G(oe.value,o=>(d(),f(J,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[35]||(e[35]=c("div",{class:"form-tip"},[i(" 绑定em参数后，只有URL包含对应em参数时才会加载此像素"),c("br"),i(' 例如：绑定"account1"，则访问 ?em=account1 时加载此像素'),c("br"),i(" 不绑定则加载到所有页面（兼容旧逻辑） ")],-1))]),_:1}),l(m,{label:"启用状态"},{default:t(()=>[l(N,{modelValue:s.enabled,"onUpdate:modelValue":e[9]||(e[9]=o=>s.enabled=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(ce,{modelValue:R.value,"onUpdate:modelValue":e[17]||(e[17]=o=>R.value=o),title:"选择商品",width:"900px","close-on-click-modal":!1},{footer:t(()=>[c("div",Al,[l(F,null,{default:t(()=>[i("已选择 "+h(s.product_ids.length)+" 个商品",1)]),_:1})]),l(u,{onClick:e[16]||(e[16]=o=>R.value=!1)},{default:t(()=>[...e[44]||(e[44]=[i("取消",-1)])]),_:1}),l(u,{type:"primary",onClick:Le},{default:t(()=>[...e[45]||(e[45]=[i("确定",-1)])]),_:1})]),default:t(()=>[l(Me,{title:"快速搜索",type:"info",closable:!1,style:{"margin-bottom":"16px"},description:"输入商品标题即可快速搜索，支持按国家筛选"}),l(O,{model:y,inline:"",style:{"margin-bottom":"16px"}},{default:t(()=>[l(m,{label:"快速搜索"},{default:t(()=>[l(A,{modelValue:y.title,"onUpdate:modelValue":e[12]||(e[12]=o=>y.title=o),placeholder:"输入商品标题搜索",clearable:"",style:{width:"250px"},onInput:Re,onClear:se},{prefix:t(()=>[l(n,null,{default:t(()=>[l(v(be))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"国家筛选"},{default:t(()=>[l(ue,{modelValue:y.country,"onUpdate:modelValue":e[13]||(e[13]=o=>y.country=o),placeholder:"全部国家",clearable:"",style:{width:"180px"},onChange:ne},{default:t(()=>[(d(!0),k(I,null,G(K.value.withProducts,o=>(d(),f(J,{key:o.code,label:`${o.name} (${o.count}条)`,value:o.code},null,8,["label","value"]))),128)),K.value.withProducts.length>0?(d(),f(J,{key:0,disabled:"",value:""},{default:t(()=>[...e[38]||(e[38]=[c("span",{style:{color:"#dcdfe6"}},"──────────",-1)])]),_:1})):S("",!0),(d(!0),k(I,null,G(K.value.withoutProducts,o=>(d(),f(J,{key:o.code,label:o.name,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,null,{default:t(()=>[l(u,{onClick:se},{default:t(()=>[l(n,null,{default:t(()=>[l(v(me))]),_:1}),e[39]||(e[39]=i(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"]),c("div",kl,[c("div",yl,[l(n,null,{default:t(()=>[l(v(tl))]),_:1}),e[40]||(e[40]=i(" 共找到 ",-1)),l(F,{type:"primary",style:{"font-weight":"600"}},{default:t(()=>[i(h(x.total),1)]),_:1}),e[41]||(e[41]=i(" 个商品 ",-1)),y.title||y.country?(d(),k("span",xl," （已筛选） ")):S("",!0)]),c("div",null,[l(u,{size:"small",onClick:Fe},{default:t(()=>[l(n,null,{default:t(()=>[l(v(ol))]),_:1}),e[42]||(e[42]=i(" 全选当前页 ",-1))]),_:1}),l(u,{size:"small",onClick:je},{default:t(()=>[l(n,null,{default:t(()=>[l(v(ve))]),_:1}),e[43]||(e[43]=i(" 清空选择 ",-1))]),_:1})])]),ll((d(),f(de,{data:D.value,"max-height":"400px",onSelectionChange:$e,"row-key":o=>o.id,ref_key:"productTableRef",ref:U},{default:t(()=>[l(_,{type:"selection",width:"55","reserve-selection":!0}),l(_,{label:"商品图片",width:"80"},{default:t(({row:o})=>[o.image_urls&&o.image_urls[0]?(d(),f(pe,{key:0,size:50},{default:t(()=>[c("img",{src:o.image_urls[0],style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Vl)]),_:2},1024)):(d(),f(pe,{key:1,size:50},{default:t(()=>[l(n,null,{default:t(()=>[l(v(al))]),_:1})]),_:1}))]),_:1}),l(_,{prop:"title",label:"商品标题","show-overflow-tooltip":"","min-width":"200"}),l(_,{label:"国家",width:"120"},{default:t(({row:o})=>[o.country?(d(),f(P,{key:0,type:"success",size:"small"},{default:t(()=>[i(h(Ce[o.country.toUpperCase()]||o.country),1)]),_:2},1024)):(d(),k("span",Cl,"--"))]),_:1}),l(_,{prop:"sell_price",label:"价格",width:"100",align:"right"},{default:t(({row:o})=>[o.sell_price?(d(),k("span",hl,h(o.sell_price),1)):(d(),k("span",wl,"--"))]),_:1}),l(_,{label:"状态",width:"80"},{default:t(({row:o})=>[l(P,{type:o.status==="active"?"success":"info",size:"small"},{default:t(()=>[i(h(o.status==="active"?"上架":o.status==="inactive"?"下架":"草稿"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data","row-key"])),[[He,Z.value]]),l(qe,{"current-page":x.current,"onUpdate:currentPage":e[14]||(e[14]=o=>x.current=o),"page-size":x.size,"onUpdate:pageSize":e[15]||(e[15]=o=>x.size=o),total:x.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:$,onSizeChange:$,style:{"margin-top":"16px","justify-content":"center"}},null,8,["current-page","page-size","total"])]),_:1},8,["modelValue"])])}}}),Il=ul(Ul,[["__scopeId","data-v-e2afa931"]]);export{Il as default};
