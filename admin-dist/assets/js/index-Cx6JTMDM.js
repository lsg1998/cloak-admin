import{a2 as M,d as Ve,ac as Nt,h as v,ad as Jt,D as Ee,ae as Wt,af as Gt,s as re,r as y,c as f,o as u,b as t,a as i,g as $,R as D,n as Fe,w as l,F as Q,u as m,aD as Ge,aZ as Zt,U as Ke,q as Ht,a4 as Me,N as p,ag as le,P as de,a5 as Qt,Z as Xt,Q as Yt,az as el,x as Ce,e as n,E as Be,W as $e,aA as be,t as b,f as te,aC as Oe,ao as tl,aB as ll,a_ as al,a$ as Re,b0 as sl,G as il,b1 as qe,b2 as ol,aF as Pe}from"./index-Dt7Dw0Fe.js";import{W as nl}from"./index-YiDgZR6C.js";import{_ as Ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./upload-C8ZmGt-u.js";const Ne=r=>{const U=new URLSearchParams;r.page&&U.append("page",r.page.toString()),r.size&&U.append("size",r.size.toString()),r.title&&U.append("title",r.title),r.status&&U.append("status",r.status),r.product_type&&U.append("product_type",r.product_type),r.category_id&&U.append("category_id",r.category_id);const I=U.toString(),j=I?`/admin/products?${I}`:"/admin/products";return M.get(j)},ul=r=>M.post("/admin/products",r),dl=(r,U)=>M.put(`/admin/products/${r}`,U),rl=r=>M.delete(`/admin/products/${r}`),Je=r=>{const U=r?{search:r}:{};return M.get("/admin/products/original/list",{params:U})},pl=(r,U)=>M.put(`/admin/products/${r}`,{product_type:"fake",b_page_product_id:U}),cl=r=>M.get(`/admin/products/${r}/skus`),_l=r=>M.post("/admin/product-skus",r),ml=(r,U)=>M.put(`/admin/product-skus/${r}`,U),fl=r=>M.delete(`/admin/product-skus/${r}`),gl={class:"product-upload-box"},vl=["src"],yl={key:1,class:"upload-empty"},kl={class:"el-upload__tip"},bl=Ve({name:"ProductUploadImg"}),Vl=Ve({...bl,props:{imageUrl:{default:""},drag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},fileSize:{default:2},fileType:{default:()=>["image/jpeg","image/png","image/gif","image/webp"]},height:{default:"150px"},width:{default:"150px"},borderRadius:{default:"8px"}},emits:["update:imageUrl","update:image-url"],setup(r,{emit:U}){Nt(g=>({v5f6650a9:g.borderRadius,v6111d75b:g.width,b14bcb9c:g.height}));const I=r,j=v("id-"+Jt()),q=v(!1),E=Ee(Wt,void 0),N=Ee(Gt,void 0),A=re(()=>I.disabled||(E==null?void 0:E.disabled)),ae=re(()=>"https://gammtt.shop/admin/upload/image"),J=U,se=()=>{J("update:imageUrl",""),J("update:image-url","")},ie=()=>{const g=document.querySelector(`#${j.value} .el-upload__input`);g&&g.dispatchEvent(new MouseEvent("click"))},X=g=>{const k=g.type.startsWith("image/"),T=g.size/1024/1024<I.fileSize,F=I.fileType.includes(g.type);return k?F?T?!0:(p.error(`图片大小不能超过 ${I.fileSize}MB!`),!1):(p.error(`上传图片格式不正确，支持格式：${I.fileType.join(", ")}`),!1):(p.error("只能上传图片文件!"),!1)},pe=g=>{g&&g.success&&g.data&&g.data.url?(J("update:imageUrl",g.data.url),J("update:image-url",g.data.url),p.success("图片上传成功!"),N!=null&&N.prop&&(E==null||E.validateField([N.prop]))):p.error("图片上传失败: "+(g.error||"未知错误"))},B=()=>{p.error("图片上传失败，请重新上传!")};return(g,k)=>{const T=y("el-icon"),F=y("el-upload"),K=y("el-image-viewer");return u(),f("div",gl,[t(F,{id:j.value,action:ae.value,class:Fe(["upload",A.value?"disabled":"",r.drag?"no-border":""]),multiple:!1,disabled:A.value,"show-file-list":!1,"before-upload":X,"on-success":pe,"on-error":B,drag:r.drag,accept:r.fileType.join(",")},{default:l(()=>[r.imageUrl?(u(),f(Q,{key:0},[i("img",{src:r.imageUrl,class:"upload-image"},null,8,vl),i("div",{class:"upload-handle",onClick:k[1]||(k[1]=Ht(()=>{},["stop"]))},[A.value?D("",!0):(u(),f("div",{key:0,class:"handle-icon",onClick:ie},[t(T,null,{default:l(()=>[t(m(Ge))]),_:1}),k[3]||(k[3]=i("span",null,"编辑",-1))])),i("div",{class:"handle-icon",onClick:k[0]||(k[0]=H=>q.value=!0)},[t(T,null,{default:l(()=>[t(m(Zt))]),_:1}),k[4]||(k[4]=i("span",null,"查看",-1))]),A.value?D("",!0):(u(),f("div",{key:1,class:"handle-icon",onClick:se},[t(T,null,{default:l(()=>[t(m(Ke))]),_:1}),k[5]||(k[5]=i("span",null,"删除",-1))]))])],64)):(u(),f("div",yl,[Me(g.$slots,"empty",{},()=>[t(T,null,{default:l(()=>[t(m(le))]),_:1}),k[6]||(k[6]=i("span",null,"请上传图片",-1))],!0)]))]),_:3},8,["id","action","class","disabled","drag","accept"]),i("div",kl,[Me(g.$slots,"tip",{},void 0,!0)]),q.value?(u(),$(K,{key:0,"url-list":[r.imageUrl],onClose:k[2]||(k[2]=H=>q.value=!1)},null,8,["url-list"])):D("",!0)])}}}),We=Ze(Vl,[["__scopeId","data-v-937c0afd"]]),wl={class:"product-management"},hl={class:"table-header"},Ul={class:"table-title"},Sl={class:"table-actions"},zl={class:"product-info"},xl=["src","alt"],Cl={class:"product-details"},$l={class:"product-title"},Pl={class:"product-subtitle"},Fl={key:0,style:{"font-weight":"bold",color:"#ef3f52"}},Kl={key:1,style:{color:"#999999"}},Il={key:0,style:{color:"#666666","text-decoration":"line-through"}},jl={key:1,style:{color:"#999999"}},Tl={key:1,style:{color:"#999999"}},Ll={key:0},Dl={key:0},Al={key:1,style:{color:"#999999"}},El={key:1},Ml={key:2,style:{color:"#f56c6c"}},Bl={class:"count-info"},Ol={class:"count-info"},Rl={class:"time-info"},ql={class:"action-buttons"},Nl={class:"pagination-wrapper"},Jl={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Wl={style:{"font-size":"12px",color:"#999999"}},Gl={class:"editor-controls"},Zl={class:"dialog-footer"},Hl={class:"sku-management"},Ql={class:"sku-list-section"},Xl={class:"section-header"},Yl=["src","alt"],ea={class:"sku-attributes"},ta={class:"price"},la={key:1,style:{color:"#999999"}},aa={class:"sku-specs"},sa={class:"add-spec-form"},ia={key:0,class:"specs-list"},oa={class:"specs-grid"},na={class:"spec-content"},ua={class:"spec-name"},da={class:"image-input-section"},ra={class:"input-mode-selector"},pa={key:0,class:"url-input-mode"},ca={key:0,class:"url-preview"},_a={class:"image-error"},ma={key:1,class:"upload-mode"},fa={class:"dialog-footer"},ga={class:"fake-product-selection"},va={key:0,class:"product-summary"},ya=["src","alt"],ka={class:"product-info"},ba={class:"product-title"},Va={class:"product-price"},wa={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ha={class:"search-section"},Ua={class:"fake-products-grid"},Sa=["onClick"],za=["src","alt"],xa={class:"card-content"},Ca={class:"card-title"},$a={class:"card-price"},Pa={class:"card-check"},Fa={key:0,class:"empty-state"},Ka={key:0,class:"fake-pagination"},Ia={class:"dialog-footer"},ja=Ve({name:"ProductList"}),Ta=Ve({...ja,setup(r){const U=v(!1),I=v(!1),j=v(!1),q=v(""),E=v(),N=v(!1),A=v(!1),ae=v(""),J=v(!1),se=v(!1),ie=v(),X=v(null),pe=v([]),B=v(""),g=v(""),k=v([]),T=v("url"),F=de({title:"",status:null,product_type:""}),K=de({current:1,size:20,total:0}),H=v([]),c=de({id:null,spu_id:"",title:"",sell_price:0,origin_price:0,discount:0,image_urls:[],rich_text_content:"",specification_list:[],variants:[],status:"active",product_type:"original",b_page_product_id:"",country:"JA"}),ce=v([]),_e=v([]),oe=v(!1),Y=v(!1),h=v(null),me=v([]),fe=v(!1),W=v(""),ge=v(""),L=de({current:1,size:12,total:0}),ee=v(!1),He=[{label:"日本",value:"JA"},{label:"中国",value:"ZH"},{label:"英国",value:"EN"},{label:"斯洛伐克",value:"SK"},{label:"斯洛文尼亚",value:"SI"},{label:"波兰",value:"PL"},{label:"葡萄牙",value:"PT"},{label:"匈牙利",value:"HU"},{label:"意大利",value:"IT"},{label:"西班牙",value:"ES"},{label:"捷克",value:"CZ"}],Qe=re(()=>ee.value?"calc(100vh - 200px)":"500px"),Xe=re(()=>({placeholder:"请输入商品描述内容...",MENU_CONF:{uploadImage:{server:Ie.value,fieldName:"file",maxFileSize:2*1024*1024,allowedFileTypes:["image/*"]}}})),Ie=re(()=>"https://gammtt.shop/admin/upload/image"),d=de({id:null,product_id:"",sku_code:"",sku_name:"",sell_price:0,origin_price:0,cost_price:0,discount_percent:0,stock_quantity:0,warning_stock:10,main_image:"",status:"active",attributes:[]}),Ye={title:[{required:!0,message:"请输入商品标题",trigger:"blur"},{min:2,max:500,message:"商品标题长度在 2 到 500 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},et={sku_name:[{required:!0,message:"请输入SKU名称",trigger:"blur"}],sell_price:[{required:!0,message:"请输入销售价格",trigger:"blur"}],stock_quantity:[{required:!0,message:"请输入库存数量",trigger:"blur"}]},tt=()=>{if(d.origin_price>0&&d.sell_price>0){const s=Math.round((d.origin_price-d.sell_price)/d.origin_price*100);d.discount_percent=Math.max(0,Math.min(100,s))}else d.discount_percent=0};Qt(()=>[d.sell_price,d.origin_price],()=>{tt()},{deep:!0});const lt=s=>({active:"success",inactive:"danger",draft:"warning",deleted:"info"})[s]||"info",at=s=>({active:"上架",inactive:"下架",draft:"草稿",deleted:"已删除"})[s]||s,st=s=>({active:"success",inactive:"danger",out_of_stock:"warning"})[s]||"info",it=s=>({active:"正常",inactive:"禁用",out_of_stock:"缺货"})[s]||s,we=()=>{K.current=1,G()},ot=()=>{Object.assign(F,{title:"",status:null,product_type:""}),we()},nt=()=>{q.value="添加商品",Object.assign(c,{id:null,spu_id:"",title:"",sell_price:0,origin_price:0,discount:0,image_urls:[],rich_text_content:"",specification_list:[],variants:[],status:"active",product_type:"original",b_page_product_id:"",country:"JA"}),ce.value=[],_e.value=[],j.value=!0},he=s=>{const o=`https://gammtt.shop/product/${s.id}`;window.open(o,"_blank"),p.success("正在跳转到商品页面...")},ut=s=>{q.value="编辑商品";const e={...s,sell_price:parseFloat(s.sell_price)||0,origin_price:parseFloat(s.origin_price)||0,discount:parseFloat(s.discount)||0,product_type:s.product_type||"original",b_page_product_id:s.b_page_product_id||"",country:s.country||"JA"};Object.assign(c,e),ce.value=(s.image_urls||[]).map((o,V)=>({name:`image_${V}.jpg`,url:o,response:{success:!0,data:{url:o,file_name:`image_${V}.jpg`}}})),j.value=!0},dt=s=>{Pe.confirm(`确定要删除商品 "${s.title}" 吗？删除后无法恢复！`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"}).then(async()=>{try{await rl(s.id),p.success("删除成功"),G()}catch{p.error("删除失败")}})},rt=async()=>{E.value&&E.value.validate(async s=>{if(s){I.value=!0;try{c.id?(await dl(c.id,c),p.success("更新成功")):(await ul(c),p.success("添加成功")),j.value=!1,G()}catch{p.error(c.id?"更新失败":"添加失败")}finally{I.value=!1}}})},pt=s=>{K.size=s,G()},ct=s=>{K.current=s,G()},_t=s=>{const e=s.type.startsWith("image/"),o=s.size/1024/1024<2;return e?o?!0:(p.error("图片大小不能超过 2MB!"),!1):(p.error("只能上传图片文件!"),!1)},mt=(s,e)=>{s&&s.success&&s.data&&s.data.url?(c.image_urls.push(s.data.url),e.fileName=s.data.file_name,p.success("图片上传成功")):p.error("图片上传失败: "+(s.error||"未知错误"))},ft=s=>{if(s.response&&s.response.url){const e=c.image_urls.indexOf(s.response.url);e>-1&&c.image_urls.splice(e,1)}},gt=()=>{p.error("图片上传失败")},vt=()=>{ee.value=!ee.value},yt=s=>{c.rich_text_content=s},kt=()=>{Pe.confirm("确定要清空商品描述内容吗？","清空确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{c.rich_text_content="",p.success("内容已清空")})},G=async()=>{U.value=!0;try{const s={page:K.current,size:K.size,title:F.title||void 0,status:F.status||void 0,product_type:F.product_type||void 0},{data:e}=await Ne(s);H.value=e.list,K.total=e.total}catch{p.error("获取商品列表失败")}finally{U.value=!1}},bt=async s=>{X.value=s,N.value=!0,await Ue(s.id)},Ue=async s=>{J.value=!0;try{const{data:e}=await cl(s);pe.value=e}catch{p.error("获取SKU列表失败")}finally{J.value=!1}},Vt=()=>{if(!B.value.trim()||!g.value.trim()){p.warning("请输入规格名称和值");return}const s=B.value.trim(),e=g.value.trim();if(k.value.find(C=>C.name===s&&C.value===e)){p.warning(`规格 "${s}: ${e}" 已存在，请勿重复添加`);return}const V=k.value.find(C=>C.name===s);if(V){p.warning(`属性 "${s}" 已存在值 "${V.value}"，一个SKU的同一属性只能设置一个值。如需修改，请先删除现有规格。`);return}const _={name:s,value:e};k.value.push(_),B.value="",g.value="",p.success("规格添加成功")},wt=s=>{k.value.splice(s,1),p.success("规格删除成功")},ht=()=>{var V;ae.value="添加SKU";const s=Date.now(),e=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),o=`SKU${s}${e}`;Object.assign(d,{id:null,product_id:((V=X.value)==null?void 0:V.id)||"",sku_code:o,sku_name:"",sell_price:0,origin_price:0,cost_price:0,discount_percent:0,stock_quantity:0,warning_stock:10,main_image:"",status:"active",attributes:[]}),k.value=[],B.value="",g.value="",A.value=!0},Ut=s=>{ae.value="编辑SKU";const e={...s,sell_price:parseFloat(s.sell_price)||0,origin_price:parseFloat(s.origin_price)||0,cost_price:parseFloat(s.cost_price)||0,discount_percent:parseFloat(s.discount_percent)||0,stock_quantity:parseInt(s.stock_quantity)||0,warning_stock:parseInt(s.warning_stock)||10};Object.assign(d,e),k.value=s.attributes.map(o=>({name:o.attribute_name||o.display_name||"",value:o.value||o.display_value||"",attribute_id:o.attribute_id||null,attribute_value_id:o.attribute_value_id||null})),A.value=!0},St=s=>{Pe.confirm(`确定要删除SKU "${s.sku_name}" 吗？`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then(async()=>{var e,o,V;try{await fl(s.id),p.success("删除成功"),await Ue(((e=X.value)==null?void 0:e.id)||"")}catch(_){console.error("删除SKU失败:",_);let C="删除失败";(V=(o=_.response)==null?void 0:o.data)!=null&&V.message?C=_.response.data.message:_.message&&(C=_.message),p.error(C)}})},zt=()=>{const s=k.value.map(o=>o.name),e=s.filter((o,V)=>s.indexOf(o)!==V);if(e.length>0)throw p.error(`检测到重复的属性名: ${e.join(", ")}，请检查规格设置`),new Error("存在重复的属性名");return k.value.map(o=>o.attribute_id&&o.attribute_value_id?{attribute_id:o.attribute_id,attribute_value_id:o.attribute_value_id}:{attribute_name:o.name,value:o.value})},xt=async()=>{ie.value&&ie.value.validate(async s=>{var e;if(s){se.value=!0;try{const o={...d,attributes:zt()};d.id?(await ml(d.id,o),p.success("更新成功")):(await _l(o),p.success("添加成功")),A.value=!1,await Ue(((e=X.value)==null?void 0:e.id)||"")}catch(o){if(o.message==="存在重复的属性名")return;p.error(d.id?"更新失败":"添加失败")}finally{se.value=!1}}})},Ct=s=>{s!==T.value&&(d.main_image="")},$t=s=>{s==="original"?c.b_page_product_id="":s==="fake"&&(c.b_page_product_id||Se())},Pt=async s=>{if(!s){await Se();return}oe.value=!0;try{const{data:e}=await Je(s);_e.value=e}catch{p.error("搜索正品商品失败")}finally{oe.value=!1}},Se=async()=>{oe.value=!0;try{const{data:s}=await Je();_e.value=s}catch{p.error("加载正品商品列表失败")}finally{oe.value=!1}},Ft=s=>{const e=H.value.find(o=>o.id===s);return e?e.title:"未知商品"},je=s=>H.value.filter(e=>e.product_type==="fake"&&e.b_page_product_id===s),Kt=s=>{const e=H.value.find(o=>o.id===s);e&&he(e)},It=s=>{h.value=s,W.value="",ge.value="",L.current=1,Y.value=!0,ve()},ve=async()=>{fe.value=!0;try{const s={page:L.current,size:L.size,product_type:"fake",title:ge.value||void 0},{data:e}=await Ne(s);me.value=e.list.filter(o=>!o.b_page_product_id),L.total=e.total}catch{p.error("加载仿品商品列表失败")}finally{fe.value=!1}},jt=()=>{L.current=1,ve()},Tt=s=>{L.size=s,ve()},Lt=s=>{L.current=s,ve()},Dt=async()=>{if(!(!W.value||!h.value))try{await pl(W.value,h.value.id),p.success("仿品关联成功"),Y.value=!1,G()}catch{p.error("仿品关联失败")}},At=()=>{h.value&&(Y.value=!1,q.value="基于正品创建仿品",Object.assign(c,{id:null,spu_id:"",title:`${h.value.title} - 仿品版`,sell_price:Math.round((h.value.sell_price||0)*.6),origin_price:h.value.sell_price||0,discount:40,image_urls:[...h.value.image_urls||[]],rich_text_content:h.value.rich_text_content||"",specification_list:[...h.value.specification_list||[]],variants:[...h.value.variants||[]],status:"draft",product_type:"fake",b_page_product_id:h.value.id,country:h.value.country||"JA"}),ce.value=(h.value.image_urls||[]).map((s,e)=>({name:`image_${e}.jpg`,url:s,response:{success:!0,data:{url:s,file_name:`image_${e}.jpg`}}})),Se(),j.value=!0,p.success(`已基于正品"${h.value.title}"创建仿品，请修改相关信息后保存`))};return Xt(()=>{G()}),(s,e)=>{const o=y("el-icon"),V=y("el-input"),_=y("el-form-item"),C=y("el-option"),ne=y("el-select"),S=y("el-tag"),w=y("el-button"),ze=y("el-form"),ye=y("el-card"),Z=y("el-avatar"),z=y("el-table-column"),Te=y("el-tooltip"),Le=y("el-table"),De=y("el-pagination"),O=y("el-input-number"),P=y("el-col"),R=y("el-row"),ue=y("el-radio"),Ae=y("el-radio-group"),Et=y("el-upload"),ke=y("el-dialog"),Mt=y("el-alert"),Bt=y("el-divider"),Ot=y("el-image"),Rt=y("el-empty"),xe=Yt("loading");return u(),f("div",wl,[t(ye,{class:"search-card",shadow:"never"},{default:l(()=>[t(ze,{model:F,inline:"",class:"search-form"},{default:l(()=>[t(_,{label:"商品标题"},{default:l(()=>[t(V,{modelValue:F.title,"onUpdate:modelValue":e[0]||(e[0]=a=>F.title=a),placeholder:"请输入商品标题",clearable:"",style:{width:"200px"},onKeyup:el(we,["enter"])},{prefix:l(()=>[t(o,null,{default:l(()=>[t(m(Ce))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"状态"},{default:l(()=>[t(ne,{modelValue:F.status,"onUpdate:modelValue":e[1]||(e[1]=a=>F.status=a),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:l(()=>[t(C,{label:"上架",value:"active"}),t(C,{label:"下架",value:"inactive"}),t(C,{label:"草稿",value:"draft"})]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"商品类型"},{default:l(()=>[t(ne,{modelValue:F.product_type,"onUpdate:modelValue":e[2]||(e[2]=a=>F.product_type=a),placeholder:"请选择类型",clearable:"",style:{width:"120px"}},{default:l(()=>[t(C,{label:"全部",value:""},{default:l(()=>[t(S,{type:"info",size:"small"},{default:l(()=>[...e[39]||(e[39]=[n("全部",-1)])]),_:1})]),_:1}),t(C,{label:"正品",value:"original"},{default:l(()=>[t(S,{type:"success",size:"small"},{default:l(()=>[...e[40]||(e[40]=[n("正品",-1)])]),_:1})]),_:1}),t(C,{label:"仿品",value:"fake"},{default:l(()=>[t(S,{type:"warning",size:"small"},{default:l(()=>[...e[41]||(e[41]=[n("仿品",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(_,null,{default:l(()=>[t(w,{type:"primary",onClick:we},{default:l(()=>[t(o,null,{default:l(()=>[t(m(Ce))]),_:1}),e[42]||(e[42]=n(" 搜索 ",-1))]),_:1}),t(w,{onClick:ot},{default:l(()=>[t(o,null,{default:l(()=>[t(m(Be))]),_:1}),e[43]||(e[43]=n(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(ye,{class:"table-card",shadow:"never"},{header:l(()=>[i("div",hl,[i("div",Ul,[t(w,{type:"primary",onClick:nt},{default:l(()=>[t(o,null,{default:l(()=>[t(m(le))]),_:1}),e[44]||(e[44]=n(" 添加商品 ",-1))]),_:1}),e[45]||(e[45]=i("span",null,"商品列表",-1)),t(S,{type:"info",size:"small"},{default:l(()=>[n(b(K.total)+" 条记录",1)]),_:1})]),i("div",Sl,[t(w,{size:"small",onClick:G},{default:l(()=>[t(o,null,{default:l(()=>[t(m(Be))]),_:1}),e[46]||(e[46]=n(" 刷新 ",-1))]),_:1})])])]),default:l(()=>[$e((u(),$(Le,{data:H.value,stripe:"",border:"",style:{width:"100%"},"header-cell-style":{background:"#f8f9fa",color:"#606266"}},{default:l(()=>[t(z,{prop:"title",label:"商品标题","min-width":"200","show-overflow-tooltip":""},{default:l(({row:a})=>[i("div",zl,[a.image_urls&&a.image_urls[0]?(u(),$(Z,{key:0,size:40,class:"product-avatar"},{default:l(()=>[i("img",{src:a.image_urls[0],alt:a.title,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,xl)]),_:2},1024)):(u(),$(Z,{key:1,size:40,class:"product-avatar"},{default:l(()=>[t(o,null,{default:l(()=>[t(m(be))]),_:1})]),_:1})),i("div",Cl,[i("div",$l,b(a.title),1),i("div",Pl,b(a.sell_price?"¥"+a.sell_price:"暂未定价"),1)])])]),_:1}),t(z,{prop:"sell_price",label:"销售价",width:"90",align:"center"},{default:l(({row:a})=>[a.sell_price?(u(),f("span",Fl," ¥"+b(a.sell_price),1)):(u(),f("span",Kl,"--"))]),_:1}),t(z,{prop:"origin_price",label:"原价",width:"90",align:"center"},{default:l(({row:a})=>[a.origin_price&&a.origin_price>0?(u(),f("span",Il," ¥"+b(a.origin_price),1)):(u(),f("span",jl,"--"))]),_:1}),t(z,{prop:"discount",label:"折扣",width:"80",align:"center"},{default:l(({row:a})=>[a.discount&&a.discount>0?(u(),$(S,{key:0,type:"success",size:"small"},{default:l(()=>[n(b(a.discount)+"% OFF ",1)]),_:2},1024)):(u(),f("span",Tl,"--"))]),_:1}),t(z,{prop:"product_type",label:"类型",width:"100",align:"center"},{default:l(({row:a})=>[t(S,{type:a.product_type==="original"?"success":"warning",size:"small"},{default:l(()=>[n(b(a.product_type==="original"?"正品":"仿品"),1)]),_:2},1032,["type"])]),_:1}),t(z,{label:"关联关系",width:"150",align:"center"},{default:l(({row:a})=>[a.product_type==="original"?(u(),f("div",Ll,[je(a.id).length>0?(u(),f("div",Dl,[(u(!0),f(Q,null,te(je(a.id),x=>(u(),$(Te,{key:x.id,content:`仿品: ${x.title}`,placement:"top"},{default:l(()=>[t(S,{type:"warning",size:"small",style:{margin:"2px",cursor:"pointer"},onClick:qt=>he(x)},{default:l(()=>[...e[47]||(e[47]=[n(" 仿品 ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["content"]))),128))])):(u(),f("span",Al,"-"))])):a.b_page_product_id?(u(),f("div",El,[t(Te,{content:`关联正品: ${Ft(a.b_page_product_id)}`,placement:"top"},{default:l(()=>[t(S,{type:"info",size:"small",style:{cursor:"pointer"},onClick:x=>Kt(a.b_page_product_id)},{default:l(()=>[...e[48]||(e[48]=[n(" 已关联 ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["content"])])):(u(),f("span",Ml,"未关联"))]),_:1}),t(z,{prop:"country",label:"国家",width:"80",align:"center"},{default:l(({row:a})=>[t(S,{type:"primary",size:"small"},{default:l(()=>[n(b(a.country||"JA"),1)]),_:2},1024)]),_:1}),t(z,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(({row:a})=>[t(S,{type:lt(a.status),size:"small",effect:"light"},{default:l(()=>[n(b(at(a.status)),1)]),_:2},1032,["type"])]),_:1}),t(z,{prop:"view_count",label:"浏览量",width:"100",align:"center"},{default:l(({row:a})=>[i("div",Bl,[t(o,{class:"count-icon"},{default:l(()=>[t(m(Oe))]),_:1}),i("span",null,b(a.view_count||0),1)])]),_:1}),t(z,{prop:"sale_count",label:"销量",width:"100",align:"center"},{default:l(({row:a})=>[i("div",Ol,[t(o,{class:"count-icon"},{default:l(()=>[t(m(tl))]),_:1}),i("span",null,b(a.sale_count||0),1)])]),_:1}),t(z,{prop:"created_at",label:"创建时间",width:"180","show-overflow-tooltip":""},{default:l(({row:a})=>[i("div",Rl,[t(o,{class:"time-icon"},{default:l(()=>[t(m(ll))]),_:1}),i("span",null,b(a.created_at),1)])]),_:1}),t(z,{label:"操作",width:"350",fixed:"right",align:"center"},{default:l(({row:a})=>[i("div",ql,[t(w,{size:"small",type:"primary",link:"",onClick:x=>he(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(m(Oe))]),_:1}),e[49]||(e[49]=n(" 查看 ",-1))]),_:1},8,["onClick"]),t(w,{size:"small",type:"success",link:"",onClick:x=>bt(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(m(al))]),_:1}),e[50]||(e[50]=n(" SKU管理 ",-1))]),_:1},8,["onClick"]),a.product_type==="original"?(u(),$(w,{key:0,size:"small",type:"info",link:"",onClick:x=>It(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(m(le))]),_:1}),e[51]||(e[51]=n(" 关联仿品 ",-1))]),_:1},8,["onClick"])):D("",!0),t(w,{size:"small",type:"warning",link:"",onClick:x=>ut(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(m(Ge))]),_:1}),e[52]||(e[52]=n(" 编辑 ",-1))]),_:1},8,["onClick"]),t(w,{size:"small",type:"danger",link:"",onClick:x=>dt(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(m(Ke))]),_:1}),e[53]||(e[53]=n(" 删除 ",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[xe,U.value]]),i("div",Nl,[t(De,{"current-page":K.current,"onUpdate:currentPage":e[3]||(e[3]=a=>K.current=a),"page-size":K.size,"onUpdate:pageSize":e[4]||(e[4]=a=>K.size=a),"page-sizes":[10,20,50,100],total:K.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:pt,onCurrentChange:ct},null,8,["current-page","page-size","total"])])]),_:1}),t(ke,{modelValue:j.value,"onUpdate:modelValue":e[15]||(e[15]=a=>j.value=a),title:q.value,fullscreen:!0,"close-on-click-modal":!1,"destroy-on-close":"",class:"product-dialog"},{footer:l(()=>[i("div",Zl,[t(w,{onClick:e[14]||(e[14]=a=>j.value=!1)},{default:l(()=>[...e[70]||(e[70]=[n("取消",-1)])]),_:1}),t(w,{type:"primary",onClick:rt,loading:I.value},{default:l(()=>[...e[71]||(e[71]=[n(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[t(ze,{model:c,rules:Ye,ref_key:"formRef",ref:E,"label-width":"100px",class:"product-form"},{default:l(()=>[t(_,{label:"SPU ID"},{default:l(()=>[t(V,{modelValue:c.spu_id,"onUpdate:modelValue":e[5]||(e[5]=a=>c.spu_id=a),placeholder:"保存后生成",readonly:""},null,8,["modelValue"]),e[54]||(e[54]=i("div",{class:"form-tip"},"SPU ID由后端自动生成，创建商品后自动显示",-1))]),_:1}),t(_,{label:"商品标题",prop:"title"},{default:l(()=>[t(V,{modelValue:c.title,"onUpdate:modelValue":e[6]||(e[6]=a=>c.title=a),placeholder:"请输入商品标题"},null,8,["modelValue"])]),_:1}),t(R,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(_,{label:"销售价格",prop:"sell_price"},{default:l(()=>[t(O,{modelValue:c.sell_price,"onUpdate:modelValue":e[7]||(e[7]=a=>c.sell_price=a),precision:2,min:0,placeholder:"请输入销售价格",style:{width:"100%"}},{append:l(()=>[...e[55]||(e[55]=[n("元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(_,{label:"原价",prop:"origin_price"},{default:l(()=>[t(O,{modelValue:c.origin_price,"onUpdate:modelValue":e[8]||(e[8]=a=>c.origin_price=a),precision:2,min:0,placeholder:"请输入原价",style:{width:"100%"}},{append:l(()=>[...e[56]||(e[56]=[n("元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(R,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(_,{label:"折扣(%)",prop:"discount"},{default:l(()=>[t(O,{modelValue:c.discount,"onUpdate:modelValue":e[9]||(e[9]=a=>c.discount=a),precision:0,min:0,max:100,placeholder:"请输入折扣",style:{width:"100%"}},{append:l(()=>[...e[57]||(e[57]=[n("%",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(_,{label:"状态",prop:"status"},{default:l(()=>[t(ne,{modelValue:c.status,"onUpdate:modelValue":e[10]||(e[10]=a=>c.status=a),style:{width:"100%"}},{default:l(()=>[t(C,{label:"上架",value:"active"},{default:l(()=>[t(S,{type:"success",size:"small"},{default:l(()=>[...e[58]||(e[58]=[n("上架",-1)])]),_:1})]),_:1}),t(C,{label:"下架",value:"inactive"},{default:l(()=>[t(S,{type:"danger",size:"small"},{default:l(()=>[...e[59]||(e[59]=[n("下架",-1)])]),_:1})]),_:1}),t(C,{label:"草稿",value:"draft"},{default:l(()=>[t(S,{type:"warning",size:"small"},{default:l(()=>[...e[60]||(e[60]=[n("草稿",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(R,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(_,{label:"商品类型",prop:"product_type"},{default:l(()=>[t(Ae,{modelValue:c.product_type,"onUpdate:modelValue":e[11]||(e[11]=a=>c.product_type=a),onChange:$t},{default:l(()=>[t(ue,{value:"original"},{default:l(()=>[t(S,{type:"success",size:"small"},{default:l(()=>[...e[61]||(e[61]=[n("正品",-1)])]),_:1}),e[62]||(e[62]=n(" 正品商品 ",-1))]),_:1}),t(ue,{value:"fake"},{default:l(()=>[t(S,{type:"warning",size:"small"},{default:l(()=>[...e[63]||(e[63]=[n("仿品",-1)])]),_:1}),e[64]||(e[64]=n(" 仿品商品 ",-1))]),_:1})]),_:1},8,["modelValue"]),e[65]||(e[65]=i("div",{class:"form-tip"},"正品：用户默认看到的商品；仿品：替代展示的商品",-1))]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[c.product_type==="fake"?(u(),$(_,{key:0,label:"关联正品",prop:"b_page_product_id"},{default:l(()=>[t(ne,{modelValue:c.b_page_product_id,"onUpdate:modelValue":e[12]||(e[12]=a=>c.b_page_product_id=a),placeholder:"请选择对应的正品商品",filterable:"",remote:"","remote-method":Pt,loading:oe.value,style:{width:"100%"}},{default:l(()=>[(u(!0),f(Q,null,te(_e.value,a=>(u(),$(C,{key:a.id,label:`${a.title} - ¥${a.sell_price}`,value:a.id},{default:l(()=>[i("div",Jl,[i("span",null,b(a.title),1),i("span",Wl,"¥"+b(a.sell_price),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),e[66]||(e[66]=i("div",{class:"form-tip"},"选择这个仿品对应的正品商品",-1))]),_:1})):D("",!0)]),_:1})]),_:1}),t(R,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(_,{label:"目标国家",prop:"country"},{default:l(()=>[t(ne,{modelValue:c.country,"onUpdate:modelValue":e[13]||(e[13]=a=>c.country=a),placeholder:"请选择目标国家",style:{width:"100%"}},{default:l(()=>[(u(),f(Q,null,te(He,a=>t(C,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e[67]||(e[67]=i("div",{class:"form-tip"},"选择商品投放的目标国家/地区",-1))]),_:1})]),_:1})]),_:1}),t(_,{label:"商品图片",prop:"image_urls"},{default:l(()=>[t(Et,{class:"upload-demo",drag:"",action:Ie.value,multiple:"","file-list":ce.value,"before-upload":_t,"on-success":mt,"on-remove":ft,"on-error":gt,"list-type":"picture-card",accept:"image/*"},{default:l(()=>[t(o,{class:"el-icon--upload"},{default:l(()=>[t(m(Re))]),_:1}),e[68]||(e[68]=i("div",{class:"el-upload__text"},[n("将图片拖到此处，或"),i("em",null,"点击上传")],-1))]),_:1},8,["action","file-list"])]),_:1}),t(_,{label:"商品描述",prop:"rich_text_content"},{default:l(()=>[i("div",{class:Fe(["wang-editor-wrapper",ee.value?"fullscreen":""])},[t(nl,{value:c.rich_text_content||"",height:Qe.value,"editor-config":Xe.value,"onUpdate:value":yt},null,8,["value","height","editor-config"]),i("div",Gl,[t(w,{size:"small",onClick:vt,title:"调整编辑器大小"},{default:l(()=>[t(o,null,{default:l(()=>[ee.value?(u(),$(m(sl),{key:0})):(u(),$(m(il),{key:1}))]),_:1}),n(" "+b(ee.value?"恢复":"全屏编辑"),1)]),_:1}),t(w,{size:"small",onClick:kt,title:"清空内容"},{default:l(()=>[t(o,null,{default:l(()=>[t(m(Ke))]),_:1}),e[69]||(e[69]=n(" 清空内容 ",-1))]),_:1})])],2)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(ke,{modelValue:N.value,"onUpdate:modelValue":e[16]||(e[16]=a=>N.value=a),title:"SKU管理",width:"1200px","close-on-click-modal":!1,"destroy-on-close":""},{default:l(()=>[i("div",Hl,[i("div",Ql,[i("div",Xl,[e[73]||(e[73]=i("h3",null,"SKU列表",-1)),t(w,{type:"primary",onClick:ht},{default:l(()=>[t(o,null,{default:l(()=>[t(m(le))]),_:1}),e[72]||(e[72]=n(" 添加SKU ",-1))]),_:1})]),$e((u(),$(Le,{data:pe.value,stripe:"",border:"",style:{width:"100%"}},{default:l(()=>[t(z,{label:"图片",width:"80",align:"center"},{default:l(({row:a})=>[a.main_image?(u(),$(Z,{key:0,size:50,class:"sku-avatar"},{default:l(()=>[i("img",{src:a.main_image,alt:a.sku_name,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Yl)]),_:2},1024)):(u(),$(Z,{key:1,size:50,class:"sku-avatar"},{default:l(()=>[t(o,null,{default:l(()=>[t(m(be))]),_:1})]),_:1}))]),_:1}),t(z,{prop:"sku_code",label:"SKU编码",width:"120"}),t(z,{prop:"sku_name",label:"SKU名称",width:"150"}),t(z,{label:"属性组合","min-width":"200"},{default:l(({row:a})=>[i("div",ea,[(u(!0),f(Q,null,te(a.attributes,x=>(u(),$(S,{key:x.attribute_name,size:"small",class:"attr-tag"},{default:l(()=>[n(b(x.display_name)+": "+b(x.display_value),1)]),_:2},1024))),128))])]),_:1}),t(z,{prop:"sell_price",label:"销售价格",width:"100",align:"center"},{default:l(({row:a})=>[i("span",ta,"¥"+b(a.sell_price),1)]),_:1}),t(z,{prop:"discount_percent",label:"折扣",width:"80",align:"center"},{default:l(({row:a})=>[a.discount_percent&&a.discount_percent>0?(u(),$(S,{key:0,type:"success",size:"small"},{default:l(()=>[n(b(a.discount_percent)+"% ",1)]),_:2},1024)):(u(),f("span",la,"--"))]),_:1}),t(z,{prop:"stock_quantity",label:"库存",width:"80",align:"center"}),t(z,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(({row:a})=>[t(S,{type:st(a.status),size:"small"},{default:l(()=>[n(b(it(a.status)),1)]),_:2},1032,["type"])]),_:1}),t(z,{label:"操作",width:"150",align:"center"},{default:l(({row:a})=>[t(w,{size:"small",type:"primary",link:"",onClick:x=>Ut(a)},{default:l(()=>[...e[74]||(e[74]=[n("编辑",-1)])]),_:1},8,["onClick"]),t(w,{size:"small",type:"danger",link:"",onClick:x=>St(a)},{default:l(()=>[...e[75]||(e[75]=[n("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[xe,J.value]])])])]),_:1},8,["modelValue"]),t(ke,{modelValue:A.value,"onUpdate:modelValue":e[32]||(e[32]=a=>A.value=a),title:ae.value,width:"800px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[i("div",fa,[t(w,{onClick:e[31]||(e[31]=a=>A.value=!1)},{default:l(()=>[...e[85]||(e[85]=[n("取消",-1)])]),_:1}),t(w,{type:"primary",onClick:xt,loading:se.value},{default:l(()=>[...e[86]||(e[86]=[n("确定",-1)])]),_:1},8,["loading"])])]),default:l(()=>[t(ze,{model:d,rules:et,ref_key:"skuFormRef",ref:ie,"label-width":"100px"},{default:l(()=>[t(R,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(_,{label:"SKU编码",prop:"sku_code"},{default:l(()=>[t(V,{modelValue:d.sku_code,"onUpdate:modelValue":e[17]||(e[17]=a=>d.sku_code=a),placeholder:"自动生成"},null,8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(_,{label:"SKU名称",prop:"sku_name"},{default:l(()=>[t(V,{modelValue:d.sku_name,"onUpdate:modelValue":e[18]||(e[18]=a=>d.sku_name=a),placeholder:"请输入SKU名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(R,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(_,{label:"销售价格",prop:"sell_price"},{default:l(()=>[t(O,{modelValue:d.sell_price,"onUpdate:modelValue":e[19]||(e[19]=a=>d.sell_price=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(_,{label:"原价",prop:"origin_price"},{default:l(()=>[t(O,{modelValue:d.origin_price,"onUpdate:modelValue":e[20]||(e[20]=a=>d.origin_price=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(R,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(_,{label:"折扣(%)",prop:"discount_percent"},{default:l(()=>[t(O,{modelValue:d.discount_percent,"onUpdate:modelValue":e[21]||(e[21]=a=>d.discount_percent=a),min:0,max:100,precision:0,style:{width:"100%"}},{append:l(()=>[...e[76]||(e[76]=[n("%",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(_,{label:"成本价",prop:"cost_price"},{default:l(()=>[t(O,{modelValue:d.cost_price,"onUpdate:modelValue":e[22]||(e[22]=a=>d.cost_price=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(R,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(_,{label:"库存数量",prop:"stock_quantity"},{default:l(()=>[t(O,{modelValue:d.stock_quantity,"onUpdate:modelValue":e[23]||(e[23]=a=>d.stock_quantity=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(_,{label:"预警库存",prop:"warning_stock"},{default:l(()=>[t(O,{modelValue:d.warning_stock,"onUpdate:modelValue":e[24]||(e[24]=a=>d.warning_stock=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(_,{label:"SKU图片",prop:"main_image"},{default:l(()=>[t(We,{"image-url":d.main_image,"onUpdate:imageUrl":e[25]||(e[25]=a=>d.main_image=a),"file-size":2,"file-type":["image/jpg","image/jpeg","image/png","image/gif","image/webp"],drag:!0,width:"120px",height:"120px"},null,8,["image-url"])]),_:1}),t(_,{label:"SKU规格",prop:"attributes"},{default:l(()=>[i("div",aa,[t(Mt,{title:"规格设置说明",type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"16px"}},{default:l(()=>[...e[77]||(e[77]=[i("div",null,[i("p",null,"• 每个SKU的同一属性只能设置一个值（如：颜色只能是红色或蓝色，不能同时是两种）"),i("p",null,"• 不同的属性值组合应该创建不同的SKU"),i("p",null,"• 示例：颜色=红色，尺寸=L 为一个SKU；颜色=蓝色，尺寸=L 为另一个SKU")],-1)])]),_:1}),i("div",sa,[t(R,{gutter:10},{default:l(()=>[t(P,{span:8},{default:l(()=>[t(V,{modelValue:B.value,"onUpdate:modelValue":e[26]||(e[26]=a=>B.value=a),placeholder:"规格名称，如：颜色",maxlength:20,"show-word-limit":""},null,8,["modelValue"])]),_:1}),t(P,{span:12},{default:l(()=>[t(V,{modelValue:g.value,"onUpdate:modelValue":e[27]||(e[27]=a=>g.value=a),placeholder:"规格值，如：红色",maxlength:50,"show-word-limit":""},null,8,["modelValue"])]),_:1}),t(P,{span:4},{default:l(()=>[t(w,{type:"primary",onClick:Vt,disabled:!B.value||!g.value},{default:l(()=>[t(o,null,{default:l(()=>[t(m(le))]),_:1}),e[78]||(e[78]=n(" 添加 ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),k.value.length>0?(u(),f("div",ia,[t(Bt,{"content-position":"left"},{default:l(()=>[...e[79]||(e[79]=[n("已添加的规格",-1)])]),_:1}),i("div",oa,[(u(!0),f(Q,null,te(k.value,(a,x)=>(u(),f("div",{key:x,class:"spec-item"},[i("div",na,[i("span",ua,b(a.name),1),t(S,{type:"primary",size:"small"},{default:l(()=>[n(b(a.value),1)]),_:2},1024)]),t(w,{size:"small",type:"danger",link:"",onClick:qt=>wt(x),icon:"Delete"},{default:l(()=>[...e[80]||(e[80]=[n(" 删除 ",-1)])]),_:1},8,["onClick"])]))),128))])])):D("",!0)])]),_:1}),t(_,{label:"主图设置",prop:"main_image"},{default:l(()=>[i("div",da,[i("div",ra,[t(Ae,{modelValue:T.value,"onUpdate:modelValue":e[28]||(e[28]=a=>T.value=a),onChange:Ct},{default:l(()=>[t(ue,{value:"url"},{default:l(()=>[t(o,null,{default:l(()=>[t(m(qe))]),_:1}),e[81]||(e[81]=n(" URL输入 ",-1))]),_:1}),t(ue,{value:"upload"},{default:l(()=>[t(o,null,{default:l(()=>[t(m(Re))]),_:1}),e[82]||(e[82]=n(" 文件上传 ",-1))]),_:1})]),_:1},8,["modelValue"])]),T.value==="url"?(u(),f("div",pa,[t(V,{modelValue:d.main_image,"onUpdate:modelValue":e[29]||(e[29]=a=>d.main_image=a),placeholder:"请输入图片URL地址",clearable:""},{prepend:l(()=>[t(o,null,{default:l(()=>[t(m(qe))]),_:1})]),_:1},8,["modelValue"]),d.main_image?(u(),f("div",ca,[t(Ot,{src:d.main_image,fit:"cover",style:{width:"80px",height:"80px","border-radius":"4px"},"preview-src-list":[d.main_image],"preview-teleported":""},{error:l(()=>[i("div",_a,[t(o,null,{default:l(()=>[t(m(ol))]),_:1}),e[83]||(e[83]=i("span",null,"加载失败",-1))])]),_:1},8,["src","preview-src-list"])])):D("",!0)])):D("",!0),T.value==="upload"?(u(),f("div",ma,[t(We,{"image-url":d.main_image,"onUpdate:imageUrl":e[30]||(e[30]=a=>d.main_image=a),height:"120px",width:"120px","file-size":2,"file-type":["image/jpeg","image/png","image/gif","image/webp"]},{tip:l(()=>[...e[84]||(e[84]=[i("div",{class:"upload-tip"},"支持 JPG、PNG、GIF、WebP 格式，文件大小不超过 2MB",-1)])]),_:1},8,["image-url"])])):D("",!0)])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(ke,{modelValue:Y.value,"onUpdate:modelValue":e[38]||(e[38]=a=>Y.value=a),title:"选择关联仿品",width:"1000px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[i("div",Ia,[t(w,{onClick:e[37]||(e[37]=a=>Y.value=!1)},{default:l(()=>[...e[92]||(e[92]=[n("取消",-1)])]),_:1}),t(w,{type:"primary",onClick:Dt,disabled:!W.value},{default:l(()=>[...e[93]||(e[93]=[n(" 确定关联 ",-1)])]),_:1},8,["disabled"])])]),default:l(()=>[i("div",ga,[t(ye,{class:"current-product-card",shadow:"never"},{header:l(()=>[...e[87]||(e[87]=[i("span",{style:{"font-weight":"600",color:"#409eff"}},"当前正品商品",-1)])]),default:l(()=>[h.value?(u(),f("div",va,[h.value.image_urls&&h.value.image_urls[0]?(u(),$(Z,{key:0,size:60},{default:l(()=>[i("img",{src:h.value.image_urls[0],alt:h.value.title,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,ya)]),_:1})):(u(),$(Z,{key:1,size:60},{default:l(()=>[t(o,null,{default:l(()=>[t(m(be))]),_:1})]),_:1})),i("div",ka,[i("div",ba,b(h.value.title),1),i("div",Va,"¥"+b(h.value.sell_price),1),t(S,{type:"success",size:"small"},{default:l(()=>[...e[88]||(e[88]=[n("正品",-1)])]),_:1})])])):D("",!0)]),_:1}),t(ye,{class:"fake-selection-card",shadow:"never"},{header:l(()=>[i("div",wa,[e[90]||(e[90]=i("span",{style:{"font-weight":"600"}},"选择要关联的仿品",-1)),t(w,{type:"primary",size:"small",onClick:At},{default:l(()=>[t(o,null,{default:l(()=>[t(m(le))]),_:1}),e[89]||(e[89]=n(" 创建新仿品 ",-1))]),_:1})])]),default:l(()=>[i("div",ha,[t(V,{modelValue:ge.value,"onUpdate:modelValue":e[33]||(e[33]=a=>ge.value=a),placeholder:"搜索仿品商品...",clearable:"",onInput:jt,style:{width:"300px"}},{prefix:l(()=>[t(o,null,{default:l(()=>[t(m(Ce))]),_:1})]),_:1},8,["modelValue"])]),$e((u(),f("div",Ua,[(u(!0),f(Q,null,te(me.value,a=>(u(),f("div",{key:a.id,class:Fe(["fake-product-card",{active:W.value===a.id}]),onClick:x=>W.value=a.id},[a.image_urls&&a.image_urls[0]?(u(),$(Z,{key:0,size:28},{default:l(()=>[i("img",{src:a.image_urls[0],alt:a.title,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,za)]),_:2},1024)):(u(),$(Z,{key:1,size:28},{default:l(()=>[t(o,null,{default:l(()=>[t(m(be))]),_:1})]),_:1})),i("div",xa,[i("div",Ca,b(a.title),1),i("div",$a,"¥"+b(a.sell_price),1),t(S,{type:"warning",size:"small",style:{padding:"1px 4px","font-size":"10px"}},{default:l(()=>[...e[91]||(e[91]=[n("仿品",-1)])]),_:1})]),i("div",Pa,[t(ue,{value:a.id,modelValue:W.value,"onUpdate:modelValue":e[34]||(e[34]=x=>W.value=x)},null,8,["value","modelValue"])])],10,Sa))),128)),!fe.value&&me.value.length===0?(u(),f("div",Fa,[t(Rt,{description:"暂无可关联的仿品商品"})])):D("",!0)])),[[xe,fe.value]]),me.value.length>0?(u(),f("div",Ka,[t(De,{"current-page":L.current,"onUpdate:currentPage":e[35]||(e[35]=a=>L.current=a),"page-size":L.size,"onUpdate:pageSize":e[36]||(e[36]=a=>L.size=a),"page-sizes":[12,24,48],total:L.total,layout:"total, sizes, prev, pager, next",onSizeChange:Tt,onCurrentChange:Lt,small:""},null,8,["current-page","page-size","total"])])):D("",!0)]),_:1})])]),_:1},8,["modelValue"])])}}}),Ma=Ze(Ta,[["__scopeId","data-v-17461525"]]);export{Ma as default};
