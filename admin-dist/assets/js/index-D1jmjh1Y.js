import{u as y}from"./useHandleData-thvCSyl3.js";import{I as B,u as L}from"./index-Cup8frhy.js";import{g as V,u as I,_ as N}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-CFKyPVSq.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-DRz0uPJo.js";import{T as A}from"./index-CnpGz9pz.js";import{S as E}from"./index-eiPabDKu.js";import{d as C,h as d,P as f,Z as q,a8 as M,r as H,c as j,o as G,b as s,a as _,u as o,w as i,aG as O,e as n,T as W,E as Z,U as z,S as J,i as K,V as Q,aU as X,a0 as Y,N as b}from"./index-DsqJDd-_.js";import{k as ee,g as ae,c as te,d as le,r as se,e as k,B as re,h as oe,i as ie}from"./user-c8NP7-mB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Imgs-D9_aRVcW.js";import"./upload-DA2EahYp.js";import"./sortable.esm-xXTzzsvS.js";const ne={class:"main-box"},ue={class:"table-box"},de={class:"card mb10 pt0 pb0"},pe=C({name:"useSelectFilter"}),he=C({...pe,setup(ce){const l=d(),T=f([{type:"radio",label:"单选",width:80},{type:"index",label:"#",width:80},{prop:"username",label:"用户姓名",width:120},{prop:"gender",label:"性别",width:120,sortable:!0,enum:V},{prop:"idCard",label:"身份证号"},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"},{prop:"status",label:"用户状态",width:120,sortable:!0,tag:!0,enum:I},{prop:"createTime",label:"创建时间",width:180,sortable:!0},{prop:"operation",label:"操作",width:330,fixed:"right"}]),v=f([{title:"用户状态(单)",key:"userStatus",options:[{label:"全部",value:""},{label:"在职",value:"1",icon:"User"},{label:"待培训",value:"2",icon:"Bell"},{label:"待上岗",value:"3",icon:"Clock"},{label:"已离职",value:"4",icon:"CircleClose"},{label:"已退休",value:"5",icon:"CircleCheck"}]},{title:"用户角色(多)",key:"userRole",multiple:!0,options:[]}]);q(()=>U());const U=async()=>{const{data:a}=await ee();v[1].options=a},p=d({userStatus:"2",userRole:["1","3"]}),h=a=>{b.success("请注意查看请求参数变化 🤔"),l.value.pageable.pageNum=1,p.value=a},c=f({departmentId:["11"]}),x=a=>{b.success("请注意查看请求参数变化 🤔"),l.value.pageable.pageNum=1,c.departmentId=a},$=()=>{var a,e,t,r;l.value.radio=(a=l.value)==null?void 0:a.tableData[3].id,(r=(e=l.value)==null?void 0:e.element)==null||r.setCurrentRow((t=l.value)==null?void 0:t.tableData[3])};M(()=>{var a;return(a=l.value)==null?void 0:a.radio},()=>{var a,e;return((a=l.value)==null?void 0:a.radio)&&b.success(`选中 id 为【${(e=l.value)==null?void 0:e.radio}】的数据`)});const F=async a=>{var e;await y(le,{id:[a.id]},`删除【${a.username}】用户`),(e=l.value)==null||e.getTableList()},R=async a=>{var e;await y(se,{id:a.id},`重置【${a.username}】用户密码`),(e=l.value)==null||e.getTableList()},D=async()=>{Y.confirm("确认导出用户数据?","温馨提示",{type:"warning"}).then(()=>{var a;return L(k,"用户列表",(a=l.value)==null?void 0:a.searchParam)})},g=d(null),S=()=>{var e,t;const a={title:"用户",tempApi:k,importApi:re,getTableList:(e=l.value)==null?void 0:e.getTableList};(t=g.value)==null||t.acceptParams(a)},w=d(null),m=(a,e={})=>{var r,u;const t={title:a,isView:a==="查看",row:{...e},api:a==="新增"?oe:a==="编辑"?ie:void 0,getTableList:(r=l.value)==null?void 0:r.getTableList};(u=w.value)==null||u.acceptParams(t)};return(a,e)=>{const t=H("el-button");return G(),j("div",ne,[s(A,{title:"部门列表(多选)",multiple:"",label:"name","request-api":o(ae),"default-value":c.departmentId,onChange:x},null,8,["request-api","default-value"]),_("div",ue,[_("div",de,[s(E,{data:v,"default-values":p.value,onChange:h},null,8,["data","default-values"])]),s(P,{ref_key:"proTable",ref:l,"highlight-current-row":"",columns:T,"request-api":o(te),"init-param":Object.assign(c,p.value)},{tableHeader:i(()=>[s(t,{type:"primary",icon:o(J),onClick:e[0]||(e[0]=r=>m("新增"))},{default:i(()=>[...e[1]||(e[1]=[n("新增用户",-1)])]),_:1},8,["icon"]),s(t,{type:"primary",icon:o(K),plain:"",onClick:S},{default:i(()=>[...e[2]||(e[2]=[n("批量添加用户",-1)])]),_:1},8,["icon"]),s(t,{type:"primary",icon:o(Q),plain:"",onClick:D},{default:i(()=>[...e[3]||(e[3]=[n("导出用户数据",-1)])]),_:1},8,["icon"]),s(t,{type:"primary",icon:o(X),plain:"",onClick:$},{default:i(()=>[...e[4]||(e[4]=[n("选中第四行",-1)])]),_:1},8,["icon"])]),operation:i(r=>[s(t,{type:"primary",link:"",icon:o(O),onClick:u=>m("查看",r.row)},{default:i(()=>[...e[5]||(e[5]=[n("查看",-1)])]),_:1},8,["icon","onClick"]),s(t,{type:"primary",link:"",icon:o(W),onClick:u=>m("编辑",r.row)},{default:i(()=>[...e[6]||(e[6]=[n("编辑",-1)])]),_:1},8,["icon","onClick"]),s(t,{type:"primary",link:"",icon:o(Z),onClick:u=>R(r.row)},{default:i(()=>[...e[7]||(e[7]=[n("重置密码",-1)])]),_:1},8,["icon","onClick"]),s(t,{type:"primary",link:"",icon:o(z),onClick:u=>F(r.row)},{default:i(()=>[...e[8]||(e[8]=[n("删除",-1)])]),_:1},8,["icon","onClick"])]),_:1},8,["columns","request-api","init-param"]),s(N,{ref_key:"drawerRef",ref:w},null,512),s(B,{ref_key:"dialogRef",ref:g},null,512)])])}}});export{he as default};
