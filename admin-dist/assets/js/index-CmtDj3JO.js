import{d as b,h as d,P as W,aq as R,ar as q,as as G,at as J,Z as K,r as n,Q,c as y,o as u,b as a,w as s,F as Z,f as j,g,a as o,z as H,y as X,t as m,W as ee,e as k,u as te,au as ae,M as oe,N as se}from"./index-2V8v6Wus.js";import"./index-BpCvQqaw.js";import{O as le,a as ne,g as re}from"./order-P34lO5Uw.js";import{aU as D}from"./installCanvasRenderer-Bf4uGEF_.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ce="/assets/png/welcome-VFYC1WKN.png",ie={class:"order-statistics-component"},de={class:"stat-content"},ue={class:"stat-info"},_e={class:"stat-value"},pe={class:"stat-label"},me={class:"chart-header"},ve={class:"table-header"},fe={class:"amount"},he=b({__name:"index",setup(O){const v=d(!1),c=d([new Date(Date.now()-30*24*60*60*1e3).toISOString().slice(0,10),new Date().toISOString().slice(0,10)]),f=d(),w=d(),A=d(null),_=W([{key:"total",label:"总订单数",value:"0",icon:R,color:"#409EFF"},{key:"amount",label:"总销售额",value:"¥0",icon:q,color:"#67C23A"},{key:"pending",label:"待处理",value:"0",icon:G,color:"#E6A23C"},{key:"completed",label:"已完成",value:"0",icon:J,color:"#67C23A"}]),S=d([]),F=e=>le[e]||"info",Y=e=>ne[e]||e,E=e=>{_[0].value=e.total_orders.toLocaleString();const t=L(e.currency);_[1].value=`${t}${e.total_amount.toLocaleString()}`,_[2].value=e.pending_orders.toLocaleString(),_[3].value=e.completed_orders.toLocaleString()},L=e=>({JPY:"¥",USD:"$",EUR:"€",CNY:"¥",GBP:"£"})[e]||e,$=e=>{const t=D(f.value),i={title:{text:"订单趋势",left:"center",textStyle:{fontSize:14,color:"#666"}},tooltip:{trigger:"axis"},legend:{data:["订单数量","销售额"],bottom:0},xAxis:{type:"category",data:e.trend_data.dates},yAxis:[{type:"value",name:"订单数",position:"left"},{type:"value",name:"销售额",position:"right"}],series:[{name:"订单数量",type:"line",data:e.trend_data.order_counts,smooth:!0,itemStyle:{color:"#409EFF"}},{name:"销售额",type:"bar",yAxisIndex:1,data:e.trend_data.amounts,itemStyle:{color:"#67C23A"}}]};t.setOption(i),window.addEventListener("resize",()=>{t.resize()})},M=e=>{const t=D(w.value),i={title:{text:"订单状态分布",left:"center",textStyle:{fontSize:14,color:"#666"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"订单状态",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:e.status_distribution.map(r=>({value:r.value,name:r.name,itemStyle:{color:T(r.status)}}))}]};t.setOption(i),window.addEventListener("resize",()=>{t.resize()})},T=e=>({pending:"#E6A23C",confirmed:"#409EFF",processing:"#909399",shipped:"#67C23A",delivered:"#67C23A",cancelled:"#F56C6C",refunded:"#F56C6C"})[e]||"#909399",V=e=>{e&&C()},C=async()=>{v.value=!0;try{const{data:e}=await re({start_date:c.value[0],end_date:c.value[1],limit:5});A.value=e,S.value=e.recent_orders,E(e),await oe(),$(e),M(e)}catch(e){console.error("加载统计数据失败:",e),se.error("加载统计数据失败")}finally{v.value=!1}};return K(async()=>{await C()}),(e,t)=>{const i=n("el-icon"),r=n("el-card"),h=n("el-col"),x=n("el-row"),N=n("el-date-picker"),B=n("el-button"),p=n("el-table-column"),I=n("el-tag"),U=n("el-table"),P=Q("loading");return u(),y("div",ie,[a(x,{gutter:20,class:"stats-cards"},{default:s(()=>[(u(!0),y(Z,null,j(_,l=>(u(),g(h,{xs:24,sm:12,md:6,key:l.key},{default:s(()=>[a(r,{class:"stat-card",shadow:"hover"},{default:s(()=>[o("div",de,[o("div",{class:"stat-icon",style:H({backgroundColor:l.color})},[a(i,{size:24},{default:s(()=>[(u(),g(X(l.icon)))]),_:2},1024)],4),o("div",ue,[o("div",_e,m(l.value),1),o("div",pe,m(l.label),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(x,{gutter:20,class:"charts-section"},{default:s(()=>[a(h,{xs:24,lg:12},{default:s(()=>[a(r,{class:"chart-card",shadow:"never"},{header:s(()=>[o("div",me,[t[2]||(t[2]=o("span",null,"订单趋势",-1)),a(N,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:V,size:"small"},null,8,["modelValue"])])]),default:s(()=>[o("div",{ref_key:"orderTrendChart",ref:f,class:"chart-container"},null,512)]),_:1})]),_:1}),a(h,{xs:24,lg:12},{default:s(()=>[a(r,{class:"chart-card",shadow:"never"},{header:s(()=>[...t[3]||(t[3]=[o("span",null,"订单状态分布",-1)])]),default:s(()=>[o("div",{ref_key:"orderStatusChart",ref:w,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),a(r,{class:"table-card",shadow:"never"},{header:s(()=>[o("div",ve,[t[5]||(t[5]=o("span",null,"最近订单",-1)),a(B,{type:"primary",size:"small",onClick:t[1]||(t[1]=l=>e.$router.push("/order/list"))},{default:s(()=>[t[4]||(t[4]=k(" 查看全部 ",-1)),a(i,{class:"el-icon--right"},{default:s(()=>[a(te(ae))]),_:1})]),_:1})])]),default:s(()=>[ee((u(),g(U,{data:S.value,stripe:""},{default:s(()=>[a(p,{prop:"order_number",label:"订单号",width:"180"}),a(p,{prop:"customer_name",label:"客户",width:"120"}),a(p,{prop:"total_amount",label:"金额",width:"100",align:"center"},{default:s(({row:l})=>[o("span",fe,m(l.total_amount)+" "+m(l.currency),1)]),_:1}),a(p,{prop:"status",label:"状态",width:"100",align:"center"},{default:s(({row:l})=>[a(I,{type:F(l.status),size:"small"},{default:s(()=>[k(m(Y(l.status)),1)]),_:2},1032,["type"])]),_:1}),a(p,{prop:"created_at",label:"下单时间","show-overflow-tooltip":""})]),_:1},8,["data"])),[[P,v.value]])]),_:1})])}}}),ge=z(he,[["__scopeId","data-v-7ab03bd6"]]),ye={class:"home"},be={class:"welcome-section"},we={class:"statistics-section"},Se=b({name:"home"}),Ce=b({...Se,setup(O){return(v,c)=>{const f=n("el-card");return u(),y("div",ye,[o("div",be,[a(f,{class:"welcome-card",shadow:"never"},{default:s(()=>[...c[0]||(c[0]=[o("div",{class:"welcome-content"},[o("div",{class:"welcome-text"},[o("h1",null,"欢迎使用订单管理系统"),o("p",null,"实时监控订单数据，高效管理业务流程")]),o("div",{class:"welcome-image"},[o("img",{src:ce,alt:"welcome"})])],-1)])]),_:1})]),o("div",we,[a(ge)])])}}}),Ae=z(Ce,[["__scopeId","data-v-c43976ed"]]);export{Ae as default};
