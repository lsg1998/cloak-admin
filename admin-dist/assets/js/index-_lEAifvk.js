import{d as b,h as i,P as G,aE as R,aF as W,aG as H,aH as J,Z as Q,r,Q as Z,c as y,o as d,b as t,w as o,F as j,f as q,g as h,a as l,z as K,y as X,t as f,W as ee,e as k,u as te,aI as ae,M as oe,N as se}from"./index-Bo6A_Mt9.js";import"./index-BpCvQqaw.js";import{O as le,a as re,g as ne}from"./order-Bqq9UHGm.js";import{T as ce}from"./index-c7ynTcfO.js";import{aU as D}from"./installCanvasRenderer-Bf4uGEF_.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./statistics-YJOjbwZp.js";const ie={class:"order-statistics-component"},de={class:"stat-content"},ue={class:"stat-info"},_e={class:"stat-value"},pe={class:"stat-label"},me={class:"chart-header"},fe={class:"table-header"},ve={class:"amount"},ge=b({__name:"index",setup(O){const v=i(!1),u=i([new Date(Date.now()-30*24*60*60*1e3).toISOString().slice(0,10),new Date().toISOString().slice(0,10)]),S=i(),C=i(),A=i(null),_=G([{key:"total",label:"总订单数",value:"0",icon:R,color:"#409EFF"},{key:"amount",label:"总销售额",value:"€0",icon:W,color:"#67C23A"},{key:"pending",label:"待处理",value:"0",icon:H,color:"#E6A23C"},{key:"completed",label:"已完成",value:"0",icon:J,color:"#67C23A"}]),w=i([]),E=e=>le[e]||"info",F=e=>re[e]||e,L=e=>{_[0].value=e.total_orders.toLocaleString();const a=Y(e.currency);_[1].value=`${a}${e.total_amount.toLocaleString()}`,_[2].value=e.pending_orders.toLocaleString(),_[3].value=e.completed_orders.toLocaleString()},Y=e=>({JPY:"¥",USD:"$",EUR:"€",CNY:"¥",GBP:"£"})[e]||e,T=e=>{const a=D(S.value),c={title:{text:"订单趋势",left:"center",textStyle:{fontSize:14,color:"#666"}},tooltip:{trigger:"axis"},legend:{data:["订单数量","销售额"],bottom:0},xAxis:{type:"category",data:e.trend_data.dates},yAxis:[{type:"value",name:"订单数",position:"left"},{type:"value",name:"销售额",position:"right"}],series:[{name:"订单数量",type:"line",data:e.trend_data.order_counts,smooth:!0,itemStyle:{color:"#409EFF"}},{name:"销售额",type:"bar",yAxisIndex:1,data:e.trend_data.amounts,itemStyle:{color:"#67C23A"}}]};a.setOption(c),window.addEventListener("resize",()=>{a.resize()})},M=e=>{const a=D(C.value),c={title:{text:"订单状态分布",left:"center",textStyle:{fontSize:14,color:"#666"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"订单状态",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:e.status_distribution.map(n=>({value:n.value,name:n.name,itemStyle:{color:$(n.status)}}))}]};a.setOption(c),window.addEventListener("resize",()=>{a.resize()})},$=e=>({pending:"#E6A23C",confirmed:"#409EFF",processing:"#909399",shipped:"#67C23A",delivered:"#67C23A",cancelled:"#F56C6C",refunded:"#F56C6C"})[e]||"#909399",I=e=>{e&&x()},x=async()=>{v.value=!0;try{const{data:e}=await ne({start_date:u.value[0],end_date:u.value[1],limit:5});A.value=e,w.value=e.recent_orders,L(e),await oe(),T(e),M(e)}catch(e){console.error("加载统计数据失败:",e),se.error("加载统计数据失败")}finally{v.value=!1}};return Q(async()=>{await x()}),(e,a)=>{const c=r("el-icon"),n=r("el-card"),p=r("el-col"),g=r("el-row"),V=r("el-date-picker"),B=r("el-button"),m=r("el-table-column"),N=r("el-tag"),U=r("el-table"),P=Z("loading");return d(),y("div",ie,[t(g,{gutter:20,class:"stats-cards"},{default:o(()=>[(d(!0),y(j,null,q(_,s=>(d(),h(p,{xs:24,sm:12,md:6,key:s.key},{default:o(()=>[t(n,{class:"stat-card",shadow:"hover"},{default:o(()=>[l("div",de,[l("div",{class:"stat-icon",style:K({backgroundColor:s.color})},[t(c,{size:24},{default:o(()=>[(d(),h(X(s.icon)))]),_:2},1024)],4),l("div",ue,[l("div",_e,f(s.value),1),l("div",pe,f(s.label),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(g,{gutter:20,class:"charts-section"},{default:o(()=>[t(p,{xs:24,lg:12},{default:o(()=>[t(n,{class:"chart-card",shadow:"never"},{header:o(()=>[l("div",me,[a[2]||(a[2]=l("span",null,"订单趋势",-1)),t(V,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=s=>u.value=s),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:I,size:"small"},null,8,["modelValue"])])]),default:o(()=>[l("div",{ref_key:"orderTrendChart",ref:S,class:"chart-container"},null,512)]),_:1})]),_:1}),t(p,{xs:24,lg:12},{default:o(()=>[t(ce)]),_:1})]),_:1}),t(g,{gutter:20,class:"bottom-section"},{default:o(()=>[t(p,{xs:24,lg:12},{default:o(()=>[t(n,{class:"table-card",shadow:"never"},{header:o(()=>[l("div",fe,[a[4]||(a[4]=l("span",null,"最近订单",-1)),t(B,{type:"primary",size:"small",onClick:a[1]||(a[1]=s=>e.$router.push("/order/list"))},{default:o(()=>[a[3]||(a[3]=k(" 查看全部 ",-1)),t(c,{class:"el-icon--right"},{default:o(()=>[t(te(ae))]),_:1})]),_:1})])]),default:o(()=>[ee((d(),h(U,{data:w.value,stripe:""},{default:o(()=>[t(m,{prop:"order_number",label:"订单号",width:"180"}),t(m,{prop:"customer_name",label:"客户",width:"120"}),t(m,{prop:"total_amount",label:"金额",width:"100",align:"center"},{default:o(({row:s})=>[l("span",ve,f(s.total_amount)+" "+f(s.currency),1)]),_:1}),t(m,{prop:"status",label:"状态",width:"100",align:"center"},{default:o(({row:s})=>[t(N,{type:E(s.status),size:"small"},{default:o(()=>[k(f(F(s.status)),1)]),_:2},1032,["type"])]),_:1}),t(m,{prop:"created_at",label:"下单时间","show-overflow-tooltip":""})]),_:1},8,["data"])),[[P,v.value]])]),_:1})]),_:1}),t(p,{xs:24,lg:12},{default:o(()=>[t(n,{class:"chart-card",shadow:"never"},{header:o(()=>[...a[5]||(a[5]=[l("span",null,"订单状态分布",-1)])]),default:o(()=>[l("div",{ref_key:"orderStatusChart",ref:C,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1})])}}}),he=z(ge,[["__scopeId","data-v-22689433"]]),ye={class:"home"},be=b({name:"home"}),Se=b({...be,setup(O){return(v,u)=>(d(),y("div",ye,[t(he)]))}}),Ae=z(Se,[["__scopeId","data-v-36be5fae"]]);export{Ae as default};
