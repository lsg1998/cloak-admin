import{a5 as A,d as Ve,af as Qt,h as g,ag as Xt,D as Oe,ah as Yt,ai as el,s as re,r as k,c as _,o as n,b as t,a as i,g as $,R as L,n as Te,w as l,F as H,u as f,aE as Xe,aZ as tl,U as je,q as ll,a7 as qe,N as c,$ as ae,P as de,a8 as al,Z as sl,Q as il,_ as ol,x as Pe,e as u,E as Ne,W as Fe,aB as be,t as y,f as X,aD as Je,aq as nl,aC as ul,a_ as dl,a$ as We,b0 as rl,G as pl,b1 as Ge,b2 as cl,a0 as Ke}from"./index-2V8v6Wus.js";import{c as _l}from"./cloakRule-BGoW6K2n.js";import{W as ml}from"./index-BC7Us6Zg.js";import{_ as Ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./upload-DeBNZ0OE.js";const Ze=r=>{const S=new URLSearchParams;r.page&&S.append("page",r.page.toString()),r.size&&S.append("size",r.size.toString()),r.title&&S.append("title",r.title),r.status&&S.append("status",r.status),r.product_type&&S.append("product_type",r.product_type),r.category_id&&S.append("category_id",r.category_id);const T=S.toString(),j=T?`/admin/products?${T}`:"/admin/products";return A.get(j)},fl=r=>A.post("/admin/products",r),gl=(r,S)=>A.put(`/admin/products/${r}`,S),vl=r=>A.delete(`/admin/products/${r}`),He=r=>{const S=r?{search:r}:{};return A.get("/admin/products/original/list",{params:S})},yl=(r,S)=>A.put(`/admin/products/${r}`,{product_type:"fake",b_page_product_id:S}),kl=r=>A.get(`/admin/products/${r}/skus`),bl=r=>A.post("/admin/product-skus",r),Vl=(r,S)=>A.put(`/admin/product-skus/${r}`,S),hl=r=>A.delete(`/admin/product-skus/${r}`),wl={class:"product-upload-box"},Ul=["src"],zl={key:1,class:"upload-empty"},Sl={class:"el-upload__tip"},Cl=Ve({name:"ProductUploadImg"}),xl=Ve({...Cl,props:{imageUrl:{default:""},drag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},fileSize:{default:2},fileType:{default:()=>["image/jpeg","image/png","image/gif","image/webp"]},height:{default:"150px"},width:{default:"150px"},borderRadius:{default:"8px"}},emits:["update:imageUrl","update:image-url"],setup(r,{emit:S}){Qt(v=>({v5f6650a9:v.borderRadius,v6111d75b:v.width,b14bcb9c:v.height}));const T=r,j=g("id-"+Xt()),q=g(!1),D=Oe(Yt,void 0),N=Oe(el,void 0),R=re(()=>T.disabled||(D==null?void 0:D.disabled)),se=re(()=>"https://gammtt.shop/admin/upload/image"),J=S,ie=()=>{J("update:imageUrl",""),J("update:image-url","")},oe=()=>{const v=document.querySelector(`#${j.value} .el-upload__input`);v&&v.dispatchEvent(new MouseEvent("click"))},Y=v=>{const b=v.type.startsWith("image/"),M=v.size/1024/1024<T.fileSize,F=T.fileType.includes(v.type);return b?F?M?!0:(c.error(`图片大小不能超过 ${T.fileSize}MB!`),!1):(c.error(`上传图片格式不正确，支持格式：${T.fileType.join(", ")}`),!1):(c.error("只能上传图片文件!"),!1)},pe=v=>{v&&v.success&&v.data&&v.data.url?(J("update:imageUrl",v.data.url),J("update:image-url",v.data.url),c.success("图片上传成功!"),N!=null&&N.prop&&(D==null||D.validateField([N.prop]))):c.error("图片上传失败: "+(v.error||"未知错误"))},E=()=>{c.error("图片上传失败，请重新上传!")};return(v,b)=>{const M=k("el-icon"),F=k("el-upload"),K=k("el-image-viewer");return n(),_("div",wl,[t(F,{id:j.value,action:se.value,class:Te(["upload",R.value?"disabled":"",r.drag?"no-border":""]),multiple:!1,disabled:R.value,"show-file-list":!1,"before-upload":Y,"on-success":pe,"on-error":E,drag:r.drag,accept:r.fileType.join(",")},{default:l(()=>[r.imageUrl?(n(),_(H,{key:0},[i("img",{src:r.imageUrl,class:"upload-image"},null,8,Ul),i("div",{class:"upload-handle",onClick:b[1]||(b[1]=ll(()=>{},["stop"]))},[R.value?L("",!0):(n(),_("div",{key:0,class:"handle-icon",onClick:oe},[t(M,null,{default:l(()=>[t(f(Xe))]),_:1}),b[3]||(b[3]=i("span",null,"编辑",-1))])),i("div",{class:"handle-icon",onClick:b[0]||(b[0]=Q=>q.value=!0)},[t(M,null,{default:l(()=>[t(f(tl))]),_:1}),b[4]||(b[4]=i("span",null,"查看",-1))]),R.value?L("",!0):(n(),_("div",{key:1,class:"handle-icon",onClick:ie},[t(M,null,{default:l(()=>[t(f(je))]),_:1}),b[5]||(b[5]=i("span",null,"删除",-1))]))])],64)):(n(),_("div",zl,[qe(v.$slots,"empty",{},()=>[t(M,null,{default:l(()=>[t(f(ae))]),_:1}),b[6]||(b[6]=i("span",null,"请上传图片",-1))],!0)]))]),_:3},8,["id","action","class","disabled","drag","accept"]),i("div",Sl,[qe(v.$slots,"tip",{},void 0,!0)]),q.value?(n(),$(K,{key:0,"url-list":[r.imageUrl],onClose:b[2]||(b[2]=Q=>q.value=!1)},null,8,["url-list"])):L("",!0)])}}}),Qe=Ye(xl,[["__scopeId","data-v-937c0afd"]]),$l={class:"product-management"},Pl={class:"table-header"},Fl={class:"table-title"},Kl={class:"table-actions"},Tl={class:"product-info"},jl=["src","alt"],Ml={class:"product-details"},Il={class:"product-title"},Ll={class:"product-subtitle"},Rl={key:0,style:{"font-weight":"bold",color:"#ef3f52"}},Dl={key:1,style:{color:"#999999"}},Al={key:0,style:{color:"#666666","text-decoration":"line-through"}},El={key:1,style:{color:"#999999"}},Bl={key:1,style:{color:"#999999"}},Ol={key:0},ql={key:0},Nl={key:1,style:{color:"#999999"}},Jl={key:1},Wl={key:2,style:{color:"#f56c6c"}},Gl={key:0},Zl={key:1,style:{color:"#999999"}},Hl={class:"count-info"},Ql={class:"count-info"},Xl={class:"time-info"},Yl={class:"action-buttons"},ea={class:"pagination-wrapper"},ta={style:{display:"flex","align-items":"center","justify-content":"space-between"}},la={style:{"font-size":"12px",color:"#999999"}},aa={style:{display:"flex","align-items":"center","justify-content":"space-between"}},sa={class:"editor-controls"},ia={class:"dialog-footer"},oa={class:"sku-management"},na={class:"sku-list-section"},ua={class:"section-header"},da=["src","alt"],ra={class:"sku-attributes"},pa={class:"price"},ca={key:1,style:{color:"#999999"}},_a={class:"sku-specs"},ma={class:"add-spec-form"},fa={key:0,class:"specs-list"},ga={class:"specs-grid"},va={class:"spec-content"},ya={class:"spec-name"},ka={class:"image-input-section"},ba={class:"input-mode-selector"},Va={key:0,class:"url-input-mode"},ha={key:0,class:"url-preview"},wa={class:"image-error"},Ua={key:1,class:"upload-mode"},za={class:"dialog-footer"},Sa={class:"fake-product-selection"},Ca={key:0,class:"product-summary"},xa=["src","alt"],$a={class:"product-info"},Pa={class:"product-title"},Fa={class:"product-price"},Ka={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Ta={class:"search-section"},ja={class:"fake-products-grid"},Ma=["onClick"],Ia=["src","alt"],La={class:"card-content"},Ra={class:"card-title"},Da={class:"card-price"},Aa={class:"card-check"},Ea={key:0,class:"empty-state"},Ba={key:0,class:"fake-pagination"},Oa={class:"dialog-footer"},qa=Ve({name:"ProductList"}),Na=Ve({...qa,setup(r){const S=g(!1),T=g(!1),j=g(!1),q=g(""),D=g(),N=g(!1),R=g(!1),se=g(""),J=g(!1),ie=g(!1),oe=g(),Y=g(null),pe=g([]),E=g(""),v=g(""),b=g([]),M=g("url"),F=de({title:"",status:null,product_type:""}),K=de({current:1,size:20,total:0}),Q=g([]),he=g([]),Me=g(!1),p=de({id:null,spu_id:"",title:"",sell_price:0,origin_price:0,discount:0,image_urls:[],rich_text_content:"",specification_list:[],variants:[],status:"active",product_type:"original",b_page_product_id:"",cloak_rule_id:null,country:"JA"}),ce=g([]),_e=g([]),ne=g(!1),ee=g(!1),U=g(null),me=g([]),fe=g(!1),W=g(""),ge=g(""),I=de({current:1,size:12,total:0}),te=g(!1),et=[{label:"日本",value:"JA"},{label:"中国",value:"ZH"},{label:"英国",value:"EN"},{label:"斯洛伐克",value:"SK"},{label:"斯洛文尼亚",value:"SI"},{label:"波兰",value:"PL"},{label:"葡萄牙",value:"PT"},{label:"匈牙利",value:"HU"},{label:"意大利",value:"IT"},{label:"西班牙",value:"ES"},{label:"捷克",value:"CZ"}],tt=re(()=>te.value?"calc(100vh - 200px)":"500px"),lt=re(()=>({placeholder:"请输入商品描述内容...",MENU_CONF:{uploadImage:{server:Ie.value,fieldName:"file",maxFileSize:2*1024*1024,allowedFileTypes:["image/*"]}}})),Ie=re(()=>"https://gammtt.shop/admin/upload/image"),d=de({id:null,product_id:"",sku_code:"",sku_name:"",sell_price:0,origin_price:0,cost_price:0,discount_percent:0,stock_quantity:0,warning_stock:10,main_image:"",status:"active",attributes:[]}),at={title:[{required:!0,message:"请输入商品标题",trigger:"blur"},{min:2,max:500,message:"商品标题长度在 2 到 500 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},st={sku_name:[{required:!0,message:"请输入SKU名称",trigger:"blur"}],sell_price:[{required:!0,message:"请输入销售价格",trigger:"blur"}],stock_quantity:[{required:!0,message:"请输入库存数量",trigger:"blur"}]},it=()=>{if(d.origin_price>0&&d.sell_price>0){const s=Math.round((d.origin_price-d.sell_price)/d.origin_price*100);d.discount_percent=Math.max(0,Math.min(100,s))}else d.discount_percent=0};al(()=>[d.sell_price,d.origin_price],()=>{it()},{deep:!0});const ot=s=>({active:"success",inactive:"danger",draft:"warning",deleted:"info"})[s]||"info",nt=s=>({active:"上架",inactive:"下架",draft:"草稿",deleted:"已删除"})[s]||s,ut=s=>({active:"success",inactive:"danger",out_of_stock:"warning"})[s]||"info",dt=s=>({active:"正常",inactive:"禁用",out_of_stock:"缺货"})[s]||s,we=()=>{K.current=1,G()},rt=()=>{Object.assign(F,{title:"",status:null,product_type:""}),we()},pt=()=>{q.value="添加商品",Object.assign(p,{id:null,spu_id:"",title:"",sell_price:0,origin_price:0,discount:0,image_urls:[],rich_text_content:"",specification_list:[],variants:[],status:"active",product_type:"original",b_page_product_id:"",country:"JA"}),ce.value=[],_e.value=[],j.value=!0},Ue=s=>{const o=`https://gammtt.shop/product/${s.id}`;window.open(o,"_blank"),c.success("正在跳转到商品页面...")},ct=s=>{q.value="编辑商品";const e={...s,sell_price:parseFloat(s.sell_price)||0,origin_price:parseFloat(s.origin_price)||0,discount:parseFloat(s.discount)||0,product_type:s.product_type||"original",b_page_product_id:s.b_page_product_id||"",country:s.country||"JA"};Object.assign(p,e),ce.value=(s.image_urls||[]).map((o,V)=>({name:`image_${V}.jpg`,url:o,response:{success:!0,data:{url:o,file_name:`image_${V}.jpg`}}})),j.value=!0},_t=s=>{Ke.confirm(`确定要删除商品 "${s.title}" 吗？删除后无法恢复！`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button--danger"}).then(async()=>{try{await vl(s.id),c.success("删除成功"),G()}catch{c.error("删除失败")}})},mt=async()=>{D.value&&D.value.validate(async s=>{if(s){T.value=!0;try{p.id?(await gl(p.id,p),c.success("更新成功")):(await fl(p),c.success("添加成功")),j.value=!1,G()}catch{c.error(p.id?"更新失败":"添加失败")}finally{T.value=!1}}})},ft=s=>{K.size=s,G()},gt=s=>{K.current=s,G()},vt=s=>{const e=s.type.startsWith("image/"),o=s.size/1024/1024<2;return e?o?!0:(c.error("图片大小不能超过 2MB!"),!1):(c.error("只能上传图片文件!"),!1)},yt=(s,e)=>{s&&s.success&&s.data&&s.data.url?(p.image_urls.push(s.data.url),e.fileName=s.data.file_name,c.success("图片上传成功")):c.error("图片上传失败: "+(s.error||"未知错误"))},kt=s=>{if(s.response&&s.response.url){const e=p.image_urls.indexOf(s.response.url);e>-1&&p.image_urls.splice(e,1)}},bt=()=>{c.error("图片上传失败")},Vt=()=>{te.value=!te.value},ht=s=>{p.rich_text_content=s},wt=()=>{Ke.confirm("确定要清空商品描述内容吗？","清空确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.rich_text_content="",c.success("内容已清空")})},G=async()=>{S.value=!0;try{const s={page:K.current,size:K.size,title:F.title||void 0,status:F.status||void 0,product_type:F.product_type||void 0},{data:e}=await Ze(s);Q.value=e.list,K.total=e.total}catch{c.error("获取商品列表失败")}finally{S.value=!1}},Ut=async s=>{Y.value=s,N.value=!0,await ze(s.id)},ze=async s=>{J.value=!0;try{const{data:e}=await kl(s);pe.value=e}catch{c.error("获取SKU列表失败")}finally{J.value=!1}},zt=()=>{if(!E.value.trim()||!v.value.trim()){c.warning("请输入规格名称和值");return}const s=E.value.trim(),e=v.value.trim();if(b.value.find(C=>C.name===s&&C.value===e)){c.warning(`规格 "${s}: ${e}" 已存在，请勿重复添加`);return}const V=b.value.find(C=>C.name===s);if(V){c.warning(`属性 "${s}" 已存在值 "${V.value}"，一个SKU的同一属性只能设置一个值。如需修改，请先删除现有规格。`);return}const m={name:s,value:e};b.value.push(m),E.value="",v.value="",c.success("规格添加成功")},St=s=>{b.value.splice(s,1),c.success("规格删除成功")},Ct=()=>{var V;se.value="添加SKU";const s=Date.now(),e=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),o=`SKU${s}${e}`;Object.assign(d,{id:null,product_id:((V=Y.value)==null?void 0:V.id)||"",sku_code:o,sku_name:"",sell_price:0,origin_price:0,cost_price:0,discount_percent:0,stock_quantity:0,warning_stock:10,main_image:"",status:"active",attributes:[]}),b.value=[],E.value="",v.value="",R.value=!0},xt=s=>{se.value="编辑SKU";const e={...s,sell_price:parseFloat(s.sell_price)||0,origin_price:parseFloat(s.origin_price)||0,cost_price:parseFloat(s.cost_price)||0,discount_percent:parseFloat(s.discount_percent)||0,stock_quantity:parseInt(s.stock_quantity)||0,warning_stock:parseInt(s.warning_stock)||10};Object.assign(d,e),b.value=s.attributes.map(o=>({name:o.attribute_name||o.display_name||"",value:o.value||o.display_value||"",attribute_id:o.attribute_id||null,attribute_value_id:o.attribute_value_id||null})),R.value=!0},$t=s=>{Ke.confirm(`确定要删除SKU "${s.sku_name}" 吗？`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then(async()=>{var e,o,V;try{await hl(s.id),c.success("删除成功"),await ze(((e=Y.value)==null?void 0:e.id)||"")}catch(m){console.error("删除SKU失败:",m);let C="删除失败";(V=(o=m.response)==null?void 0:o.data)!=null&&V.message?C=m.response.data.message:m.message&&(C=m.message),c.error(C)}})},Pt=()=>{const s=b.value.map(o=>o.name),e=s.filter((o,V)=>s.indexOf(o)!==V);if(e.length>0)throw c.error(`检测到重复的属性名: ${e.join(", ")}，请检查规格设置`),new Error("存在重复的属性名");return b.value.map(o=>o.attribute_id&&o.attribute_value_id?{attribute_id:o.attribute_id,attribute_value_id:o.attribute_value_id}:{attribute_name:o.name,value:o.value})},Ft=async()=>{oe.value&&oe.value.validate(async s=>{var e;if(s){ie.value=!0;try{const o={...d,attributes:Pt()};d.id?(await Vl(d.id,o),c.success("更新成功")):(await bl(o),c.success("添加成功")),R.value=!1,await ze(((e=Y.value)==null?void 0:e.id)||"")}catch(o){if(o.message==="存在重复的属性名")return;c.error(d.id?"更新失败":"添加失败")}finally{ie.value=!1}}})},Kt=s=>{s!==M.value&&(d.main_image="")},Tt=s=>{s==="original"?p.b_page_product_id="":s==="fake"&&(p.b_page_product_id||Se())},jt=async s=>{if(!s){await Se();return}ne.value=!0;try{const{data:e}=await He(s);_e.value=e}catch{c.error("搜索正品商品失败")}finally{ne.value=!1}},Se=async()=>{ne.value=!0;try{const{data:s}=await He();_e.value=s}catch{c.error("加载正品商品列表失败")}finally{ne.value=!1}},Mt=s=>{const e=Q.value.find(o=>o.id===s);return e?e.title:"未知商品"},Le=s=>Q.value.filter(e=>e.product_type==="fake"&&e.b_page_product_id===s),It=s=>{const e=Q.value.find(o=>o.id===s);e&&Ue(e)},Lt=s=>{U.value=s,W.value="",ge.value="",I.current=1,ee.value=!0,ve()},ve=async()=>{fe.value=!0;try{const s={page:I.current,size:I.size,product_type:"fake",title:ge.value||void 0},{data:e}=await Ze(s);me.value=e.list.filter(o=>!o.b_page_product_id),I.total=e.total}catch{c.error("加载仿品商品列表失败")}finally{fe.value=!1}},Rt=()=>{I.current=1,ve()},Dt=s=>{I.size=s,ve()},At=s=>{I.current=s,ve()},Et=async()=>{if(!(!W.value||!U.value))try{await yl(W.value,U.value.id),c.success("仿品关联成功"),ee.value=!1,G()}catch{c.error("仿品关联失败")}},Bt=()=>{U.value&&(ee.value=!1,q.value="基于正品创建仿品",Object.assign(p,{id:null,spu_id:"",title:`${U.value.title} - 仿品版`,sell_price:Math.round((U.value.sell_price||0)*.6),origin_price:U.value.sell_price||0,discount:40,image_urls:[...U.value.image_urls||[]],rich_text_content:U.value.rich_text_content||"",specification_list:[...U.value.specification_list||[]],variants:[...U.value.variants||[]],status:"draft",product_type:"fake",b_page_product_id:U.value.id,country:U.value.country||"JA"}),ce.value=(U.value.image_urls||[]).map((s,e)=>({name:`image_${e}.jpg`,url:s,response:{success:!0,data:{url:s,file_name:`image_${e}.jpg`}}})),Se(),j.value=!0,c.success(`已基于正品"${U.value.title}"创建仿品，请修改相关信息后保存`))},Ot=async()=>{try{Me.value=!0;const s=await _l.getCloakRules({page:1,size:1e3});s.data.code===200&&(he.value=s.data.data.list.filter(e=>e.is_active===1))}catch(s){console.error("加载斗篷规则失败:",s),c.error("加载斗篷规则失败")}finally{Me.value=!1}},Re=s=>({cloak:"warning",green:"success",open:"info",audit:"danger"})[s]||"info",De=s=>({cloak:"斗篷",green:"绿色",open:"全开",audit:"审核"})[s]||s,qt=s=>{s&&he.value.find(e=>e.id===s)};return sl(()=>{G(),Ot()}),(s,e)=>{const o=k("el-icon"),V=k("el-input"),m=k("el-form-item"),C=k("el-option"),le=k("el-select"),h=k("el-tag"),w=k("el-button"),Ce=k("el-form"),ye=k("el-card"),Z=k("el-avatar"),z=k("el-table-column"),xe=k("el-tooltip"),Ae=k("el-table"),Ee=k("el-pagination"),B=k("el-input-number"),P=k("el-col"),O=k("el-row"),ue=k("el-radio"),Be=k("el-radio-group"),Nt=k("el-upload"),ke=k("el-dialog"),Jt=k("el-alert"),Wt=k("el-divider"),Gt=k("el-image"),Zt=k("el-empty"),$e=il("loading");return n(),_("div",$l,[t(ye,{class:"search-card",shadow:"never"},{default:l(()=>[t(Ce,{model:F,inline:"",class:"search-form"},{default:l(()=>[t(m,{label:"商品标题"},{default:l(()=>[t(V,{modelValue:F.title,"onUpdate:modelValue":e[0]||(e[0]=a=>F.title=a),placeholder:"请输入商品标题",clearable:"",style:{width:"200px"},onKeyup:ol(we,["enter"])},{prefix:l(()=>[t(o,null,{default:l(()=>[t(f(Pe))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"状态"},{default:l(()=>[t(le,{modelValue:F.status,"onUpdate:modelValue":e[1]||(e[1]=a=>F.status=a),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:l(()=>[t(C,{label:"上架",value:"active"}),t(C,{label:"下架",value:"inactive"}),t(C,{label:"草稿",value:"draft"})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"商品类型"},{default:l(()=>[t(le,{modelValue:F.product_type,"onUpdate:modelValue":e[2]||(e[2]=a=>F.product_type=a),placeholder:"请选择类型",clearable:"",style:{width:"120px"}},{default:l(()=>[t(C,{label:"全部",value:""},{default:l(()=>[t(h,{type:"info",size:"small"},{default:l(()=>[...e[40]||(e[40]=[u("全部",-1)])]),_:1})]),_:1}),t(C,{label:"正品",value:"original"},{default:l(()=>[t(h,{type:"success",size:"small"},{default:l(()=>[...e[41]||(e[41]=[u("正品",-1)])]),_:1})]),_:1}),t(C,{label:"仿品",value:"fake"},{default:l(()=>[t(h,{type:"warning",size:"small"},{default:l(()=>[...e[42]||(e[42]=[u("仿品",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,null,{default:l(()=>[t(w,{type:"primary",onClick:we},{default:l(()=>[t(o,null,{default:l(()=>[t(f(Pe))]),_:1}),e[43]||(e[43]=u(" 搜索 ",-1))]),_:1}),t(w,{onClick:rt},{default:l(()=>[t(o,null,{default:l(()=>[t(f(Ne))]),_:1}),e[44]||(e[44]=u(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(ye,{class:"table-card",shadow:"never"},{header:l(()=>[i("div",Pl,[i("div",Fl,[t(w,{type:"primary",onClick:pt},{default:l(()=>[t(o,null,{default:l(()=>[t(f(ae))]),_:1}),e[45]||(e[45]=u(" 添加商品 ",-1))]),_:1}),e[46]||(e[46]=i("span",null,"商品列表",-1)),t(h,{type:"info",size:"small"},{default:l(()=>[u(y(K.total)+" 条记录",1)]),_:1})]),i("div",Kl,[t(w,{size:"small",onClick:G},{default:l(()=>[t(o,null,{default:l(()=>[t(f(Ne))]),_:1}),e[47]||(e[47]=u(" 刷新 ",-1))]),_:1})])])]),default:l(()=>[Fe((n(),$(Ae,{data:Q.value,stripe:"",border:"",style:{width:"100%"},"header-cell-style":{background:"#f8f9fa",color:"#606266"}},{default:l(()=>[t(z,{prop:"title",label:"商品标题","min-width":"200","show-overflow-tooltip":""},{default:l(({row:a})=>[i("div",Tl,[a.image_urls&&a.image_urls[0]?(n(),$(Z,{key:0,size:40,class:"product-avatar"},{default:l(()=>[i("img",{src:a.image_urls[0],alt:a.title,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,jl)]),_:2},1024)):(n(),$(Z,{key:1,size:40,class:"product-avatar"},{default:l(()=>[t(o,null,{default:l(()=>[t(f(be))]),_:1})]),_:1})),i("div",Ml,[i("div",Il,y(a.title),1),i("div",Ll,y(a.sell_price?"¥"+a.sell_price:"暂未定价"),1)])])]),_:1}),t(z,{prop:"sell_price",label:"销售价",width:"90",align:"center"},{default:l(({row:a})=>[a.sell_price?(n(),_("span",Rl," ¥"+y(a.sell_price),1)):(n(),_("span",Dl,"--"))]),_:1}),t(z,{prop:"origin_price",label:"原价",width:"90",align:"center"},{default:l(({row:a})=>[a.origin_price&&a.origin_price>0?(n(),_("span",Al," ¥"+y(a.origin_price),1)):(n(),_("span",El,"--"))]),_:1}),t(z,{prop:"discount",label:"折扣",width:"80",align:"center"},{default:l(({row:a})=>[a.discount&&a.discount>0?(n(),$(h,{key:0,type:"success",size:"small"},{default:l(()=>[u(y(a.discount)+"% OFF ",1)]),_:2},1024)):(n(),_("span",Bl,"--"))]),_:1}),t(z,{prop:"product_type",label:"类型",width:"100",align:"center"},{default:l(({row:a})=>[t(h,{type:a.product_type==="original"?"success":"warning",size:"small"},{default:l(()=>[u(y(a.product_type==="original"?"正品":"仿品"),1)]),_:2},1032,["type"])]),_:1}),t(z,{label:"关联关系",width:"150",align:"center"},{default:l(({row:a})=>[a.product_type==="original"?(n(),_("div",Ol,[Le(a.id).length>0?(n(),_("div",ql,[(n(!0),_(H,null,X(Le(a.id),x=>(n(),$(xe,{key:x.id,content:`仿品: ${x.title}`,placement:"top"},{default:l(()=>[t(h,{type:"warning",size:"small",style:{margin:"2px",cursor:"pointer"},onClick:Ht=>Ue(x)},{default:l(()=>[...e[48]||(e[48]=[u(" 仿品 ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["content"]))),128))])):(n(),_("span",Nl,"-"))])):a.b_page_product_id?(n(),_("div",Jl,[t(xe,{content:`关联正品: ${Mt(a.b_page_product_id)}`,placement:"top"},{default:l(()=>[t(h,{type:"info",size:"small",style:{cursor:"pointer"},onClick:x=>It(a.b_page_product_id)},{default:l(()=>[...e[49]||(e[49]=[u(" 已关联 ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["content"])])):(n(),_("span",Wl,"未关联"))]),_:1}),t(z,{prop:"country",label:"国家",width:"80",align:"center"},{default:l(({row:a})=>[t(h,{type:"primary",size:"small"},{default:l(()=>[u(y(a.country||"JA"),1)]),_:2},1024)]),_:1}),t(z,{prop:"cloak_rule_name",label:"斗篷规则",width:"150",align:"center"},{default:l(({row:a})=>[a.cloak_rule_name?(n(),_("div",Gl,[t(xe,{content:`规则: ${a.cloak_rule_name}`,placement:"top"},{default:l(()=>[t(h,{type:Re(a.cloak_rule_mode),size:"small"},{default:l(()=>[u(y(a.cloak_rule_name),1)]),_:2},1032,["type"])]),_:2},1032,["content"])])):(n(),_("span",Zl,"未设置"))]),_:1}),t(z,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(({row:a})=>[t(h,{type:ot(a.status),size:"small",effect:"light"},{default:l(()=>[u(y(nt(a.status)),1)]),_:2},1032,["type"])]),_:1}),t(z,{prop:"view_count",label:"浏览量",width:"100",align:"center"},{default:l(({row:a})=>[i("div",Hl,[t(o,{class:"count-icon"},{default:l(()=>[t(f(Je))]),_:1}),i("span",null,y(a.view_count||0),1)])]),_:1}),t(z,{prop:"sale_count",label:"销量",width:"100",align:"center"},{default:l(({row:a})=>[i("div",Ql,[t(o,{class:"count-icon"},{default:l(()=>[t(f(nl))]),_:1}),i("span",null,y(a.sale_count||0),1)])]),_:1}),t(z,{prop:"created_at",label:"创建时间",width:"180","show-overflow-tooltip":""},{default:l(({row:a})=>[i("div",Xl,[t(o,{class:"time-icon"},{default:l(()=>[t(f(ul))]),_:1}),i("span",null,y(a.created_at),1)])]),_:1}),t(z,{label:"操作",width:"350",fixed:"right",align:"center"},{default:l(({row:a})=>[i("div",Yl,[t(w,{size:"small",type:"primary",link:"",onClick:x=>Ue(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(f(Je))]),_:1}),e[50]||(e[50]=u(" 查看 ",-1))]),_:1},8,["onClick"]),t(w,{size:"small",type:"success",link:"",onClick:x=>Ut(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(f(dl))]),_:1}),e[51]||(e[51]=u(" SKU管理 ",-1))]),_:1},8,["onClick"]),a.product_type==="original"?(n(),$(w,{key:0,size:"small",type:"info",link:"",onClick:x=>Lt(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(f(ae))]),_:1}),e[52]||(e[52]=u(" 关联仿品 ",-1))]),_:1},8,["onClick"])):L("",!0),t(w,{size:"small",type:"warning",link:"",onClick:x=>ct(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(f(Xe))]),_:1}),e[53]||(e[53]=u(" 编辑 ",-1))]),_:1},8,["onClick"]),t(w,{size:"small",type:"danger",link:"",onClick:x=>_t(a)},{default:l(()=>[t(o,null,{default:l(()=>[t(f(je))]),_:1}),e[54]||(e[54]=u(" 删除 ",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[$e,S.value]]),i("div",ea,[t(Ee,{"current-page":K.current,"onUpdate:currentPage":e[3]||(e[3]=a=>K.current=a),"page-size":K.size,"onUpdate:pageSize":e[4]||(e[4]=a=>K.size=a),"page-sizes":[10,20,50,100],total:K.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ft,onCurrentChange:gt},null,8,["current-page","page-size","total"])])]),_:1}),t(ke,{modelValue:j.value,"onUpdate:modelValue":e[16]||(e[16]=a=>j.value=a),title:q.value,fullscreen:!0,"close-on-click-modal":!1,"destroy-on-close":"",class:"product-dialog"},{footer:l(()=>[i("div",ia,[t(w,{onClick:e[15]||(e[15]=a=>j.value=!1)},{default:l(()=>[...e[72]||(e[72]=[u("取消",-1)])]),_:1}),t(w,{type:"primary",onClick:mt,loading:T.value},{default:l(()=>[...e[73]||(e[73]=[u(" 确定 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[t(Ce,{model:p,rules:at,ref_key:"formRef",ref:D,"label-width":"100px",class:"product-form"},{default:l(()=>[t(m,{label:"SPU ID"},{default:l(()=>[t(V,{modelValue:p.spu_id,"onUpdate:modelValue":e[5]||(e[5]=a=>p.spu_id=a),placeholder:"保存后生成",readonly:""},null,8,["modelValue"]),e[55]||(e[55]=i("div",{class:"form-tip"},"SPU ID由后端自动生成，创建商品后自动显示",-1))]),_:1}),t(m,{label:"商品标题",prop:"title"},{default:l(()=>[t(V,{modelValue:p.title,"onUpdate:modelValue":e[6]||(e[6]=a=>p.title=a),placeholder:"请输入商品标题"},null,8,["modelValue"])]),_:1}),t(O,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(m,{label:"销售价格",prop:"sell_price"},{default:l(()=>[t(B,{modelValue:p.sell_price,"onUpdate:modelValue":e[7]||(e[7]=a=>p.sell_price=a),precision:2,min:0,placeholder:"请输入销售价格",style:{width:"100%"}},{append:l(()=>[...e[56]||(e[56]=[u("元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(m,{label:"原价",prop:"origin_price"},{default:l(()=>[t(B,{modelValue:p.origin_price,"onUpdate:modelValue":e[8]||(e[8]=a=>p.origin_price=a),precision:2,min:0,placeholder:"请输入原价",style:{width:"100%"}},{append:l(()=>[...e[57]||(e[57]=[u("元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(O,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(m,{label:"折扣(%)",prop:"discount"},{default:l(()=>[t(B,{modelValue:p.discount,"onUpdate:modelValue":e[9]||(e[9]=a=>p.discount=a),precision:0,min:0,max:100,placeholder:"请输入折扣",style:{width:"100%"}},{append:l(()=>[...e[58]||(e[58]=[u("%",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(m,{label:"状态",prop:"status"},{default:l(()=>[t(le,{modelValue:p.status,"onUpdate:modelValue":e[10]||(e[10]=a=>p.status=a),style:{width:"100%"}},{default:l(()=>[t(C,{label:"上架",value:"active"},{default:l(()=>[t(h,{type:"success",size:"small"},{default:l(()=>[...e[59]||(e[59]=[u("上架",-1)])]),_:1})]),_:1}),t(C,{label:"下架",value:"inactive"},{default:l(()=>[t(h,{type:"danger",size:"small"},{default:l(()=>[...e[60]||(e[60]=[u("下架",-1)])]),_:1})]),_:1}),t(C,{label:"草稿",value:"draft"},{default:l(()=>[t(h,{type:"warning",size:"small"},{default:l(()=>[...e[61]||(e[61]=[u("草稿",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(O,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(m,{label:"商品类型",prop:"product_type"},{default:l(()=>[t(Be,{modelValue:p.product_type,"onUpdate:modelValue":e[11]||(e[11]=a=>p.product_type=a),onChange:Tt},{default:l(()=>[t(ue,{value:"original"},{default:l(()=>[t(h,{type:"success",size:"small"},{default:l(()=>[...e[62]||(e[62]=[u("正品",-1)])]),_:1}),e[63]||(e[63]=u(" 正品商品 ",-1))]),_:1}),t(ue,{value:"fake"},{default:l(()=>[t(h,{type:"warning",size:"small"},{default:l(()=>[...e[64]||(e[64]=[u("仿品",-1)])]),_:1}),e[65]||(e[65]=u(" 仿品商品 ",-1))]),_:1})]),_:1},8,["modelValue"]),e[66]||(e[66]=i("div",{class:"form-tip"},"正品：用户默认看到的商品；仿品：替代展示的商品",-1))]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[p.product_type==="fake"?(n(),$(m,{key:0,label:"关联正品",prop:"b_page_product_id"},{default:l(()=>[t(le,{modelValue:p.b_page_product_id,"onUpdate:modelValue":e[12]||(e[12]=a=>p.b_page_product_id=a),placeholder:"请选择对应的正品商品",filterable:"",remote:"","remote-method":jt,loading:ne.value,style:{width:"100%"}},{default:l(()=>[(n(!0),_(H,null,X(_e.value,a=>(n(),$(C,{key:a.id,label:`${a.title} - ¥${a.sell_price}`,value:a.id},{default:l(()=>[i("div",ta,[i("span",null,y(a.title),1),i("span",la,"¥"+y(a.sell_price),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading"]),e[67]||(e[67]=i("div",{class:"form-tip"},"选择这个仿品对应的正品商品",-1))]),_:1})):L("",!0)]),_:1})]),_:1}),t(O,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(m,{label:"目标国家",prop:"country"},{default:l(()=>[t(le,{modelValue:p.country,"onUpdate:modelValue":e[13]||(e[13]=a=>p.country=a),placeholder:"请选择目标国家",style:{width:"100%"}},{default:l(()=>[(n(),_(H,null,X(et,a=>t(C,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e[68]||(e[68]=i("div",{class:"form-tip"},"选择商品投放的目标国家/地区",-1))]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(m,{label:"斗篷规则",prop:"cloak_rule_id"},{default:l(()=>[t(le,{modelValue:p.cloak_rule_id,"onUpdate:modelValue":e[14]||(e[14]=a=>p.cloak_rule_id=a),placeholder:"请选择斗篷规则",clearable:"",filterable:"",style:{width:"100%"},onChange:qt},{default:l(()=>[(n(!0),_(H,null,X(he.value,a=>(n(),$(C,{key:a.id,label:`${a.name} (${De(a.mode)})`,value:a.id},{default:l(()=>[i("div",aa,[i("span",null,y(a.name),1),t(h,{type:Re(a.mode),size:"small"},{default:l(()=>[u(y(De(a.mode)),1)]),_:2},1032,["type"])])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),e[69]||(e[69]=i("div",{class:"form-tip"},"选择商品使用的斗篷规则，控制不同用户看到的内容",-1))]),_:1})]),_:1})]),_:1}),t(m,{label:"商品图片",prop:"image_urls"},{default:l(()=>[t(Nt,{class:"upload-demo",drag:"",action:Ie.value,multiple:"","file-list":ce.value,"before-upload":vt,"on-success":yt,"on-remove":kt,"on-error":bt,"list-type":"picture-card",accept:"image/*"},{default:l(()=>[t(o,{class:"el-icon--upload"},{default:l(()=>[t(f(We))]),_:1}),e[70]||(e[70]=i("div",{class:"el-upload__text"},[u("将图片拖到此处，或"),i("em",null,"点击上传")],-1))]),_:1},8,["action","file-list"])]),_:1}),t(m,{label:"商品描述",prop:"rich_text_content"},{default:l(()=>[i("div",{class:Te(["wang-editor-wrapper",te.value?"fullscreen":""])},[t(ml,{value:p.rich_text_content||"",height:tt.value,"editor-config":lt.value,"onUpdate:value":ht},null,8,["value","height","editor-config"]),i("div",sa,[t(w,{size:"small",onClick:Vt,title:"调整编辑器大小"},{default:l(()=>[t(o,null,{default:l(()=>[te.value?(n(),$(f(rl),{key:0})):(n(),$(f(pl),{key:1}))]),_:1}),u(" "+y(te.value?"恢复":"全屏编辑"),1)]),_:1}),t(w,{size:"small",onClick:wt,title:"清空内容"},{default:l(()=>[t(o,null,{default:l(()=>[t(f(je))]),_:1}),e[71]||(e[71]=u(" 清空内容 ",-1))]),_:1})])],2)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(ke,{modelValue:N.value,"onUpdate:modelValue":e[17]||(e[17]=a=>N.value=a),title:"SKU管理",width:"1200px","close-on-click-modal":!1,"destroy-on-close":""},{default:l(()=>[i("div",oa,[i("div",na,[i("div",ua,[e[75]||(e[75]=i("h3",null,"SKU列表",-1)),t(w,{type:"primary",onClick:Ct},{default:l(()=>[t(o,null,{default:l(()=>[t(f(ae))]),_:1}),e[74]||(e[74]=u(" 添加SKU ",-1))]),_:1})]),Fe((n(),$(Ae,{data:pe.value,stripe:"",border:"",style:{width:"100%"}},{default:l(()=>[t(z,{label:"图片",width:"80",align:"center"},{default:l(({row:a})=>[a.main_image?(n(),$(Z,{key:0,size:50,class:"sku-avatar"},{default:l(()=>[i("img",{src:a.main_image,alt:a.sku_name,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,da)]),_:2},1024)):(n(),$(Z,{key:1,size:50,class:"sku-avatar"},{default:l(()=>[t(o,null,{default:l(()=>[t(f(be))]),_:1})]),_:1}))]),_:1}),t(z,{prop:"sku_code",label:"SKU编码",width:"120"}),t(z,{prop:"sku_name",label:"SKU名称",width:"150"}),t(z,{label:"属性组合","min-width":"200"},{default:l(({row:a})=>[i("div",ra,[(n(!0),_(H,null,X(a.attributes,x=>(n(),$(h,{key:x.attribute_name,size:"small",class:"attr-tag"},{default:l(()=>[u(y(x.display_name)+": "+y(x.display_value),1)]),_:2},1024))),128))])]),_:1}),t(z,{prop:"sell_price",label:"销售价格",width:"100",align:"center"},{default:l(({row:a})=>[i("span",pa,"¥"+y(a.sell_price),1)]),_:1}),t(z,{prop:"discount_percent",label:"折扣",width:"80",align:"center"},{default:l(({row:a})=>[a.discount_percent&&a.discount_percent>0?(n(),$(h,{key:0,type:"success",size:"small"},{default:l(()=>[u(y(a.discount_percent)+"% ",1)]),_:2},1024)):(n(),_("span",ca,"--"))]),_:1}),t(z,{prop:"stock_quantity",label:"库存",width:"80",align:"center"}),t(z,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(({row:a})=>[t(h,{type:ut(a.status),size:"small"},{default:l(()=>[u(y(dt(a.status)),1)]),_:2},1032,["type"])]),_:1}),t(z,{label:"操作",width:"150",align:"center"},{default:l(({row:a})=>[t(w,{size:"small",type:"primary",link:"",onClick:x=>xt(a)},{default:l(()=>[...e[76]||(e[76]=[u("编辑",-1)])]),_:1},8,["onClick"]),t(w,{size:"small",type:"danger",link:"",onClick:x=>$t(a)},{default:l(()=>[...e[77]||(e[77]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[$e,J.value]])])])]),_:1},8,["modelValue"]),t(ke,{modelValue:R.value,"onUpdate:modelValue":e[33]||(e[33]=a=>R.value=a),title:se.value,width:"800px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[i("div",za,[t(w,{onClick:e[32]||(e[32]=a=>R.value=!1)},{default:l(()=>[...e[87]||(e[87]=[u("取消",-1)])]),_:1}),t(w,{type:"primary",onClick:Ft,loading:ie.value},{default:l(()=>[...e[88]||(e[88]=[u("确定",-1)])]),_:1},8,["loading"])])]),default:l(()=>[t(Ce,{model:d,rules:st,ref_key:"skuFormRef",ref:oe,"label-width":"100px"},{default:l(()=>[t(O,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(m,{label:"SKU编码",prop:"sku_code"},{default:l(()=>[t(V,{modelValue:d.sku_code,"onUpdate:modelValue":e[18]||(e[18]=a=>d.sku_code=a),placeholder:"自动生成"},null,8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(m,{label:"SKU名称",prop:"sku_name"},{default:l(()=>[t(V,{modelValue:d.sku_name,"onUpdate:modelValue":e[19]||(e[19]=a=>d.sku_name=a),placeholder:"请输入SKU名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(O,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(m,{label:"销售价格",prop:"sell_price"},{default:l(()=>[t(B,{modelValue:d.sell_price,"onUpdate:modelValue":e[20]||(e[20]=a=>d.sell_price=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(m,{label:"原价",prop:"origin_price"},{default:l(()=>[t(B,{modelValue:d.origin_price,"onUpdate:modelValue":e[21]||(e[21]=a=>d.origin_price=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(O,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(m,{label:"折扣(%)",prop:"discount_percent"},{default:l(()=>[t(B,{modelValue:d.discount_percent,"onUpdate:modelValue":e[22]||(e[22]=a=>d.discount_percent=a),min:0,max:100,precision:0,style:{width:"100%"}},{append:l(()=>[...e[78]||(e[78]=[u("%",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(m,{label:"成本价",prop:"cost_price"},{default:l(()=>[t(B,{modelValue:d.cost_price,"onUpdate:modelValue":e[23]||(e[23]=a=>d.cost_price=a),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(O,{gutter:20},{default:l(()=>[t(P,{span:12},{default:l(()=>[t(m,{label:"库存数量",prop:"stock_quantity"},{default:l(()=>[t(B,{modelValue:d.stock_quantity,"onUpdate:modelValue":e[24]||(e[24]=a=>d.stock_quantity=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t(P,{span:12},{default:l(()=>[t(m,{label:"预警库存",prop:"warning_stock"},{default:l(()=>[t(B,{modelValue:d.warning_stock,"onUpdate:modelValue":e[25]||(e[25]=a=>d.warning_stock=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(m,{label:"SKU图片",prop:"main_image"},{default:l(()=>[t(Qe,{"image-url":d.main_image,"onUpdate:imageUrl":e[26]||(e[26]=a=>d.main_image=a),"file-size":2,"file-type":["image/jpg","image/jpeg","image/png","image/gif","image/webp"],drag:!0,width:"120px",height:"120px"},null,8,["image-url"])]),_:1}),t(m,{label:"SKU规格",prop:"attributes"},{default:l(()=>[i("div",_a,[t(Jt,{title:"规格设置说明",type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"16px"}},{default:l(()=>[...e[79]||(e[79]=[i("div",null,[i("p",null,"• 每个SKU的同一属性只能设置一个值（如：颜色只能是红色或蓝色，不能同时是两种）"),i("p",null,"• 不同的属性值组合应该创建不同的SKU"),i("p",null,"• 示例：颜色=红色，尺寸=L 为一个SKU；颜色=蓝色，尺寸=L 为另一个SKU")],-1)])]),_:1}),i("div",ma,[t(O,{gutter:10},{default:l(()=>[t(P,{span:8},{default:l(()=>[t(V,{modelValue:E.value,"onUpdate:modelValue":e[27]||(e[27]=a=>E.value=a),placeholder:"规格名称，如：颜色",maxlength:20,"show-word-limit":""},null,8,["modelValue"])]),_:1}),t(P,{span:12},{default:l(()=>[t(V,{modelValue:v.value,"onUpdate:modelValue":e[28]||(e[28]=a=>v.value=a),placeholder:"规格值，如：红色",maxlength:50,"show-word-limit":""},null,8,["modelValue"])]),_:1}),t(P,{span:4},{default:l(()=>[t(w,{type:"primary",onClick:zt,disabled:!E.value||!v.value},{default:l(()=>[t(o,null,{default:l(()=>[t(f(ae))]),_:1}),e[80]||(e[80]=u(" 添加 ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),b.value.length>0?(n(),_("div",fa,[t(Wt,{"content-position":"left"},{default:l(()=>[...e[81]||(e[81]=[u("已添加的规格",-1)])]),_:1}),i("div",ga,[(n(!0),_(H,null,X(b.value,(a,x)=>(n(),_("div",{key:x,class:"spec-item"},[i("div",va,[i("span",ya,y(a.name),1),t(h,{type:"primary",size:"small"},{default:l(()=>[u(y(a.value),1)]),_:2},1024)]),t(w,{size:"small",type:"danger",link:"",onClick:Ht=>St(x),icon:"Delete"},{default:l(()=>[...e[82]||(e[82]=[u(" 删除 ",-1)])]),_:1},8,["onClick"])]))),128))])])):L("",!0)])]),_:1}),t(m,{label:"主图设置",prop:"main_image"},{default:l(()=>[i("div",ka,[i("div",ba,[t(Be,{modelValue:M.value,"onUpdate:modelValue":e[29]||(e[29]=a=>M.value=a),onChange:Kt},{default:l(()=>[t(ue,{value:"url"},{default:l(()=>[t(o,null,{default:l(()=>[t(f(Ge))]),_:1}),e[83]||(e[83]=u(" URL输入 ",-1))]),_:1}),t(ue,{value:"upload"},{default:l(()=>[t(o,null,{default:l(()=>[t(f(We))]),_:1}),e[84]||(e[84]=u(" 文件上传 ",-1))]),_:1})]),_:1},8,["modelValue"])]),M.value==="url"?(n(),_("div",Va,[t(V,{modelValue:d.main_image,"onUpdate:modelValue":e[30]||(e[30]=a=>d.main_image=a),placeholder:"请输入图片URL地址",clearable:""},{prepend:l(()=>[t(o,null,{default:l(()=>[t(f(Ge))]),_:1})]),_:1},8,["modelValue"]),d.main_image?(n(),_("div",ha,[t(Gt,{src:d.main_image,fit:"cover",style:{width:"80px",height:"80px","border-radius":"4px"},"preview-src-list":[d.main_image],"preview-teleported":""},{error:l(()=>[i("div",wa,[t(o,null,{default:l(()=>[t(f(cl))]),_:1}),e[85]||(e[85]=i("span",null,"加载失败",-1))])]),_:1},8,["src","preview-src-list"])])):L("",!0)])):L("",!0),M.value==="upload"?(n(),_("div",Ua,[t(Qe,{"image-url":d.main_image,"onUpdate:imageUrl":e[31]||(e[31]=a=>d.main_image=a),height:"120px",width:"120px","file-size":2,"file-type":["image/jpeg","image/png","image/gif","image/webp"]},{tip:l(()=>[...e[86]||(e[86]=[i("div",{class:"upload-tip"},"支持 JPG、PNG、GIF、WebP 格式，文件大小不超过 2MB",-1)])]),_:1},8,["image-url"])])):L("",!0)])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(ke,{modelValue:ee.value,"onUpdate:modelValue":e[39]||(e[39]=a=>ee.value=a),title:"选择关联仿品",width:"1000px","close-on-click-modal":!1,"destroy-on-close":""},{footer:l(()=>[i("div",Oa,[t(w,{onClick:e[38]||(e[38]=a=>ee.value=!1)},{default:l(()=>[...e[94]||(e[94]=[u("取消",-1)])]),_:1}),t(w,{type:"primary",onClick:Et,disabled:!W.value},{default:l(()=>[...e[95]||(e[95]=[u(" 确定关联 ",-1)])]),_:1},8,["disabled"])])]),default:l(()=>[i("div",Sa,[t(ye,{class:"current-product-card",shadow:"never"},{header:l(()=>[...e[89]||(e[89]=[i("span",{style:{"font-weight":"600",color:"#409eff"}},"当前正品商品",-1)])]),default:l(()=>[U.value?(n(),_("div",Ca,[U.value.image_urls&&U.value.image_urls[0]?(n(),$(Z,{key:0,size:60},{default:l(()=>[i("img",{src:U.value.image_urls[0],alt:U.value.title,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,xa)]),_:1})):(n(),$(Z,{key:1,size:60},{default:l(()=>[t(o,null,{default:l(()=>[t(f(be))]),_:1})]),_:1})),i("div",$a,[i("div",Pa,y(U.value.title),1),i("div",Fa,"¥"+y(U.value.sell_price),1),t(h,{type:"success",size:"small"},{default:l(()=>[...e[90]||(e[90]=[u("正品",-1)])]),_:1})])])):L("",!0)]),_:1}),t(ye,{class:"fake-selection-card",shadow:"never"},{header:l(()=>[i("div",Ka,[e[92]||(e[92]=i("span",{style:{"font-weight":"600"}},"选择要关联的仿品",-1)),t(w,{type:"primary",size:"small",onClick:Bt},{default:l(()=>[t(o,null,{default:l(()=>[t(f(ae))]),_:1}),e[91]||(e[91]=u(" 创建新仿品 ",-1))]),_:1})])]),default:l(()=>[i("div",Ta,[t(V,{modelValue:ge.value,"onUpdate:modelValue":e[34]||(e[34]=a=>ge.value=a),placeholder:"搜索仿品商品...",clearable:"",onInput:Rt,style:{width:"300px"}},{prefix:l(()=>[t(o,null,{default:l(()=>[t(f(Pe))]),_:1})]),_:1},8,["modelValue"])]),Fe((n(),_("div",ja,[(n(!0),_(H,null,X(me.value,a=>(n(),_("div",{key:a.id,class:Te(["fake-product-card",{active:W.value===a.id}]),onClick:x=>W.value=a.id},[a.image_urls&&a.image_urls[0]?(n(),$(Z,{key:0,size:28},{default:l(()=>[i("img",{src:a.image_urls[0],alt:a.title,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Ia)]),_:2},1024)):(n(),$(Z,{key:1,size:28},{default:l(()=>[t(o,null,{default:l(()=>[t(f(be))]),_:1})]),_:1})),i("div",La,[i("div",Ra,y(a.title),1),i("div",Da,"¥"+y(a.sell_price),1),t(h,{type:"warning",size:"small",style:{padding:"1px 4px","font-size":"10px"}},{default:l(()=>[...e[93]||(e[93]=[u("仿品",-1)])]),_:1})]),i("div",Aa,[t(ue,{value:a.id,modelValue:W.value,"onUpdate:modelValue":e[35]||(e[35]=x=>W.value=x)},null,8,["value","modelValue"])])],10,Ma))),128)),!fe.value&&me.value.length===0?(n(),_("div",Ea,[t(Zt,{description:"暂无可关联的仿品商品"})])):L("",!0)])),[[$e,fe.value]]),me.value.length>0?(n(),_("div",Ba,[t(Ee,{"current-page":I.current,"onUpdate:currentPage":e[36]||(e[36]=a=>I.current=a),"page-size":I.size,"onUpdate:pageSize":e[37]||(e[37]=a=>I.size=a),"page-sizes":[12,24,48],total:I.total,layout:"total, sizes, prev, pager, next",onSizeChange:Dt,onCurrentChange:At,small:""},null,8,["current-page","page-size","total"])])):L("",!0)]),_:1})])]),_:1},8,["modelValue"])])}}}),Qa=Ye(Na,[["__scopeId","data-v-e09dcd9b"]]);export{Qa as default};
