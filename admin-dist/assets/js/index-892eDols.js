import{d as ve,h as v,P as q,s as ce,Z as qe,r as _,Q as He,c as y,o as s,a as c,b as l,w as t,g as f,R as z,e as d,t as h,F as E,f as J,u as b,as as We,U as _e,$ as pe,a_ as Ze,b1 as Ke,aH as Qe,E as fe,q as Xe,aQ as me,x as be,W as Ye,b2 as el,b3 as ll,b0 as tl,N as g,a0 as ol,M as al}from"./index-BaFTl8Yv.js";import{g as nl,u as T}from"./pixel-B8lwaIyI.js";import{g as ke}from"./product-DUcu9HIk.js";import{_ as il}from"./_plugin-vue_export-helper-DlAUqK2U.js";const sl={class:"pixel-config"},dl={class:"card-header"},rl={key:0,style:{display:"flex","flex-wrap":"wrap",gap:"4px"}},ul={class:"card-header"},cl={class:"card-header"},_l={class:"card-header"},pl={class:"action-bar"},fl={key:0,style:{"margin-top":"8px"}},ml={style:{"margin-bottom":"12px",display:"flex","justify-content":"space-between","align-items":"center"}},bl={style:{color:"#606266","font-size":"14px"}},kl={key:0,style:{color:"#909399"}},vl=["src"],gl={key:1},yl={key:0},xl={key:1},Vl={style:{"text-align":"left","margin-bottom":"12px"}},wl=ve({name:"PixelConfig"}),Cl=ve({...wl,setup(hl){const H=v(!1),D=v(!1),W=v("添加 Google Ads 账户"),Z=v(),R=v(-1),ee=v(!1),le=v([]),L=v(!1),K=v(!1),N=v([]),O=v(""),A=v(),x=q({title:"",country:""}),V=q({current:1,size:10,total:0}),k=v([]),i=q({name:"",conversion_id:"",conversion_label:"",enabled:!0,product_ids:[],em_params:[]}),te=v([]),ge={conversion_id:[{required:!0,message:"请输入转化ID",trigger:"blur"},{pattern:/^\d+$/,message:"转化ID只能包含数字",trigger:"blur"}],conversion_label:[{required:!0,message:"请输入转化标签",trigger:"blur"}]},n=q({facebook_enabled:0,facebook_pixel_id:"",tiktok_enabled:0,tiktok_pixel_id:""}),w=v([]),ye=[{code:"SK",name:"斯洛伐克"},{code:"CZ",name:"捷克"},{code:"PL",name:"波兰"},{code:"HU",name:"匈牙利"},{code:"DE",name:"德国"},{code:"AT",name:"奥地利"},{code:"RO",name:"罗马尼亚"},{code:"JP",name:"日本"}],xe={SK:"斯洛伐克",CZ:"捷克",PL:"波兰",HU:"匈牙利",DE:"德国",AT:"奥地利",RO:"罗马尼亚",JP:"日本"},Ve=ce(()=>{const a={};return N.value.forEach(e=>{if(e.country){const r=e.country.toUpperCase();a[r]=(a[r]||0)+1}}),a}),Q=ce(()=>{const a=Ve.value,e=[],r=[];return ye.forEach(u=>{const p=a[u.code]||0;p>0?e.push({...u,count:p}):r.push(u)}),e.sort((u,p)=>p.count-u.count),{withProducts:e,withoutProducts:r}}),X=async()=>{try{const{data:a}=await nl();if(a){if(a.google_ads_accounts)try{k.value=typeof a.google_ads_accounts=="string"?JSON.parse(a.google_ads_accounts):a.google_ads_accounts;const e=new Set;k.value.forEach(r=>{r.em_params&&Array.isArray(r.em_params)&&r.em_params.forEach(u=>e.add(u))}),te.value=Array.from(e)}catch{k.value=[]}if(n.facebook_enabled=a.facebook_enabled||!1,n.facebook_pixel_id=a.facebook_pixel_id||"",n.tiktok_enabled=a.tiktok_enabled||!1,n.tiktok_pixel_id=a.tiktok_pixel_id||"",a.custom_pixels)try{w.value=typeof a.custom_pixels=="string"?JSON.parse(a.custom_pixels):a.custom_pixels}catch{w.value=[]}}else n.facebook_enabled=!1,n.facebook_pixel_id="",n.tiktok_enabled=!1,n.tiktok_pixel_id="",w.value=[],k.value=[]}catch(a){g.error("加载配置失败"),console.error(a)}},we=()=>{W.value="添加 Google Ads 账户",R.value=-1,Object.assign(i,{name:"",conversion_id:"",conversion_label:"",enabled:!0,product_ids:[],em_params:[]}),O.value="",D.value=!0},Ce=(a,e)=>{W.value="编辑 Google Ads 账户",R.value=e,Object.assign(i,{...a,product_ids:a.product_ids||[],em_params:a.em_params||[]}),$(),D.value=!0},he=async()=>{if(Z.value)try{await Z.value.validate();const a={name:i.name,conversion_id:i.conversion_id,conversion_label:i.conversion_label,enabled:i.enabled,product_ids:i.product_ids||[],em_params:i.em_params||[]};R.value>=0?k.value[R.value]=a:k.value.push(a),await T({google_ads_accounts:JSON.stringify(k.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),D.value=!1,g.success(R.value>=0?"账户更新成功":"账户添加成功")}catch(a){console.error(a),g.error("保存失败，请重试")}},Se=async a=>{try{await ol.confirm("确定要删除这个 Google Ads 账户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),k.value.splice(a,1),await T({google_ads_accounts:JSON.stringify(k.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),g.success("删除成功")}catch(e){e!=="cancel"&&(console.error(e),g.error("删除失败，请重试"))}},Pe=async()=>{try{await T({google_ads_accounts:JSON.stringify(k.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),g.success("状态已更新")}catch(a){console.error(a),g.error("状态更新失败，请重试")}},Ue=async()=>{w.value.push({name:"",code:"",enabled:!0});try{await T({google_ads_accounts:JSON.stringify(k.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),g.success("自定义像素已添加")}catch(a){console.error(a),g.error("添加失败，请重试")}},Ae=async a=>{w.value.splice(a,1);try{await T({google_ads_accounts:JSON.stringify(k.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),g.success("自定义像素已删除")}catch(e){console.error(e),g.error("删除失败，请重试")}},ze=async()=>{H.value=!0;try{await T({google_ads_accounts:JSON.stringify(k.value),facebook_enabled:n.facebook_enabled,facebook_pixel_id:n.facebook_pixel_id,tiktok_enabled:n.tiktok_enabled,tiktok_pixel_id:n.tiktok_pixel_id,custom_pixels:JSON.stringify(w.value)}),g.success("配置保存成功，所有商品页面已生效"),await X()}catch(a){g.error("保存配置失败"),console.error(a)}finally{H.value=!1}},De=()=>{X(),g.info("已重置为当前保存的配置")},Ne=async()=>{ee.value=!0;try{const{data:a}=await ke({page:1,size:1e3,product_type:"original"});le.value=a.list.map(e=>({id:e.id,title:e.title,country:e.country}))}catch(a){console.error("加载商品列表失败",a)}finally{ee.value=!1}},Oe=()=>{x.title="",x.country="",V.current=1,V.size=10,L.value=!0,G()},G=async()=>{K.value=!0;try{const{data:a}=await ke({page:V.current,size:V.size,title:x.title||void 0,country:x.country||void 0,product_type:"original"});N.value=a.list,V.total=a.total,await al(),A.value&&i.product_ids.length>0&&N.value.forEach(e=>{i.product_ids.includes(e.id)&&A.value.toggleRowSelection(e,!0)})}catch(a){console.error("加载商品列表失败:",a),g.error("加载商品列表失败")}finally{K.value=!1}};let Y=null;const Ee=()=>{Y&&clearTimeout(Y),Y=window.setTimeout(()=>{oe()},500)},oe=()=>{V.current=1,G()},ae=()=>{x.title="",x.country="",V.current=1,G()},Je=a=>{const e=N.value.map(u=>u.id),r=i.product_ids.filter(u=>!e.includes(u));i.product_ids=[...r,...a.map(u=>u.id)],$()},Te=()=>{L.value=!1,$()},$=()=>{i.product_ids.length===0?O.value="":O.value=`已选择 ${i.product_ids.length} 个商品`},Re=a=>{const e=le.value.find(r=>r.id===a);return e?e.title:a},Le=a=>{i.product_ids=i.product_ids.filter(e=>e!==a),$()},Ge=()=>{i.product_ids=[],O.value=""},$e=()=>{A.value&&N.value.forEach(a=>{A.value.toggleRowSelection(a,!0)})},Be=()=>{i.product_ids=[],A.value&&A.value.clearSelection(),$()};return qe(()=>{X(),Ne()}),(a,e)=>{const r=_("el-icon"),u=_("el-button"),p=_("el-table-column"),P=_("el-tag"),F=_("el-text"),B=_("el-switch"),ne=_("el-table"),ie=_("el-empty"),j=_("el-card"),m=_("el-form-item"),S=_("el-input"),I=_("el-form"),se=_("el-col"),Ie=_("el-row"),M=_("el-option"),de=_("el-select"),re=_("el-dialog"),Fe=_("el-alert"),ue=_("el-avatar"),je=_("el-pagination"),Me=He("loading");return s(),y("div",sl,[e[46]||(e[46]=c("div",{class:"page-header"},[c("h2",null,"全局像素配置"),c("p",null,"配置网站的像素跟踪代码，支持多个 Google Ads 账户，可为每个账户指定商品范围")],-1)),l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",dl,[e[19]||(e[19]=c("span",{class:"card-title"},"Google Ads 账户管理",-1)),l(u,{type:"primary",onClick:we},{default:t(()=>[l(r,null,{default:t(()=>[l(b(pe))]),_:1}),e[18]||(e[18]=d(" 添加账户 ",-1))]),_:1})])]),default:t(()=>[l(ne,{data:k.value,stripe:"",border:"",style:{width:"100%"}},{default:t(()=>[l(p,{type:"index",label:"序号",width:"60",align:"center"}),l(p,{prop:"name",label:"账户名称","min-width":"150"},{default:t(({row:o})=>[l(P,null,{default:t(()=>[d(h(o.name),1)]),_:2},1024)]),_:1}),l(p,{prop:"conversion_id",label:"转化ID","min-width":"150"},{default:t(({row:o})=>[l(F,{type:"primary"},{default:t(()=>[d("AW-"+h(o.conversion_id),1)]),_:2},1024)]),_:1}),l(p,{prop:"conversion_label",label:"转化标签","min-width":"180"},{default:t(({row:o})=>[l(F,{type:"info"},{default:t(()=>[d(h(o.conversion_label),1)]),_:2},1024)]),_:1}),l(p,{prop:"product_ids",label:"应用商品","min-width":"150"},{default:t(({row:o})=>[!o.product_ids||o.product_ids.length===0?(s(),f(P,{key:0,type:"success"},{default:t(()=>[...e[20]||(e[20]=[d("全部商品",-1)])]),_:1})):(s(),f(P,{key:1,type:"warning"},{default:t(()=>[d("指定 "+h(o.product_ids.length)+" 个商品",1)]),_:2},1024))]),_:1}),l(p,{prop:"em_params",label:"em参数","min-width":"180"},{default:t(({row:o})=>[o.em_params&&o.em_params.length>0?(s(),y("div",rl,[(s(!0),y(E,null,J(o.em_params,C=>(s(),f(P,{key:C,type:"primary",size:"small"},{default:t(()=>[d(h(C),1)]),_:2},1024))),128))])):(s(),f(P,{key:1,type:"info",size:"small"},{default:t(()=>[...e[21]||(e[21]=[d("全部加载",-1)])]),_:1}))]),_:1}),l(p,{prop:"enabled",label:"状态",width:"100",align:"center"},{default:t(({row:o})=>[l(B,{modelValue:o.enabled,"onUpdate:modelValue":C=>o.enabled=C,onChange:Pe},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{label:"操作",width:"180",align:"center",fixed:"right"},{default:t(({row:o,$index:C})=>[l(u,{type:"primary",size:"small",link:"",onClick:U=>Ce(o,C)},{default:t(()=>[l(r,null,{default:t(()=>[l(b(We))]),_:1}),e[22]||(e[22]=d(" 编辑 ",-1))]),_:1},8,["onClick"]),l(u,{type:"danger",size:"small",link:"",onClick:U=>Se(C)},{default:t(()=>[l(r,null,{default:t(()=>[l(b(_e))]),_:1}),e[23]||(e[23]=d(" 删除 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),k.value.length===0?(s(),f(ie,{key:0,description:"暂无 Google Ads 账户，点击右上角添加"})):z("",!0)]),_:1}),l(Ie,{gutter:20},{default:t(()=>[l(se,{span:12},{default:t(()=>[l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",ul,[l(r,{class:"platform-icon facebook"},{default:t(()=>[l(b(Ze))]),_:1}),e[24]||(e[24]=c("span",{class:"card-title"},"Facebook 像素",-1))])]),default:t(()=>[l(I,{"label-width":"100px"},{default:t(()=>[l(m,{label:"启用"},{default:t(()=>[l(B,{modelValue:n.facebook_enabled,"onUpdate:modelValue":e[0]||(e[0]=o=>n.facebook_enabled=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),n.facebook_enabled?(s(),f(m,{key:0,label:"像素ID"},{default:t(()=>[l(S,{modelValue:n.facebook_pixel_id,"onUpdate:modelValue":e[1]||(e[1]=o=>n.facebook_pixel_id=o),placeholder:"例如: 123456789012345"},null,8,["modelValue"])]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1}),l(se,{span:12},{default:t(()=>[l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",cl,[l(r,{class:"platform-icon tiktok"},{default:t(()=>[l(b(Ke))]),_:1}),e[25]||(e[25]=c("span",{class:"card-title"},"TikTok 像素",-1))])]),default:t(()=>[l(I,{"label-width":"100px"},{default:t(()=>[l(m,{label:"启用"},{default:t(()=>[l(B,{modelValue:n.tiktok_enabled,"onUpdate:modelValue":e[2]||(e[2]=o=>n.tiktok_enabled=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),n.tiktok_enabled?(s(),f(m,{key:0,label:"像素ID"},{default:t(()=>[l(S,{modelValue:n.tiktok_pixel_id,"onUpdate:modelValue":e[3]||(e[3]=o=>n.tiktok_pixel_id=o),placeholder:"例如: C1234567890ABCDEF"},null,8,["modelValue"])]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),l(j,{class:"config-card",shadow:"never"},{header:t(()=>[c("div",_l,[e[27]||(e[27]=c("span",{class:"card-title"},"自定义像素",-1)),l(u,{type:"primary",onClick:Ue},{default:t(()=>[l(r,null,{default:t(()=>[l(b(pe))]),_:1}),e[26]||(e[26]=d(" 添加自定义像素 ",-1))]),_:1})])]),default:t(()=>[(s(!0),y(E,null,J(w.value,(o,C)=>(s(),y("div",{key:C,class:"custom-pixel-item"},[l(I,{"label-width":"100px"},{default:t(()=>[l(m,{label:"像素名称"},{default:t(()=>[l(S,{modelValue:o.name,"onUpdate:modelValue":U=>o.name=U,placeholder:"例如: 第三方统计代码"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(m,{label:"启用状态"},{default:t(()=>[l(B,{modelValue:o.enabled,"onUpdate:modelValue":U=>o.enabled=U},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(m,{label:"像素代码"},{default:t(()=>[l(S,{modelValue:o.code,"onUpdate:modelValue":U=>o.code=U,type:"textarea",rows:4,placeholder:"粘贴像素代码..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(m,null,{default:t(()=>[l(u,{type:"danger",onClick:U=>Ae(C)},{default:t(()=>[l(r,null,{default:t(()=>[l(b(_e))]),_:1}),e[28]||(e[28]=d(" 删除 ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),w.value.length===0?(s(),f(ie,{key:0,description:"暂无自定义像素"})):z("",!0)]),_:1}),c("div",pl,[l(u,{type:"primary",size:"large",onClick:ze,loading:H.value},{default:t(()=>[l(r,null,{default:t(()=>[l(b(Qe))]),_:1}),e[29]||(e[29]=d(" 保存所有配置 ",-1))]),_:1},8,["loading"]),l(u,{size:"large",onClick:De},{default:t(()=>[l(r,null,{default:t(()=>[l(b(fe))]),_:1}),e[30]||(e[30]=d(" 重置 ",-1))]),_:1})]),l(re,{modelValue:D.value,"onUpdate:modelValue":e[11]||(e[11]=o=>D.value=o),title:W.value,width:"700px"},{footer:t(()=>[l(u,{onClick:e[10]||(e[10]=o=>D.value=!1)},{default:t(()=>[...e[36]||(e[36]=[d("取消",-1)])]),_:1}),l(u,{type:"primary",onClick:he},{default:t(()=>[...e[37]||(e[37]=[d("确定",-1)])]),_:1})]),default:t(()=>[l(I,{ref_key:"accountFormRef",ref:Z,model:i,rules:ge,"label-width":"120px"},{default:t(()=>[l(m,{label:"账户名称",prop:"name"},{default:t(()=>[l(S,{modelValue:i.name,"onUpdate:modelValue":e[4]||(e[4]=o=>i.name=o),placeholder:"例如: 主投账户"},null,8,["modelValue"])]),_:1}),l(m,{label:"转化ID",prop:"conversion_id"},{default:t(()=>[l(S,{modelValue:i.conversion_id,"onUpdate:modelValue":e[5]||(e[5]=o=>i.conversion_id=o),placeholder:"例如: 17612844136"},{prepend:t(()=>[...e[31]||(e[31]=[d("AW-",-1)])]),_:1},8,["modelValue"]),e[32]||(e[32]=c("div",{class:"form-tip"},"在 Google Ads 后台创建转化操作后获取",-1))]),_:1}),l(m,{label:"转化标签",prop:"conversion_label"},{default:t(()=>[l(S,{modelValue:i.conversion_label,"onUpdate:modelValue":e[6]||(e[6]=o=>i.conversion_label=o),placeholder:"例如: REXpCP2e1aUbEOjYus5B"},null,8,["modelValue"]),e[33]||(e[33]=c("div",{class:"form-tip"},"转化操作对应的标签代码",-1))]),_:1}),l(m,{label:"应用商品"},{default:t(()=>[l(S,{modelValue:O.value,"onUpdate:modelValue":e[7]||(e[7]=o=>O.value=o),placeholder:"点击选择商品（不选择则应用到全部商品）",readonly:"",style:{width:"100%",cursor:"pointer"},onClick:Oe},{suffix:t(()=>[i.product_ids.length>0?(s(),f(r,{key:0,onClick:Xe(Ge,["stop"]),style:{cursor:"pointer"}},{default:t(()=>[l(b(me))]),_:1})):(s(),f(r,{key:1},{default:t(()=>[l(b(be))]),_:1}))]),_:1},8,["modelValue"]),i.product_ids.length>0?(s(),y("div",fl,[(s(!0),y(E,null,J(i.product_ids,o=>(s(),f(P,{key:o,closable:"",onClose:C=>Le(o),style:{"margin-right":"8px","margin-bottom":"8px"}},{default:t(()=>[d(h(Re(o)),1)]),_:2},1032,["onClose"]))),128))])):z("",!0),e[34]||(e[34]=c("div",{class:"form-tip"},"不选择任何商品时，此像素将应用到全部商品页面",-1))]),_:1}),l(m,{label:"em参数绑定"},{default:t(()=>[l(de,{modelValue:i.em_params,"onUpdate:modelValue":e[8]||(e[8]=o=>i.em_params=o),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入em参数值（可多个）",style:{width:"100%"}},{default:t(()=>[(s(!0),y(E,null,J(te.value,o=>(s(),f(M,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[35]||(e[35]=c("div",{class:"form-tip"},[d(" 绑定em参数后，只有URL包含对应em参数时才会加载此像素"),c("br"),d(' 例如：绑定"account1"，则访问 ?em=account1 时加载此像素'),c("br"),d(" 不绑定则加载到所有页面（兼容旧逻辑） ")],-1))]),_:1}),l(m,{label:"启用状态"},{default:t(()=>[l(B,{modelValue:i.enabled,"onUpdate:modelValue":e[9]||(e[9]=o=>i.enabled=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(re,{modelValue:L.value,"onUpdate:modelValue":e[17]||(e[17]=o=>L.value=o),title:"选择商品",width:"900px","close-on-click-modal":!1},{footer:t(()=>[c("div",Vl,[l(F,null,{default:t(()=>[d("已选择 "+h(i.product_ids.length)+" 个商品",1)]),_:1})]),l(u,{onClick:e[16]||(e[16]=o=>L.value=!1)},{default:t(()=>[...e[44]||(e[44]=[d("取消",-1)])]),_:1}),l(u,{type:"primary",onClick:Te},{default:t(()=>[...e[45]||(e[45]=[d("确定",-1)])]),_:1})]),default:t(()=>[l(Fe,{title:"快速搜索",type:"info",closable:!1,style:{"margin-bottom":"16px"},description:"输入商品标题即可快速搜索，支持按国家筛选"}),l(I,{model:x,inline:"",style:{"margin-bottom":"16px"}},{default:t(()=>[l(m,{label:"快速搜索"},{default:t(()=>[l(S,{modelValue:x.title,"onUpdate:modelValue":e[12]||(e[12]=o=>x.title=o),placeholder:"输入商品标题搜索",clearable:"",style:{width:"250px"},onInput:Ee,onClear:ae},{prefix:t(()=>[l(r,null,{default:t(()=>[l(b(be))]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"国家筛选"},{default:t(()=>[l(de,{modelValue:x.country,"onUpdate:modelValue":e[13]||(e[13]=o=>x.country=o),placeholder:"全部国家",clearable:"",style:{width:"180px"},onChange:oe},{default:t(()=>[(s(!0),y(E,null,J(Q.value.withProducts,o=>(s(),f(M,{key:o.code,label:`${o.name} (${o.count}条)`,value:o.code},null,8,["label","value"]))),128)),Q.value.withProducts.length>0?(s(),f(M,{key:0,disabled:"",value:""},{default:t(()=>[...e[38]||(e[38]=[c("span",{style:{color:"#dcdfe6"}},"──────────",-1)])]),_:1})):z("",!0),(s(!0),y(E,null,J(Q.value.withoutProducts,o=>(s(),f(M,{key:o.code,label:o.name,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,null,{default:t(()=>[l(u,{onClick:ae},{default:t(()=>[l(r,null,{default:t(()=>[l(b(fe))]),_:1}),e[39]||(e[39]=d(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"]),c("div",ml,[c("div",bl,[l(r,null,{default:t(()=>[l(b(el))]),_:1}),e[40]||(e[40]=d(" 共找到 ",-1)),l(F,{type:"primary",style:{"font-weight":"600"}},{default:t(()=>[d(h(V.total),1)]),_:1}),e[41]||(e[41]=d(" 个商品 ",-1)),x.title||x.country?(s(),y("span",kl," （已筛选） ")):z("",!0)]),c("div",null,[l(u,{size:"small",onClick:$e},{default:t(()=>[l(r,null,{default:t(()=>[l(b(ll))]),_:1}),e[42]||(e[42]=d(" 全选当前页 ",-1))]),_:1}),l(u,{size:"small",onClick:Be},{default:t(()=>[l(r,null,{default:t(()=>[l(b(me))]),_:1}),e[43]||(e[43]=d(" 清空选择 ",-1))]),_:1})])]),Ye((s(),f(ne,{data:N.value,"max-height":"400px",onSelectionChange:Je,"row-key":o=>o.id,ref_key:"productTableRef",ref:A},{default:t(()=>[l(p,{type:"selection",width:"55","reserve-selection":!0}),l(p,{label:"商品图片",width:"80"},{default:t(({row:o})=>[o.image_urls&&o.image_urls[0]?(s(),f(ue,{key:0,size:50},{default:t(()=>[c("img",{src:o.image_urls[0],style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,vl)]),_:2},1024)):(s(),f(ue,{key:1,size:50},{default:t(()=>[l(r,null,{default:t(()=>[l(b(tl))]),_:1})]),_:1}))]),_:1}),l(p,{prop:"title",label:"商品标题","show-overflow-tooltip":"","min-width":"200"}),l(p,{label:"国家",width:"120"},{default:t(({row:o})=>[o.country?(s(),f(P,{key:0,type:"success",size:"small"},{default:t(()=>[d(h(xe[o.country.toUpperCase()]||o.country),1)]),_:2},1024)):(s(),y("span",gl,"--"))]),_:1}),l(p,{prop:"sell_price",label:"价格",width:"100",align:"right"},{default:t(({row:o})=>[o.sell_price?(s(),y("span",yl,h(o.sell_price),1)):(s(),y("span",xl,"--"))]),_:1}),l(p,{label:"状态",width:"80"},{default:t(({row:o})=>[l(P,{type:o.status==="active"?"success":"info",size:"small"},{default:t(()=>[d(h(o.status==="active"?"上架":o.status==="inactive"?"下架":"草稿"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data","row-key"])),[[Me,K.value]]),l(je,{"current-page":V.current,"onUpdate:currentPage":e[14]||(e[14]=o=>V.current=o),"page-size":V.size,"onUpdate:pageSize":e[15]||(e[15]=o=>V.size=o),total:V.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:G,onSizeChange:G,style:{"margin-top":"16px","justify-content":"center"}},null,8,["current-page","page-size","total"])]),_:1},8,["modelValue"])])}}}),zl=il(Cl,[["__scopeId","data-v-98830ce5"]]);export{zl as default};
